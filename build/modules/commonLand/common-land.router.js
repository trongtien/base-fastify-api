"use strict";var cr=Object.defineProperty;var Rs=Object.getOwnPropertyDescriptor;var Ds=Object.getOwnPropertyNames;var Ls=Object.prototype.hasOwnProperty;var zs=(r,e,t)=>e in r?cr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Vs=(r,e)=>{for(var t in e)cr(r,t,{get:e[t],enumerable:!0})},Ms=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Ds(e))!Ls.call(r,s)&&s!==t&&cr(r,s,{get:()=>e[s],enumerable:!(n=Rs(e,s))||n.enumerable});return r};var Bs=r=>Ms(cr({},"__esModule",{value:!0}),r);var f=(r,e,t)=>(zs(r,typeof e!="symbol"?e+"":e,t),t),An=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var In=(r,e,t)=>(An(r,e,"read from private field"),t?t.call(r):e.get(r)),qn=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},Rn=(r,e,t,n)=>(An(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t);var Po={};Vs(Po,{COMMON_LAND_ROUTER:()=>Eo});module.exports=Bs(Po);var ur=class{static convertStringToSlug(e){let{text:t,slugConvert:n="-"}=e;if(!t||t===null)return"";let s;return s=t.toLowerCase(),s=t.toLowerCase(),s=s.replace(/á|à|ả|ạ|ã|ă|ắ|ằ|ẳ|ẵ|ặ|â|ấ|ầ|ẩ|ẫ|ậ/gi,"a"),s=s.replace(/é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ/gi,"e"),s=s.replace(/i|í|ì|ỉ|ĩ|ị/gi,"i"),s=s.replace(/ó|ò|ỏ|õ|ọ|ô|ố|ồ|ổ|ỗ|ộ|ơ|ớ|ờ|ở|ỡ|ợ/gi,"o"),s=s.replace(/ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự/gi,"u"),s=s.replace(/ý|ỳ|ỷ|ỹ|ỵ/gi,"y"),s=s.replace(/đ/gi,"d"),s=s.replace(/\`|\~|\!|\@|\#|\||\$|\%|\^|\&|\*|\(|\)|\+|\=|\,|\.|\/|\?|\>|\<|\'|\"|\:|\;|_/gi,""),s=s.replace(/ /gi,n),s=s.replace(/\-\-\-\-\-/gi,"-"),s=s.replace(/\-\-\-\-/gi,"-"),s=s.replace(/\-\-\-/gi,"-"),s=s.replace(/\-\-/gi,"-"),s="@"+s+"@",s=s.replace(/\@\-|\-\@|\@/gi,""),s?.trim()}static isPathImage(e){return e.match(/\.(jpeg|jpg|gif|png)$/)!=null}};var d=Symbol.for("drizzle:entityKind"),Io=Symbol.for("drizzle:hasOwnEntityKind");function h(r,e){if(!r||typeof r!="object")return!1;if(r instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,d))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let t=r.constructor;if(t)for(;t;){if(d in t&&t[d]===e[d])return!0;t=Object.getPrototypeOf(t)}return!1}var Qs,I=class{constructor(e,t){this.table=e,this.config=t,this.name=t.name,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType}name;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}};Qs=d,f(I,Qs,"Column");var Ks,Vt=class{config;constructor(e,t,n){this.config={name:e,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:n}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}};Ks=d,f(Vt,Ks,"ColumnBuilder");var dr=Symbol.for("drizzle:Name"),Hr=Symbol.for("drizzle:Schema"),Dn=Symbol.for("drizzle:Columns"),Ln=Symbol.for("drizzle:ExtraConfigColumns"),Yr=Symbol.for("drizzle:OriginalName"),Gr=Symbol.for("drizzle:BaseName"),zn=Symbol.for("drizzle:IsAlias"),Vn=Symbol.for("drizzle:ExtraConfigBuilder"),Fs=Symbol.for("drizzle:IsDrizzleTable"),Us,w=class{[(Us=d,dr)];[Yr];[Hr];[Dn];[Ln];[Gr];[zn]=!1;[Vn]=void 0;[Fs]=!0;constructor(e,t,n){this[dr]=this[Yr]=e,this[Hr]=t,this[Gr]=n}};f(w,Us,"Table"),f(w,"Symbol",{Name:dr,Schema:Hr,OriginalName:Yr,Columns:Dn,ExtraConfigColumns:Ln,BaseName:Gr,IsAlias:zn,ExtraConfigBuilder:Vn});function st(r){return r[dr]}var Xr=Symbol.for("drizzle:PgInlineForeignKeys"),Zs,X=class extends w{[(Zs=d,Xr)]=[];[w.Symbol.ExtraConfigBuilder]=void 0};f(X,Zs,"PgTable"),f(X,"Symbol",Object.assign({},w.Symbol,{InlineForeignKeys:Xr}));function en(r,e,t,n,s=r){let i=new X(r,n,s),a=Object.fromEntries(Object.entries(e).map(([c,m])=>{let S=m,E=S.build(i);return i[Xr].push(...S.buildForeignKeys(E,i)),[c,E]})),o=Object.fromEntries(Object.entries(e).map(([c,m])=>{let E=m.buildExtraConfigColumn(i);return[c,E]})),u=Object.assign(i,a);return u[w.Symbol.Columns]=a,u[w.Symbol.ExtraConfigColumns]=o,t&&(u[X.Symbol.ExtraConfigBuilder]=t),u}var tn=(r,e,t)=>en(r,e,t,void 0);var Ws,Mt=class{reference;_onUpdate="no action";_onDelete="no action";constructor(e,t){this.reference=()=>{let{name:n,columns:s,foreignColumns:i}=e();return{name:n,columns:s,foreignTable:i[0].table,foreignColumns:i}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new fr(e,this)}};Ws=d,f(Mt,Ws,"PgForeignKeyBuilder");var Js,fr=class{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}reference;onUpdate;onDelete;getName(){let{name:e,columns:t,foreignColumns:n}=this.reference(),s=t.map(o=>o.name),i=n.map(o=>o.name),a=[this.table[X.Symbol.Name],...s,n[0].table[X.Symbol.Name],...i];return e??`${a.join("_")}_fk`}};Js=d,f(fr,Js,"PgForeignKey");function mr(r,...e){return r(...e)}function nn(r,e){return`${r[X.Symbol.Name]}_${e.join("_")}_unique`}var Hs,hr=class{constructor(e,t){this.name=t,this.columns=e}columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new pr(e,this.columns,this.nullsNotDistinctConfig,this.name)}};Hs=d,f(hr,Hs,"PgUniqueConstraintBuilder");var Ys,rn=class{name;constructor(e){this.name=e}on(...e){return new hr(e,this.name)}};Ys=d,f(rn,Ys,"PgUniqueOnConstraintBuilder");var Gs,pr=class{constructor(e,t,n,s){this.table=e,this.columns=t,this.name=s??nn(this.table,this.columns.map(i=>i.name)),this.nullsNotDistinct=n}columns;name;nullsNotDistinct=!1;getName(){return this.name}};Gs=d,f(pr,Gs,"PgUniqueConstraint");function Mn(r,e,t){for(let n=e;n<r.length;n++){let s=r[n];if(s==="\\"){n++;continue}if(s==='"')return[r.slice(e,n).replace(/\\/g,""),n+1];if(!t&&(s===","||s==="}"))return[r.slice(e,n).replace(/\\/g,""),n]}return[r.slice(e).replace(/\\/g,""),r.length]}function Bn(r,e=0){let t=[],n=e,s=!1;for(;n<r.length;){let i=r[n];if(i===","){(s||n===e)&&t.push(""),s=!0,n++;continue}if(s=!1,i==="\\"){n+=2;continue}if(i==='"'){let[u,c]=Mn(r,n+1,!0);t.push(u),n=c;continue}if(i==="}")return[t,n+1];if(i==="{"){let[u,c]=Bn(r,n+1);t.push(u),n=c;continue}let[a,o]=Mn(r,n,!1);t.push(a),n=o}return[t,n]}function Qn(r){let[e]=Bn(r,1);return e}function sn(r){return`{${r.map(e=>Array.isArray(e)?sn(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var Xs,q=class extends Vt{foreignKeyConfigs=[];array(e){return new gr(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:n,actions:s})=>mr((i,a)=>{let o=new Mt(()=>{let u=i();return{columns:[e],foreignColumns:[u]}});return a.onUpdate&&o.onUpdate(a.onUpdate),a.onDelete&&o.onDelete(a.onDelete),o.build(t)},n,s))}buildExtraConfigColumn(e){return new yr(e,this.config)}};Xs=d,f(q,Xs,"PgColumnBuilder");var ei,$=class extends I{constructor(e,t){t.uniqueName||(t.uniqueName=nn(e,[t.name])),super(e,t),this.table=e}};ei=d,f($,ei,"PgColumn");var ti,yr=class extends ${getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}};ti=d,f(yr,ti,"ExtraConfigColumn");var ri,Me=class{constructor(e,t,n){this.name=e,this.type=t,this.indexConfig=n}name;type;indexConfig};ri=d,f(Me,ri,"IndexedColumn");var ni,gr=class extends q{constructor(e,t,n){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=n}build(e){let t=this.config.baseBuilder.build(e);return new vr(e,this.config,t)}};ni=d,f(gr,ni,"PgArrayBuilder");var si,an=class extends ${constructor(e,t,n,s){super(e,t),this.baseColumn=n,this.range=s,this.size=t.size}size;getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=Qn(e)),e.map(t=>this.baseColumn.mapFromDriverValue(t))}mapToDriverValue(e,t=!1){let n=e.map(s=>s===null?null:h(this.baseColumn,an)?this.baseColumn.mapToDriverValue(s,!0):this.baseColumn.mapToDriverValue(s));return t?n:sn(n)}},vr=an;si=d,f(vr,si,"PgArray");var on=Symbol.for("drizzle:isPgEnum");function Kn(r){return!!r&&typeof r=="function"&&on in r&&r[on]===!0}var ii,_r=class extends q{constructor(e,t){super(e,"string","PgEnumColumn"),this.config.enum=t}build(e){return new wr(e,this.config)}};ii=d,f(_r,ii,"PgEnumColumnBuilder");var ai,wr=class extends ${enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}};ai=d,f(wr,ai,"PgEnumColumn");function Fn(r,e,t){let n=Object.assign(s=>new _r(s,n),{enumName:r,enumValues:e,schema:t,[on]:!0});return n}var oi,U=class{constructor(e,t,n,s=!1){this._={brand:"Subquery",sql:e,selectedFields:t,alias:n,isWith:s}}};oi=d,f(U,oi,"Subquery");var li,Bt=class extends U{};li=d,f(Bt,li,"WithSubquery");var Un="0.31.2";var ln,cn,Qt={startActiveSpan(r,e){return ln?(cn||(cn=ln.trace.getTracer("drizzle-orm",Un)),mr((t,n)=>n.startActiveSpan(r,s=>{try{return e(s)}catch(i){throw s.setStatus({code:t.SpanStatusCode.ERROR,message:i instanceof Error?i.message:"Unknown error"}),i}finally{s.end()}}),ln,cn)):e()}};var R=Symbol.for("drizzle:ViewBaseConfig");var ui,un=class{};ui=d,f(un,ui,"FakePrimitiveParam");function dn(r){return r!=null&&typeof r.getSQL=="function"}function ci(r){let e={sql:"",params:[]};for(let t of r)e.sql+=t.sql,e.params.push(...t.params),t.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...t.typings));return e}var di,z=class{value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new _([this])}};di=d,f(z,di,"StringChunk");var fi,it=class{constructor(e){this.queryChunks=e}decoder=Wn;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return Qt.startActiveSpan("drizzle.buildSQL",t=>{let n=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,t){let n=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{escapeName:s,escapeParam:i,prepareTyping:a,inlineParams:o,paramStartIndex:u}=n;return ci(e.map(c=>{if(h(c,z))return{sql:c.value.join(""),params:[]};if(h(c,at))return{sql:s(c.value),params:[]};if(c===void 0)return{sql:"",params:[]};if(Array.isArray(c)){let m=[new z("(")];for(let[S,E]of c.entries())m.push(E),S<c.length-1&&m.push(new z(", "));return m.push(new z(")")),this.buildQueryFromSourceParams(m,n)}if(h(c,it))return this.buildQueryFromSourceParams(c.queryChunks,{...n,inlineParams:o||c.shouldInlineParams});if(h(c,w)){let m=c[w.Symbol.Schema],S=c[w.Symbol.Name];return{sql:m===void 0?s(S):s(m)+"."+s(S),params:[]}}if(h(c,I))return t.invokeSource==="indexes"?{sql:s(c.name),params:[]}:{sql:s(c.table[w.Symbol.Name])+"."+s(c.name),params:[]};if(h(c,ee)){let m=c[R].schema,S=c[R].name;return{sql:m===void 0?s(S):s(m)+"."+s(S),params:[]}}if(h(c,he)){let m=c.value===null?null:c.encoder.mapToDriverValue(c.value);if(h(m,it))return this.buildQueryFromSourceParams([m],n);if(o)return{sql:this.mapInlineParam(m,n),params:[]};let S;return a!==void 0&&(S=[a(c.encoder)]),{sql:i(u.value++,m),params:[m],typings:S}}return h(c,Be)?{sql:i(u.value++,c),params:[c]}:h(c,it.Aliased)&&c.fieldAlias!==void 0?{sql:s(c.fieldAlias),params:[]}:h(c,U)?c._.isWith?{sql:s(c._.alias),params:[]}:this.buildQueryFromSourceParams([new z("("),c._.sql,new z(") "),new at(c._.alias)],n):Kn(c)?c.schema?{sql:s(c.schema)+"."+s(c.enumName),params:[]}:{sql:s(c.enumName),params:[]}:dn(c)?this.buildQueryFromSourceParams([new z("("),c.getSQL(),new z(")")],n):o?{sql:this.mapInlineParam(c,n),params:[]}:{sql:i(u.value++,c),params:[c]}}))}mapInlineParam(e,{escapeString:t}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return t(e);if(typeof e=="object"){let n=e.toString();return t(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new it.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}},_=it;fi=d,f(_,fi,"SQL");var mi,at=class{constructor(e){this.value=e}brand;getSQL(){return new _([this])}};mi=d,f(at,mi,"Name");function Zn(r){return typeof r=="object"&&r!==null&&"mapToDriverValue"in r&&typeof r.mapToDriverValue=="function"}var Wn={mapFromDriverValue:r=>r},Jn={mapToDriverValue:r=>r},Al={...Wn,...Jn},hi,he=class{constructor(e,t=Jn){this.value=e,this.encoder=t}brand;getSQL(){return new _([this])}};hi=d,f(he,hi,"Param");function l(r,...e){let t=[];(e.length>0||r.length>0&&r[0]!=="")&&t.push(new z(r[0]));for(let[n,s]of e.entries())t.push(s,new z(r[n+1]));return new _(t)}(r=>{function e(){return new _([])}r.empty=e;function t(u){return new _(u)}r.fromList=t;function n(u){return new _([new z(u)])}r.raw=n;function s(u,c){let m=[];for(let[S,E]of u.entries())S>0&&c!==void 0&&m.push(c),m.push(E);return new _(m)}r.join=s;function i(u){return new at(u)}r.identifier=i;function a(u){return new Be(u)}r.placeholder=a;function o(u,c){return new he(u,c)}r.param=o})(l||(l={}));(r=>{class e{constructor(n,s){this.sql=n,this.fieldAlias=s}static[d]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}r.Aliased=e})(_||(_={}));var pi,Be=class{constructor(e){this.name=e}getSQL(){return new _([this])}};pi=d,f(Be,pi,"Placeholder");var yi,ee=class{[(yi=d,R)];constructor({name:e,schema:t,selectedFields:n,query:s}){this[R]={name:e,originalName:e,schema:t,selectedFields:n,query:s,isExisting:!s,isAlias:!1}}getSQL(){return new _([this])}};f(ee,yi,"View");I.prototype.getSQL=function(){return new _([this])};w.prototype.getSQL=function(){return new _([this])};U.prototype.getSQL=function(){return new _([this])};var gi,Ae=class{constructor(e){this.table=e}get(e,t){return t==="table"?this.table:e[t]}};gi=d,f(Ae,gi,"ColumnAliasProxyHandler");var vi,Qe=class{constructor(e,t){this.alias=e,this.replaceOriginalName=t}get(e,t){if(t===w.Symbol.IsAlias)return!0;if(t===w.Symbol.Name)return this.alias;if(this.replaceOriginalName&&t===w.Symbol.OriginalName)return this.alias;if(t===R)return{...e[R],name:this.alias,isAlias:!0};if(t===w.Symbol.Columns){let s=e[w.Symbol.Columns];if(!s)return s;let i={};return Object.keys(s).map(a=>{i[a]=new Proxy(s[a],new Ae(new Proxy(e,this)))}),i}let n=e[t];return h(n,I)?new Proxy(n,new Ae(new Proxy(e,this))):n}};vi=d,f(Qe,vi,"TableAliasProxyHandler");var _i,fn=class{constructor(e){this.alias=e}get(e,t){return t==="sourceTable"?Kt(e.sourceTable,this.alias):e[t]}};_i=d,f(fn,_i,"RelationTableAliasProxyHandler");function Kt(r,e){return new Proxy(r,new Qe(e,!1))}function ve(r,e){return new Proxy(r,new Ae(new Proxy(r.table,new Qe(e,!1))))}function mn(r,e){return new _.Aliased(Ft(r.sql,e),r.fieldAlias)}function Ft(r,e){return l.join(r.queryChunks.map(t=>h(t,I)?ve(t,e):h(t,_)?Ft(t,e):h(t,_.Aliased)?mn(t,e):t))}var wi,pe=class extends q{defaultNow(){return this.default(l`now()`)}};wi=d,f(pe,wi,"PgDateColumnBaseBuilder");var bi,hn=class extends pe{constructor(e){super(e,"date","PgDate")}build(e){return new ot(e,this.config)}};bi=d,f(hn,bi,"PgDateBuilder");var xi,ot=class extends ${getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}};xi=d,f(ot,xi,"PgDate");var Si,pn=class extends pe{constructor(e){super(e,"string","PgDateString")}build(e){return new lt(e,this.config)}};Si=d,f(pn,Si,"PgDateStringBuilder");var Ti,lt=class extends ${getSQLType(){return"date"}};Ti=d,f(lt,Ti,"PgDateString");var Ni,br=class extends q{constructor(e){super(e,"number","PgInteger")}build(e){return new xr(e,this.config)}};Ni=d,f(br,Ni,"PgIntegerBuilder");var Ci,xr=class extends ${getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}};Ci=d,f(xr,Ci,"PgInteger");function P(r){return new br(r)}var $i,yn=class extends q{constructor(e){super(e,"json","PgJson")}build(e){return new ct(e,this.config)}};$i=d,f(yn,$i,"PgJsonBuilder");var ki,ct=class extends ${constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};ki=d,f(ct,ki,"PgJson");var Oi,gn=class extends q{constructor(e){super(e,"json","PgJsonb")}build(e){return new ut(e,this.config)}};Oi=d,f(gn,Oi,"PgJsonbBuilder");var Ei,ut=class extends ${constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};Ei=d,f(ut,Ei,"PgJsonb");var Pi,Sr=class extends q{constructor(e,t,n){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=n}build(e){return new dt(e,this.config)}};Pi=d,f(Sr,Pi,"PgNumericBuilder");var ji,dt=class extends ${precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}};ji=d,f(dt,ji,"PgNumeric");function vn(r,e){return new Sr(r,e?.precision,e?.scale)}var Ai,Tr=class extends q{constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new Nr(e,this.config)}};Ai=d,f(Tr,Ai,"PgRealBuilder");var Ii,Nr=class extends ${constructor(e,t){super(e,t)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e};Ii=d,f(Nr,Ii,"PgReal");function Ie(r){return new Tr(r)}var qi,Cr=class extends q{constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new $r(e,this.config)}};qi=d,f(Cr,qi,"PgTextBuilder");var Ri,$r=class extends ${enumValues=this.config.enumValues;getSQLType(){return"text"}};Ri=d,f($r,Ri,"PgText");function _e(r,e={}){return new Cr(r,e)}var Di,_n=class extends pe{constructor(e,t,n){super(e,"string","PgTime"),this.withTimezone=t,this.precision=n,this.config.withTimezone=t,this.config.precision=n}build(e){return new ft(e,this.config)}};Di=d,f(_n,Di,"PgTimeBuilder");var Li,ft=class extends ${withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};Li=d,f(ft,Li,"PgTime");var zi,kr=class extends pe{constructor(e,t,n){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=n}build(e){return new mt(e,this.config)}};zi=d,f(kr,zi,"PgTimestampBuilder");var Vi,mt=class extends ${withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()};Vi=d,f(mt,Vi,"PgTimestamp");var Mi,Or=class extends pe{constructor(e,t,n){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=n}build(e){return new ht(e,this.config)}};Mi=d,f(Or,Mi,"PgTimestampStringBuilder");var Bi,ht=class extends ${withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};Bi=d,f(ht,Bi,"PgTimestampString");function J(r,e={}){return e.mode==="string"?new Or(r,e.withTimezone??!1,e.precision):new kr(r,e.withTimezone??!1,e.precision)}var Qi,Er=class extends q{constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(l`gen_random_uuid()`)}build(e){return new pt(e,this.config)}};Qi=d,f(Er,Qi,"PgUUIDBuilder");var Ki,pt=class extends ${getSQLType(){return"uuid"}};Ki=d,f(pt,Ki,"PgUUID");function H(r){return new Er(r)}var Fi,Pr=class extends q{constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new jr(e,this.config)}};Fi=d,f(Pr,Fi,"PgVarcharBuilder");var Ui,jr=class extends ${length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}};Ui=d,f(jr,Ui,"PgVarchar");function C(r,e={}){return new Pr(r,e)}var Zi,Ut=class{[(Zi=d,Symbol.toStringTag)]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}then(e,t){return this.execute().then(e,t)}};f(Ut,Zi,"QueryPromise");function yt(r,e){return Object.entries(r).reduce((t,[n,s])=>{if(typeof n!="string")return t;let i=e?[...e,n]:[n];return h(s,I)||h(s,_)||h(s,_.Aliased)?t.push({path:i,field:s}):h(s,w)?t.push(...yt(s[w.Symbol.Columns],i)):t.push(...yt(s,i)),t},[])}function wn(r,e){let t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(let[s,i]of t.entries())if(i!==n[s])return!1;return!0}function Hn(r,e){for(let t of e)for(let n of Object.getOwnPropertyNames(t.prototype))n!=="constructor"&&Object.defineProperty(r.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n)||Object.create(null))}function Zt(r){return r[w.Symbol.Columns]}function bn(r){return h(r,U)?r._.alias:h(r,ee)?r[R].name:h(r,_)?void 0:r[w.Symbol.IsAlias]?r[w.Symbol.Name]:r[w.Symbol.BaseName]}var Wi,gt=class extends Error{constructor({message:e,cause:t}){super(e),this.name="DrizzleError",this.cause=t}};Wi=d,f(gt,Wi,"DrizzleError");var Ji,xn=class extends gt{constructor(){super({message:"Rollback"})}};Ji=d,f(xn,Ji,"TransactionRollbackError");function se(r,e){return Zn(e)&&!dn(r)&&!h(r,he)&&!h(r,Be)&&!h(r,I)&&!h(r,w)&&!h(r,ee)?new he(r,e):r}var qe=(r,e)=>l`${r} = ${se(e,r)}`,Yn=(r,e)=>l`${r} <> ${se(e,r)}`;function Re(...r){let e=r.filter(t=>t!==void 0);if(e.length!==0)return e.length===1?new _(e):new _([new z("("),l.join(e,new z(" and ")),new z(")")])}function Gn(...r){let e=r.filter(t=>t!==void 0);if(e.length!==0)return e.length===1?new _(e):new _([new z("("),l.join(e,new z(" or ")),new z(")")])}function Xn(r){return l`not ${r}`}var es=(r,e)=>l`${r} > ${se(e,r)}`,ts=(r,e)=>l`${r} >= ${se(e,r)}`,rs=(r,e)=>l`${r} < ${se(e,r)}`,ns=(r,e)=>l`${r} <= ${se(e,r)}`;function Ar(r,e){if(Array.isArray(e)){if(e.length===0)throw new Error("inArray requires at least one value");return l`${r} in ${e.map(t=>se(t,r))}`}return l`${r} in ${se(e,r)}`}function ss(r,e){if(Array.isArray(e)){if(e.length===0)throw new Error("notInArray requires at least one value");return l`${r} not in ${e.map(t=>se(t,r))}`}return l`${r} not in ${se(e,r)}`}function is(r){return l`${r} is null`}function as(r){return l`${r} is not null`}function os(r){return l`exists ${r}`}function ls(r){return l`not exists ${r}`}function cs(r,e,t){return l`${r} between ${se(e,r)} and ${se(t,r)}`}function us(r,e,t){return l`${r} not between ${se(e,r)} and ${se(t,r)}`}function ds(r,e){return l`${r} like ${e}`}function fs(r,e){return l`${r} not like ${e}`}function ms(r,e){return l`${r} ilike ${e}`}function hs(r,e){return l`${r} not ilike ${e}`}function ps(r){return l`${r} asc`}function ys(r){return l`${r} desc`}var Hi,Wt=class{constructor(e,t,n){this.sourceTable=e,this.referencedTable=t,this.relationName=n,this.referencedTableName=t[w.Symbol.Name]}referencedTableName;fieldName};Hi=d,f(Wt,Hi,"Relation");var Yi,Sn=class{constructor(e,t){this.table=e,this.config=t}};Yi=d,f(Sn,Yi,"Relations");var Gi,Tn=class extends Wt{constructor(e,t,n,s){super(e,t,n?.relationName),this.config=n,this.isNullable=s}withFieldName(e){let t=new Tn(this.sourceTable,this.referencedTable,this.config,this.isNullable);return t.fieldName=e,t}},Ke=Tn;Gi=d,f(Ke,Gi,"One");var Xi,Nn=class extends Wt{constructor(e,t,n){super(e,t,n?.relationName),this.config=n}withFieldName(e){let t=new Nn(this.sourceTable,this.referencedTable,this.config);return t.fieldName=e,t}},Jt=Nn;Xi=d,f(Jt,Xi,"Many");function gs(){return{and:Re,between:cs,eq:qe,exists:os,gt:es,gte:ts,ilike:ms,inArray:Ar,isNull:is,isNotNull:as,like:ds,lt:rs,lte:ns,ne:Yn,not:Xn,notBetween:us,notExists:ls,notLike:fs,notIlike:hs,notInArray:ss,or:Gn,sql:l}}function vs(){return{sql:l,asc:ps,desc:ys}}function _s(r,e,t){if(h(t,Ke)&&t.config)return{fields:t.config.fields,references:t.config.references};let n=e[t.referencedTable[w.Symbol.Name]];if(!n)throw new Error(`Table "${t.referencedTable[w.Symbol.Name]}" not found in schema`);let s=r[n];if(!s)throw new Error(`Table "${n}" not found in schema`);let i=t.sourceTable,a=e[i[w.Symbol.Name]];if(!a)throw new Error(`Table "${i[w.Symbol.Name]}" not found in schema`);let o=[];for(let u of Object.values(s.relations))(t.relationName&&t!==u&&u.relationName===t.relationName||!t.relationName&&u.referencedTable===t.sourceTable)&&o.push(u);if(o.length>1)throw t.relationName?new Error(`There are multiple relations with name "${t.relationName}" in table "${n}"`):new Error(`There are multiple relations between "${n}" and "${t.sourceTable[w.Symbol.Name]}". Please specify relation name`);if(o[0]&&h(o[0],Ke)&&o[0].config)return{fields:o[0].config.references,references:o[0].config.fields};throw new Error(`There is not enough information to infer relation "${a}.${t.fieldName}"`)}var ea,we=class extends ee{};ea=d,f(we,ea,"PgViewBase");var ta,Ht=class{async migrate(e,t,n){let s=typeof n=="string"?"__drizzle_migrations":n.migrationsTable??"__drizzle_migrations",i=typeof n=="string"?"drizzle":n.migrationsSchema??"drizzle",a=l`
			CREATE TABLE IF NOT EXISTS ${l.identifier(i)}.${l.identifier(s)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await t.execute(l`CREATE SCHEMA IF NOT EXISTS ${l.identifier(i)}`),await t.execute(a);let u=(await t.all(l`select id, hash, created_at from ${l.identifier(i)}.${l.identifier(s)} order by created_at desc limit 1`))[0];await t.transaction(async c=>{for await(let m of e)if(!u||Number(u.created_at)<m.folderMillis){for(let S of m.sql)await c.execute(l.raw(S));await c.execute(l`insert into ${l.identifier(i)}.${l.identifier(s)} ("hash", "created_at") values(${m.hash}, ${m.folderMillis})`)}})}escapeName(e){return`"${e}"`}escapeParam(e){return`$${e+1}`}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!e?.length)return;let t=[l`with `];for(let[n,s]of e.entries())t.push(l`${l.identifier(s._.alias)} as (${s._.sql})`),n<e.length-1&&t.push(l`, `);return t.push(l` `),l.join(t)}buildDeleteQuery({table:e,where:t,returning:n,withList:s}){let i=this.buildWithCTE(s),a=n?l` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0,o=t?l` where ${t}`:void 0;return l`${i}delete from ${e}${o}${a}`}buildUpdateSet(e,t){let n=e[w.Symbol.Columns],s=Object.keys(n).filter(a=>t[a]!==void 0||n[a]?.onUpdateFn!==void 0),i=s.length;return l.join(s.flatMap((a,o)=>{let u=n[a],c=t[a]??l.param(u.onUpdateFn(),u),m=l`${l.identifier(u.name)} = ${c}`;return o<i-1?[m,l.raw(", ")]:[m]}))}buildUpdateQuery({table:e,set:t,where:n,returning:s,withList:i}){let a=this.buildWithCTE(i),o=this.buildUpdateSet(e,t),u=s?l` returning ${this.buildSelection(s,{isSingleTable:!0})}`:void 0,c=n?l` where ${n}`:void 0;return l`${a}update ${e} set ${o}${c}${u}`}buildSelection(e,{isSingleTable:t=!1}={}){let n=e.length,s=e.flatMap(({field:i},a)=>{let o=[];if(h(i,_.Aliased)&&i.isSelectionField)o.push(l.identifier(i.fieldAlias));else if(h(i,_.Aliased)||h(i,_)){let u=h(i,_.Aliased)?i.sql:i;t?o.push(new _(u.queryChunks.map(c=>h(c,$)?l.identifier(c.name):c))):o.push(u),h(i,_.Aliased)&&o.push(l` as ${l.identifier(i.fieldAlias)}`)}else h(i,I)&&(t?o.push(l.identifier(i.name)):o.push(i));return a<n-1&&o.push(l`, `),o});return l.join(s)}buildSelectQuery({withList:e,fields:t,fieldsFlat:n,where:s,having:i,table:a,joins:o,orderBy:u,groupBy:c,limit:m,offset:S,lockingClause:E,distinct:V,setOperators:Q}){let G=n??yt(t);for(let L of G)if(h(L.field,I)&&st(L.field.table)!==(h(a,U)?a._.alias:h(a,we)?a[R].name:h(a,_)?void 0:st(a))&&!(F=>o?.some(({alias:ae})=>ae===(F[w.Symbol.IsAlias]?st(F):F[w.Symbol.BaseName])))(L.field.table)){let F=st(L.field.table);throw new Error(`Your "${L.path.join("->")}" field references a column "${F}"."${L.field.name}", but the table "${F}" is not part of the query! Did you forget to join it?`)}let D=!o||o.length===0,K=this.buildWithCTE(e),Z;V&&(Z=V===!0?l` distinct`:l` distinct on (${l.join(V.on,l`, `)})`);let W=this.buildSelection(G,{isSingleTable:D}),M=(()=>{if(h(a,w)&&a[w.Symbol.OriginalName]!==a[w.Symbol.Name]){let L=l`${l.identifier(a[w.Symbol.OriginalName])}`;return a[w.Symbol.Schema]&&(L=l`${l.identifier(a[w.Symbol.Schema])}.${L}`),l`${L} ${l.identifier(a[w.Symbol.Name])}`}return a})(),te=[];if(o)for(let[L,F]of o.entries()){L===0&&te.push(l` `);let ae=F.table,Rt=F.lateral?l` lateral`:void 0;if(h(ae,X)){let Jr=ae[X.Symbol.Name],Dt=ae[X.Symbol.Schema],Lt=ae[X.Symbol.OriginalName],zt=Jr===Lt?void 0:F.alias;te.push(l`${l.raw(F.joinType)} join${Rt} ${Dt?l`${l.identifier(Dt)}.`:void 0}${l.identifier(Lt)}${zt&&l` ${l.identifier(zt)}`} on ${F.on}`)}else if(h(ae,ee)){let Jr=ae[R].name,Dt=ae[R].schema,Lt=ae[R].originalName,zt=Jr===Lt?void 0:F.alias;te.push(l`${l.raw(F.joinType)} join${Rt} ${Dt?l`${l.identifier(Dt)}.`:void 0}${l.identifier(Lt)}${zt&&l` ${l.identifier(zt)}`} on ${F.on}`)}else te.push(l`${l.raw(F.joinType)} join${Rt} ${ae} on ${F.on}`);L<o.length-1&&te.push(l` `)}let Pe=l.join(te),O=s?l` where ${s}`:void 0,j=i?l` having ${i}`:void 0,ge;u&&u.length>0&&(ge=l` order by ${l.join(u,l`, `)}`);let It;c&&c.length>0&&(It=l` group by ${l.join(c,l`, `)}`);let Wr=m?l` limit ${m}`:void 0,qt=S?l` offset ${S}`:void 0,je=l.empty();if(E){let L=l` for ${l.raw(E.strength)}`;E.config.of&&L.append(l` of ${l.join(Array.isArray(E.config.of)?E.config.of:[E.config.of],l`, `)}`),E.config.noWait?L.append(l` no wait`):E.config.skipLocked&&L.append(l` skip locked`),je.append(L)}let lr=l`${K}select${Z} ${W} from ${M}${Pe}${O}${It}${j}${ge}${Wr}${qt}${je}`;return Q.length>0?this.buildSetOperations(lr,Q):lr}buildSetOperations(e,t){let[n,...s]=t;if(!n)throw new Error("Cannot pass undefined values to any set operator");return s.length===0?this.buildSetOperationQuery({leftSelect:e,setOperator:n}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:n}),s)}buildSetOperationQuery({leftSelect:e,setOperator:{type:t,isAll:n,rightSelect:s,limit:i,orderBy:a,offset:o}}){let u=l`(${e.getSQL()}) `,c=l`(${s.getSQL()})`,m;if(a&&a.length>0){let Q=[];for(let G of a)if(h(G,$))Q.push(l.identifier(G.name));else if(h(G,_)){for(let D=0;D<G.queryChunks.length;D++){let K=G.queryChunks[D];h(K,$)&&(G.queryChunks[D]=l.identifier(K.name))}Q.push(l`${G}`)}else Q.push(l`${G}`);m=l` order by ${l.join(Q,l`, `)} `}let S=i?l` limit ${i}`:void 0,E=l.raw(`${t} ${n?"all ":""}`),V=o?l` offset ${o}`:void 0;return l`${u}${E}${c}${m}${S}${V}`}buildInsertQuery({table:e,values:t,onConflict:n,returning:s,withList:i}){let a=[],o=e[w.Symbol.Columns],u=Object.entries(o),c=u.map(([,Q])=>l.identifier(Q.name));for(let[Q,G]of t.entries()){let D=[];for(let[K,Z]of u){let W=G[K];if(W===void 0||h(W,he)&&W.value===void 0)if(Z.defaultFn!==void 0){let M=Z.defaultFn(),te=h(M,_)?M:l.param(M,Z);D.push(te)}else if(!Z.default&&Z.onUpdateFn!==void 0){let M=Z.onUpdateFn(),te=h(M,_)?M:l.param(M,Z);D.push(te)}else D.push(l`default`);else D.push(W)}a.push(D),Q<t.length-1&&a.push(l`, `)}let m=this.buildWithCTE(i),S=l.join(a),E=s?l` returning ${this.buildSelection(s,{isSingleTable:!0})}`:void 0,V=n?l` on conflict ${n}`:void 0;return l`${m}insert into ${e} ${c} values ${S}${V}${E}`}buildRefreshMaterializedViewQuery({view:e,concurrently:t,withNoData:n}){let s=t?l` concurrently`:void 0,i=n?l` with no data`:void 0;return l`refresh materialized view${s} ${e}${i}`}prepareTyping(e){return h(e,ut)||h(e,ct)?"json":h(e,dt)?"decimal":h(e,ft)?"time":h(e,mt)||h(e,ht)?"timestamp":h(e,ot)||h(e,lt)?"date":h(e,pt)?"uuid":"none"}sqlToQuery(e,t){return e.toQuery({escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:t})}buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:n,table:s,tableConfig:i,queryConfig:a,tableAlias:o,nestedQueryRelation:u,joinOn:c}){let m=[],S,E,V=[],Q,G=[];if(a===!0)m=Object.entries(i.columns).map(([Z,W])=>({dbKey:W.name,tsKey:Z,field:ve(W,o),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let K=Object.fromEntries(Object.entries(i.columns).map(([O,j])=>[O,ve(j,o)]));if(a.where){let O=typeof a.where=="function"?a.where(K,gs()):a.where;Q=O&&Ft(O,o)}let Z=[],W=[];if(a.columns){let O=!1;for(let[j,ge]of Object.entries(a.columns))ge!==void 0&&j in i.columns&&(!O&&ge===!0&&(O=!0),W.push(j));W.length>0&&(W=O?W.filter(j=>a.columns?.[j]===!0):Object.keys(i.columns).filter(j=>!W.includes(j)))}else W=Object.keys(i.columns);for(let O of W){let j=i.columns[O];Z.push({tsKey:O,value:j})}let M=[];a.with&&(M=Object.entries(a.with).filter(O=>!!O[1]).map(([O,j])=>({tsKey:O,queryConfig:j,relation:i.relations[O]})));let te;if(a.extras){te=typeof a.extras=="function"?a.extras(K,{sql:l}):a.extras;for(let[O,j]of Object.entries(te))Z.push({tsKey:O,value:mn(j,o)})}for(let{tsKey:O,value:j}of Z)m.push({dbKey:h(j,_.Aliased)?j.fieldAlias:i.columns[O].name,tsKey:O,field:h(j,I)?ve(j,o):j,relationTableTsKey:void 0,isJson:!1,selection:[]});let Pe=typeof a.orderBy=="function"?a.orderBy(K,vs()):a.orderBy??[];Array.isArray(Pe)||(Pe=[Pe]),V=Pe.map(O=>h(O,I)?ve(O,o):Ft(O,o)),S=a.limit,E=a.offset;for(let{tsKey:O,queryConfig:j,relation:ge}of M){let It=_s(t,n,ge),Wr=ge.referencedTable[w.Symbol.Name],qt=n[Wr],je=`${o}_${O}`,lr=Re(...It.fields.map((ae,Rt)=>qe(ve(It.references[Rt],je),ve(ae,o)))),L=this.buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:n,table:e[qt],tableConfig:t[qt],queryConfig:h(ge,Ke)?j===!0?{limit:1}:{...j,limit:1}:j,tableAlias:je,joinOn:lr,nestedQueryRelation:ge}),F=l`${l.identifier(je)}.${l.identifier("data")}`.as(O);G.push({on:l`true`,table:new U(L.sql,{},je),alias:je,joinType:"left",lateral:!0}),m.push({dbKey:O,tsKey:O,field:F,relationTableTsKey:qt,isJson:!0,selection:L.selection})}}if(m.length===0)throw new gt({message:`No fields selected for table "${i.tsName}" ("${o}")`});let D;if(Q=Re(c,Q),u){let K=l`json_build_array(${l.join(m.map(({field:M,tsKey:te,isJson:Pe})=>Pe?l`${l.identifier(`${o}_${te}`)}.${l.identifier("data")}`:h(M,_.Aliased)?M.sql:M),l`, `)})`;h(u,Jt)&&(K=l`coalesce(json_agg(${K}${V.length>0?l` order by ${l.join(V,l`, `)}`:void 0}), '[]'::json)`);let Z=[{dbKey:"data",tsKey:"data",field:K.as("data"),isJson:!0,relationTableTsKey:i.tsName,selection:m}];S!==void 0||E!==void 0||V.length>0?(D=this.buildSelectQuery({table:Kt(s,o),fields:{},fieldsFlat:[{path:[],field:l.raw("*")}],where:Q,limit:S,offset:E,orderBy:V,setOperators:[]}),Q=void 0,S=void 0,E=void 0,V=[]):D=Kt(s,o),D=this.buildSelectQuery({table:h(D,X)?D:new U(D,{},o),fields:{},fieldsFlat:Z.map(({field:M})=>({path:[],field:h(M,I)?ve(M,o):M})),joins:G,where:Q,limit:S,offset:E,orderBy:V,setOperators:[]})}else D=this.buildSelectQuery({table:Kt(s,o),fields:{},fieldsFlat:m.map(({field:K})=>({path:[],field:h(K,I)?ve(K,o):K})),joins:G,where:Q,limit:S,offset:E,orderBy:V,setOperators:[]});return{tableTsKey:i.tsName,sql:D,selection:m}}};ta=d,f(Ht,ta,"PgDialect");var ra,Cn=class{config;constructor(e){this.config={...e}}get(e,t){if(t==="_")return{...e._,selectedFields:new Proxy(e._.selectedFields,this)};if(t===R)return{...e[R],selectedFields:new Proxy(e[R].selectedFields,this)};if(typeof t=="symbol")return e[t];let s=(h(e,U)?e._.selectedFields:h(e,ee)?e[R].selectedFields:e)[t];if(h(s,_.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!s.isSelectionField)return s.sql;let i=s.clone();return i.isSelectionField=!0,i}if(h(s,_)){if(this.config.sqlBehavior==="sql")return s;throw new Error(`You tried to reference "${t}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return h(s,I)?this.config.alias?new Proxy(s,new Ae(new Proxy(s.table,new Qe(this.config.alias,this.config.replaceOriginalName??!1)))):s:typeof s!="object"||s===null?s:new Proxy(s,new Cn(this.config))}},B=Cn;ra=d,f(B,ra,"SelectionProxyHandler");var na,Yt=class{getSelectedFields(){return this._.selectedFields}};na=d,f(Yt,na,"TypedQueryBuilder");var da,be=class{fields;session;dialect;withList=[];distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}from(e){let t=!!this.fields,n;return this.fields?n=this.fields:h(e,U)?n=Object.fromEntries(Object.keys(e._.selectedFields).map(s=>[s,e[s]])):h(e,we)?n=e[R].selectedFields:h(e,_)?n={}:n=Zt(e),new Gt({table:e,fields:n,isPartialSelect:t,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct})}};da=d,f(be,da,"PgSelectBuilder");var fa,Ir=class extends Yt{_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;constructor({table:e,fields:t,isPartialSelect:n,session:s,dialect:i,withList:a,distinct:o}){super(),this.config={withList:a,table:e,fields:{...t},distinct:o,setOperators:[]},this.isPartialSelect=n,this.session=s,this.dialect=i,this._={selectedFields:t},this.tableName=bn(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}createJoin(e){return(t,n)=>{let s=this.tableName,i=bn(t);if(typeof i=="string"&&this.config.joins?.some(a=>a.alias===i))throw new Error(`Alias "${i}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof s=="string"&&(this.config.fields={[s]:this.config.fields}),typeof i=="string"&&!h(t,_))){let a=h(t,U)?t._.selectedFields:h(t,ee)?t[R].selectedFields:t[w.Symbol.Columns];this.config.fields[i]=a}if(typeof n=="function"&&(n=n(new Proxy(this.config.fields,new B({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:n,table:t,joinType:e,alias:i}),typeof i=="string")switch(e){case"left":{this.joinsNotNullableMap[i]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[i]=!0;break}case"inner":{this.joinsNotNullableMap[i]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[i]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");createSetOperator(e,t){return n=>{let s=typeof n=="function"?n(sa()):n;if(!wn(this.getSelectedFields(),s.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:t,rightSelect:s}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new B({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new B({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if(typeof e[0]=="function"){let t=e[0](new Proxy(this.config.fields,new B({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(t)?t:[t]}else this.config.groupBy=e;return this}orderBy(...e){if(typeof e[0]=="function"){let t=e[0](new Proxy(this.config.fields,new B({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),n=Array.isArray(t)?t:[t];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=n:this.config.orderBy=n}else{let t=e;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=t:this.config.orderBy=t}return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}for(e,t={}){return this.config.lockingClause={strength:e,config:t},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}as(e){return new Proxy(new U(this.getSQL(),this.config.fields,e),new B({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new B({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}};fa=d,f(Ir,fa,"PgSelectQueryBuilder");var ma,Gt=class extends Ir{_prepare(e){let{session:t,config:n,dialect:s,joinsNotNullableMap:i}=this;if(!t)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");return Qt.startActiveSpan("drizzle.prepareQuery",()=>{let a=yt(n.fields),o=t.prepareQuery(s.sqlToQuery(this.getSQL()),a,e,!0);return o.joinsNotNullableMap=i,o})}prepare(e){return this._prepare(e)}execute=e=>Qt.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e))};ma=d,f(Gt,ma,"PgSelect");Hn(Gt,[Ut]);function vt(r,e){return(t,n,...s)=>{let i=[n,...s].map(a=>({type:r,isAll:e,rightSelect:a}));for(let a of i)if(!wn(t.getSelectedFields(),a.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return t.addSetOperators(i)}}var sa=()=>({union:ia,unionAll:aa,intersect:oa,intersectAll:la,except:ca,exceptAll:ua}),ia=vt("union",!1),aa=vt("union",!0),oa=vt("intersect",!1),la=vt("intersect",!0),ca=vt("except",!1),ua=vt("except",!0);var ha,_t=class{dialect;$with(e){let t=this;return{as(n){return typeof n=="function"&&(n=n(t)),new Proxy(new Bt(n.getSQL(),n.getSelectedFields(),e,!0),new B({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}}}with(...e){let t=this;function n(a){return new be({fields:a??void 0,session:void 0,dialect:t.getDialect(),withList:e})}function s(a){return new be({fields:a??void 0,session:void 0,dialect:t.getDialect(),distinct:!0})}function i(a,o){return new be({fields:o??void 0,session:void 0,dialect:t.getDialect(),distinct:{on:a}})}return{select:n,selectDistinct:s,selectDistinctOn:i}}select(e){return new be({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new be({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(e,t){return new be({fields:t??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:e}})}getDialect(){return this.dialect||(this.dialect=new Ht),this.dialect}};ha=d,f(_t,ha,"PgQueryBuilder");var pa,qr=class{constructor(e,t){this.unique=e,this.name=t}on(...e){return new wt(e.map(t=>{if(h(t,_))return t;t=t;let n=new Me(t.name,t.columnType,t.indexConfig);return t.indexConfig=JSON.parse(JSON.stringify(t.defaultConfig)),n}),this.unique,!1,this.name)}onOnly(...e){return new wt(e.map(t=>{if(h(t,_))return t;t=t;let n=new Me(t.name,t.columnType,t.indexConfig);return t.indexConfig=t.defaultConfig,n}),this.unique,!0,this.name)}using(e,...t){return new wt(t.map(n=>{if(h(n,_))return n;n=n;let s=new Me(n.name,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),s}),this.unique,!0,this.name,e)}};pa=d,f(qr,pa,"PgIndexBuilderOn");var ya,wt=class{config;constructor(e,t,n,s,i="btree"){this.config={name:s,columns:e,unique:t,only:n,method:i}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new Rr(this.config,e)}};ya=d,f(wt,ya,"PgIndexBuilder");var ga,Rr=class{config;constructor(e,t){this.config={...e,table:t}}};ga=d,f(Rr,ga,"PgIndex");function xe(r){return new qr(!1,r)}var $n=Symbol.for("drizzle:PgViewConfig");var va,Xt=class{constructor(e,t){this.name=e,this.schema=t}config={};with(e){return this.config.with=e,this}};va=d,f(Xt,va,"PgDefaultViewBuilderCore");var _a,Dr=class extends Xt{as(e){typeof e=="function"&&(e=e(new _t));let t=new B({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}),n=new Proxy(e.getSelectedFields(),t);return new Proxy(new bt({pgConfig:this.config,config:{name:this.name,schema:this.schema,selectedFields:n,query:e.getSQL().inlineParams()}}),t)}};_a=d,f(Dr,_a,"PgViewBuilder");var wa,Lr=class extends Xt{columns;constructor(e,t,n){super(e,n),this.columns=Zt(tn(e,t))}existing(){return new Proxy(new bt({pgConfig:void 0,config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:void 0}}),new B({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}as(e){return new Proxy(new bt({pgConfig:this.config,config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:e.inlineParams()}}),new B({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}};wa=d,f(Lr,wa,"PgManualViewBuilder");var ba,er=class{constructor(e,t){this.name=e,this.schema=t}config={};using(e){return this.config.using=e,this}with(e){return this.config.with=e,this}tablespace(e){return this.config.tablespace=e,this}withNoData(){return this.config.withNoData=!0,this}};ba=d,f(er,ba,"PgMaterializedViewBuilderCore");var xa,zr=class extends er{as(e){typeof e=="function"&&(e=e(new _t));let t=new B({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}),n=new Proxy(e.getSelectedFields(),t);return new Proxy(new xt({pgConfig:{with:this.config.with,using:this.config.using,tablespace:this.config.tablespace,withNoData:this.config.withNoData},config:{name:this.name,schema:this.schema,selectedFields:n,query:e.getSQL().inlineParams()}}),t)}};xa=d,f(zr,xa,"PgMaterializedViewBuilder");var Sa,Vr=class extends er{columns;constructor(e,t,n){super(e,n),this.columns=Zt(tn(e,t))}existing(){return new Proxy(new xt({pgConfig:void 0,config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:void 0}}),new B({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}as(e){return new Proxy(new xt({pgConfig:void 0,config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:e.inlineParams()}}),new B({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}};Sa=d,f(Vr,Sa,"PgManualMaterializedViewBuilder");var Ta,bt=class extends we{[(Ta=d,$n)];constructor({pgConfig:e,config:t}){super(t),e&&(this[$n]={with:e.with})}};f(bt,Ta,"PgView");var ws=Symbol.for("drizzle:PgMaterializedViewConfig"),Na,xt=class extends we{[(Na=d,ws)];constructor({pgConfig:e,config:t}){super(t),this[ws]={with:e?.with,using:e?.using,tablespace:e?.tablespace,withNoData:e?.withNoData}}};f(xt,Na,"PgMaterializedView");function bs(r,e,t){return e?new Lr(r,e,t):new Dr(r,t)}function xs(r,e,t){return e?new Vr(r,e,t):new zr(r,t)}var Ca,Mr=class{constructor(e){this.schemaName=e}table=(e,t,n)=>en(e,t,n,this.schemaName);view=(e,t)=>bs(e,t,this.schemaName);materializedView=(e,t)=>xs(e,t,this.schemaName);enum=(e,t)=>Fn(e,t,this.schemaName)};Ca=d,f(Mr,Ca,"PgSchema");function ue(r){if(r==="public")throw new Error("You can't specify 'public' as schema name. Postgres is using public schema by default. If you want to use 'public' schema, just use pgTable() instead of creating a schema");return new Mr(r)}var St=ue(process.env.SCHEMA_POSTGRES||"").table("post_estate",{id:H("id").default(l`gen_random_uuid()`).primaryKey(),title:C("title",{length:255}).notNull(),slug:C("slug",{length:255}).notNull(),code:C("code",{length:255}).notNull(),address:C("title",{length:255}),street:C("street",{length:255}),lat:Ie("lat").default(0),lang:Ie("lang").default(0),type:P("type").notNull().default(0),youtubeUrl:_e("youtube_url"),point:Ie("point").notNull(),provinceCode:P("province_code").notNull(),districtCode:P("district_code").notNull(),wardCode:P("ward_code").notNull(),customerId:H("customer_id").notNull(),noteVerified:_e("note_verified"),isBlock:P("is_block").notNull().default(0),isDelete:P("is_delete").notNull().default(0),isOwner:P("is_owner").notNull().default(0),createdBy:C("created_by",{length:255}),createdAt:J("created_at").notNull().default(l`now()`),modifyBy:C("modify_by",{length:255}),modifyAt:J("modify_at").notNull().default(l`now()`).$onUpdate(()=>new Date)},r=>({idxPostEstateNameSlugId:xe("post_estate_name_slug_id_idx").on(r.title,r.slug,r.id)}));var Vd=ue(process.env.SCHEMA_POSTGRES||"").table("images",{id:H("id").default(l`gen_random_uuid()`).primaryKey(),link:C("link",{length:255}).notNull(),type:P("type").notNull().default(0),position:P("position").default(0),isAvatar:P("is_avatar").notNull().default(0),description:C("description",{length:255}),isUsed:P("is_used").default(0),postEstateId:H("post_estate_id").references(()=>St.id,{onDelete:"cascade",onUpdate:"cascade"}),isConfirmUpdate:P("is_confirm_update").notNull().default(0),createdBy:C("created_by",{length:255}),createdAt:J("created_at").notNull().default(l`now()`),modifyBy:C("modify_by",{length:255}),modifyAt:J("modify_at").notNull().default(l`now()`).$onUpdate(()=>new Date)},r=>({idxNameId:xe("image_link_id_idx").on(r.link,r.id)}));var Br=ue("bds_products").table("common_land",{id:H("id").default(l`gen_random_uuid()`).primaryKey(),name:C("name",{length:255}).notNull(),code:C("code",{length:255}).notNull(),slug:C("slug",{length:255}).notNull(),content:_e("content"),provinceCode:P("province_code").notNull(),districtCode:P("district_code").notNull(),wardCode:P("ward_code").notNull(),status:P("status").default(1),createdBy:C("created_by",{length:255}),createdAt:J("created_at").notNull().default(l`now()`),modifyBy:C("modify_by",{length:255}),modifyAt:J("modify_at").notNull().default(l`now()`).$onUpdate(()=>new Date)},r=>({idxCommonLandNameSlugId:xe("common_land_name_slug_id_idx").on(r.name,r.slug,r.id)}));var Wd=ue(process.env.SCHEMA_POSTGRES||"").table("post_estate_detail",{id:H("id").default(l`gen_random_uuid()`).primaryKey(),postEstateId:H("post_estate_id").references(()=>St.id,{onDelete:"cascade"}),content:_e("content"),acreage:Ie("acreage"),facade:Ie("facade"),numWayIn:Ie("num_way_in"),price:vn("price"),unit:P("unit").notNull().default(0),priceSquareMetre:vn("price_square_metre"),directionHouse:C("direction_house",{length:100}),directionBalcony:C("direction_balcony",{length:100}),numBedroom:P("num_bedroom"),numRoadHouse:P("num_road_House"),numFloors:P("num_floors"),numBathroom:P("num_bathroom"),furniture:C("furniture",{length:255}),houseOwningDocument:_e("house_owning_document"),contactName:C("contact_name",{length:255}),contactPhone:C("contact_phone",{length:255}),contactMail:C("contact_mail",{length:100}),createdBy:C("created_by",{length:255}),createdAt:J("created_at").notNull().default(l`now()`),modifyBy:C("modify_by",{length:255}),modifyAt:J("modify_at").notNull().default(l`now()`).$onUpdate(()=>new Date)},r=>({}));var Gd=ue(process.env.SCHEMA_POSTGRES||"").table("post_estate_report",{id:H("id").default(l`gen_random_uuid()`).primaryKey(),description:C("description",{length:255}).notNull(),postEstateId:H("post_estate_id").notNull(),customerId:H("customer_id"),contactName:C("contact_name",{length:50}),contactPhone:C("contact_phone",{length:20}),contactMail:C("contact_mail",{length:50}),isConfirmed:P("is_confirmed").notNull().default(0),createdBy:C("created_by",{length:255}),createdAt:J("created_at").notNull().default(l`now()`),modifyBy:C("modify_by",{length:255}),modifyAt:J("modify_at").notNull().default(l`now()`).$onUpdate(()=>new Date)},r=>({idxPostEstateReportNameId:xe("post_estate_report_name_id_idx").on(r.contactName,r.id)}));var sf=ue(process.env.SCHEMA_POSTGRES||"").table("post_estate_history",{id:H("id").default(l`gen_random_uuid()`).primaryKey(),postEstateId:H("post_estate_id").notNull().references(()=>St.id,{onDelete:"cascade",onUpdate:"cascade"}),note:_e("node"),createdBy:C("created_by",{length:255}),createdAt:J("created_at").notNull().default(l`now()`),modifyBy:C("modify_by",{length:255}),modifyAt:J("modify_at").notNull().default(l`now()`).$onUpdate(()=>new Date)},r=>({idxPostEstateHistoryId:xe("post_estate_history_id_idx").on(r.postEstateId,r.id)}));var Qr=class{constructor(e){this.db=e}transformArrayToObject(e){return Array.isArray(e)?e?.[0]??null:e||null}async insert(e,t){let n=await this.db.insert(e).values({...t}).returning();return this.transformArrayToObject(n)}async insertMany(e,t){return await this.db.insert(e).values([...t]).returning(),!0}async update(e,t){let n=await this.db.update(e).set({...t}).returning();return this.transformArrayToObject(n)}async updateMany(e,t){for(let n of t)await this.update(e,n);return!0}async deleteById(e,t){let s=Array.isArray(t)?Ar(e.id,t):qe(e.id,t);return await this.db.delete(e).where(s),!0}async deleteByKey(e,t){let n=[];for(let s in t)t[s]!==void 0&&t[s]!==null&&n.push(qe(e[s],t[s]));return await this.db.delete(e).where(Re(l.join(n))),!0}async findByKey(e,t){let n=[];for(let i in t)t[i]!==void 0&&t[i]!==null&&n.push(qe(e[i],t[i]));let s=await this.db.select().from(e).where(Re(l.join(n))).limit(1);return this.transformArrayToObject(s)}async pagination(e,t,n){let s=e.as("sub"),a=await this.db.select({total:l`count(*)`}).from(s).execute(),o=Number(a[0].total),u=Math.ceil(o/n),c=(t-1)*n;return e.limit(n).offset(c),{data:await e.execute(),pagination:{totalRecords:o,totalPages:u,currentPage:t,limit:n}}}};var Ss=Object.freeze({BAD_REQUEST:"Bad request",SUCCESS:"Success",SERVER_INTERNAL:"Server internal",NOT_FOUND:"Server not found",ACCESS_DENIED:"Access denied"});var Tt=class extends Error{constructor(e){super(Ss.BAD_REQUEST),this.stack=e,Object.setPrototypeOf(this,Tt.prototype)}};var Kr=class extends Qr{constructor(t){super(t.db);this.app=t}async create(t){try{let n=ur.convertStringToSlug({text:t.name}),s=await this.validate(t.name,t.code);if(s.length>0)throw new Tt(s);let a={code:t.code,name:t.name,provinceCode:t.provinceCode,districtCode:t.districtCode,wardCode:t.wardCode,slug:n};return await this.insert(Br,a)}catch(n){throw n}}async delete(t){}async validate(t,n){let s=[],[i,a]=await Promise.allSettled([await this.findByKey(Br,{name:t}),await this.findByKey(Br,{code:n})]);return i!==null&&s.push({code:"INVALID",field:"name",message:"Invalid name"}),a!==null&&s.push({code:"INVALID",field:"code",message:"Invalid code"}),s}};var rr,tr=class{constructor(e){this.app=e;qn(this,rr,void 0);this.create=async(e,t)=>{let n=e.body,s=await In(this,rr).create({code:n.code,name:n.name,provinceCode:n.province_code,districtCode:n.district_code,wardCode:n.ward_code});t.send(s)};this.app=e,Rn(this,rr,new Kr(this.app))}};rr=new WeakMap;var k;(function(r){r.assertEqual=s=>s;function e(s){}r.assertIs=e;function t(s){throw new Error}r.assertNever=t,r.arrayToEnum=s=>{let i={};for(let a of s)i[a]=a;return i},r.getValidEnumValues=s=>{let i=r.objectKeys(s).filter(o=>typeof s[s[o]]!="number"),a={};for(let o of i)a[o]=s[o];return r.objectValues(a)},r.objectValues=s=>r.objectKeys(s).map(function(i){return s[i]}),r.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let i=[];for(let a in s)Object.prototype.hasOwnProperty.call(s,a)&&i.push(a);return i},r.find=(s,i)=>{for(let a of s)if(i(a))return a},r.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}r.joinValues=n,r.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(k||(k={}));var On;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(On||(On={}));var g=k.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),De=r=>{switch(typeof r){case"undefined":return g.undefined;case"string":return g.string;case"number":return isNaN(r)?g.nan:g.number;case"boolean":return g.boolean;case"function":return g.function;case"bigint":return g.bigint;case"symbol":return g.symbol;case"object":return Array.isArray(r)?g.array:r===null?g.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?g.promise:typeof Map<"u"&&r instanceof Map?g.map:typeof Set<"u"&&r instanceof Set?g.set:typeof Date<"u"&&r instanceof Date?g.date:g.object;default:return g.unknown}},p=k.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),$a=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:"),re=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let t=e||function(i){return i.message},n={_errors:[]},s=i=>{for(let a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)n._errors.push(t(a));else{let o=n,u=0;for(;u<a.path.length;){let c=a.path[u];u===a.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(t(a))):o[c]=o[c]||{_errors:[]},o=o[c],u++}}};return s(this),n}static assert(e){if(!(e instanceof re))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,k.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){let t={},n=[];for(let s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}};re.create=r=>new re(r);var $t=(r,e)=>{let t;switch(r.code){case p.invalid_type:r.received===g.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case p.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,k.jsonStringifyReplacer)}`;break;case p.unrecognized_keys:t=`Unrecognized key(s) in object: ${k.joinValues(r.keys,", ")}`;break;case p.invalid_union:t="Invalid input";break;case p.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${k.joinValues(r.options)}`;break;case p.invalid_enum_value:t=`Invalid enum value. Expected ${k.joinValues(r.options)}, received '${r.received}'`;break;case p.invalid_arguments:t="Invalid function arguments";break;case p.invalid_return_type:t="Invalid function return type";break;case p.invalid_date:t="Invalid date";break;case p.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:k.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case p.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case p.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case p.custom:t="Invalid input";break;case p.invalid_intersection_types:t="Intersection results could not be merged";break;case p.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case p.not_finite:t="Number must be finite";break;default:t=e.defaultError,k.assertNever(r)}return{message:t}},Cs=$t;function ka(r){Cs=r}function Fr(){return Cs}var Ur=r=>{let{data:e,path:t,errorMaps:n,issueData:s}=r,i=[...t,...s.path||[]],a={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let o="",u=n.filter(c=>!!c).slice().reverse();for(let c of u)o=c(a,{data:e,defaultError:o}).message;return{...s,path:i,message:o}},Oa=[];function y(r,e){let t=Fr(),n=Ur({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===$t?void 0:$t].filter(s=>!!s)});r.common.issues.push(n)}var Y=class{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){let n=[];for(let s of t){if(s.status==="aborted")return x;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){let n=[];for(let s of t){let i=await s.key,a=await s.value;n.push({key:i,value:a})}return Y.mergeObjectSync(e,n)}static mergeObjectSync(e,t){let n={};for(let s of t){let{key:i,value:a}=s;if(i.status==="aborted"||a.status==="aborted")return x;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(n[i.value]=a.value)}return{status:e.value,value:n}}},x=Object.freeze({status:"aborted"}),Ct=r=>({status:"dirty",value:r}),ne=r=>({status:"valid",value:r}),En=r=>r.status==="aborted",Pn=r=>r.status==="dirty",ir=r=>r.status==="valid",ar=r=>typeof Promise<"u"&&r instanceof Promise;function Zr(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function $s(r,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,t):s?s.value=t:e.set(r,t),t}var v;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e?.message})(v||(v={}));var nr,sr,fe=class{constructor(e,t,n,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Ts=(r,e)=>{if(ir(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new re(r.common.issues);return this._error=t,this._error}}};function T(r){if(!r)return{};let{errorMap:e,invalid_type_error:t,required_error:n,description:s}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,o)=>{var u,c;let{message:m}=r;return a.code==="invalid_enum_value"?{message:m??o.defaultError}:typeof o.data>"u"?{message:(u=m??n)!==null&&u!==void 0?u:o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:(c=m??t)!==null&&c!==void 0?c:o.defaultError}},description:s}}var N=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return De(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:De(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Y,ctx:{common:e.parent.common,data:e.data,parsedType:De(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(ar(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;let s={common:{issues:[],async:(n=t?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:De(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Ts(s,i)}async parseAsync(e,t){let n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){let n={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:De(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(ar(s)?s:Promise.resolve(s));return Ts(n,i)}refine(e,t){let n=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{let a=e(s),o=()=>i.addIssue({code:p.custom,...n(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(u=>u?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,t){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof t=="function"?t(n,s):t),!1))}_refinement(e){return new ce({schema:this,typeName:b.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return de.create(this,this._def)}nullable(){return Ce.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return le.create(this,this._def)}promise(){return Ve.create(this,this._def)}or(e){return We.create([this,e],this._def)}and(e){return Je.create(this,e,this._def)}transform(e){return new ce({...T(this._def),schema:this,typeName:b.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t=typeof e=="function"?e:()=>e;return new et({...T(this._def),innerType:this,defaultValue:t,typeName:b.ZodDefault})}brand(){return new or({typeName:b.ZodBranded,type:this,...T(this._def)})}catch(e){let t=typeof e=="function"?e:()=>e;return new tt({...T(this._def),innerType:this,catchValue:t,typeName:b.ZodCatch})}describe(e){let t=this.constructor;return new t({...this._def,description:e})}pipe(e){return rt.create(this,e)}readonly(){return nt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Ea=/^c[^\s-]{8,}$/i,Pa=/^[0-9a-z]+$/,ja=/^[0-9A-HJKMNP-TV-Z]{26}$/,Aa=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ia=/^[a-z0-9_-]{21}$/i,qa=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Ra=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Da="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",kn,La=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,za=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Va=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ks="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Ma=new RegExp(`^${ks}$`);function Os(r){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Ba(r){return new RegExp(`^${Os(r)}$`)}function Es(r){let e=`${ks}T${Os(r)}`,t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Qa(r,e){return!!((e==="v4"||!e)&&La.test(r)||(e==="v6"||!e)&&za.test(r))}var oe=class extends N{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==g.string){let i=this._getOrReturnCtx(e);return y(i,{code:p.invalid_type,expected:g.string,received:i.parsedType}),x}let n=new Y,s;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),y(s,{code:p.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),y(s,{code:p.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){let a=e.data.length>i.value,o=e.data.length<i.value;(a||o)&&(s=this._getOrReturnCtx(e,s),a?y(s,{code:p.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&y(s,{code:p.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")Ra.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"email",code:p.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")kn||(kn=new RegExp(Da,"u")),kn.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"emoji",code:p.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")Aa.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"uuid",code:p.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")Ia.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"nanoid",code:p.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")Ea.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"cuid",code:p.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")Pa.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"cuid2",code:p.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")ja.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"ulid",code:p.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),y(s,{validation:"url",code:p.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"regex",code:p.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),y(s,{code:p.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),y(s,{code:p.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),y(s,{code:p.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?Es(i).test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{code:p.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?Ma.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{code:p.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?Ba(i).test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{code:p.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?qa.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"duration",code:p.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?Qa(e.data,i.version)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"ip",code:p.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?Va.test(e.data)||(s=this._getOrReturnCtx(e,s),y(s,{validation:"base64",code:p.invalid_string,message:i.message}),n.dirty()):k.assertNever(i);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(s=>e.test(s),{validation:t,code:p.invalid_string,...v.errToObj(n)})}_addCheck(e){return new oe({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...v.errToObj(e)})}url(e){return this._addCheck({kind:"url",...v.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...v.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...v.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...v.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...v.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...v.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...v.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...v.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...v.errToObj(e)})}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...v.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...v.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...v.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...v.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...v.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...v.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...v.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...v.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...v.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...v.errToObj(t)})}nonempty(e){return this.min(1,v.errToObj(e))}trim(){return new oe({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new oe({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new oe({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};oe.create=r=>{var e;return new oe({checks:[],typeName:b.ZodString,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...T(r)})};function Ka(r,e){let t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=t>n?t:n,i=parseInt(r.toFixed(s).replace(".","")),a=parseInt(e.toFixed(s).replace(".",""));return i%a/Math.pow(10,s)}var Se=class extends N{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==g.number){let i=this._getOrReturnCtx(e);return y(i,{code:p.invalid_type,expected:g.number,received:i.parsedType}),x}let n,s=new Y;for(let i of this._def.checks)i.kind==="int"?k.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),y(n,{code:p.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),y(n,{code:p.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),y(n,{code:p.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Ka(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),y(n,{code:p.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),y(n,{code:p.not_finite,message:i.message}),s.dirty()):k.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,v.toString(t))}gt(e,t){return this.setLimit("min",e,!1,v.toString(t))}lte(e,t){return this.setLimit("max",e,!0,v.toString(t))}lt(e,t){return this.setLimit("max",e,!1,v.toString(t))}setLimit(e,t,n,s){return new Se({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:v.toString(s)}]})}_addCheck(e){return new Se({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:v.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:v.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:v.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:v.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:v.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:v.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:v.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:v.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:v.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&k.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}};Se.create=r=>new Se({checks:[],typeName:b.ZodNumber,coerce:r?.coerce||!1,...T(r)});var Te=class extends N{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==g.bigint){let i=this._getOrReturnCtx(e);return y(i,{code:p.invalid_type,expected:g.bigint,received:i.parsedType}),x}let n,s=new Y;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),y(n,{code:p.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),y(n,{code:p.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),y(n,{code:p.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):k.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,v.toString(t))}gt(e,t){return this.setLimit("min",e,!1,v.toString(t))}lte(e,t){return this.setLimit("max",e,!0,v.toString(t))}lt(e,t){return this.setLimit("max",e,!1,v.toString(t))}setLimit(e,t,n,s){return new Te({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:v.toString(s)}]})}_addCheck(e){return new Te({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:v.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:v.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:v.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:v.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:v.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};Te.create=r=>{var e;return new Te({checks:[],typeName:b.ZodBigInt,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...T(r)})};var Fe=class extends N{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==g.boolean){let n=this._getOrReturnCtx(e);return y(n,{code:p.invalid_type,expected:g.boolean,received:n.parsedType}),x}return ne(e.data)}};Fe.create=r=>new Fe({typeName:b.ZodBoolean,coerce:r?.coerce||!1,...T(r)});var Oe=class extends N{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==g.date){let i=this._getOrReturnCtx(e);return y(i,{code:p.invalid_type,expected:g.date,received:i.parsedType}),x}if(isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return y(i,{code:p.invalid_date}),x}let n=new Y,s;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),y(s,{code:p.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),y(s,{code:p.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):k.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Oe({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:v.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:v.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}};Oe.create=r=>new Oe({checks:[],coerce:r?.coerce||!1,typeName:b.ZodDate,...T(r)});var kt=class extends N{_parse(e){if(this._getType(e)!==g.symbol){let n=this._getOrReturnCtx(e);return y(n,{code:p.invalid_type,expected:g.symbol,received:n.parsedType}),x}return ne(e.data)}};kt.create=r=>new kt({typeName:b.ZodSymbol,...T(r)});var Ue=class extends N{_parse(e){if(this._getType(e)!==g.undefined){let n=this._getOrReturnCtx(e);return y(n,{code:p.invalid_type,expected:g.undefined,received:n.parsedType}),x}return ne(e.data)}};Ue.create=r=>new Ue({typeName:b.ZodUndefined,...T(r)});var Ze=class extends N{_parse(e){if(this._getType(e)!==g.null){let n=this._getOrReturnCtx(e);return y(n,{code:p.invalid_type,expected:g.null,received:n.parsedType}),x}return ne(e.data)}};Ze.create=r=>new Ze({typeName:b.ZodNull,...T(r)});var ze=class extends N{constructor(){super(...arguments),this._any=!0}_parse(e){return ne(e.data)}};ze.create=r=>new ze({typeName:b.ZodAny,...T(r)});var ke=class extends N{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ne(e.data)}};ke.create=r=>new ke({typeName:b.ZodUnknown,...T(r)});var ye=class extends N{_parse(e){let t=this._getOrReturnCtx(e);return y(t,{code:p.invalid_type,expected:g.never,received:t.parsedType}),x}};ye.create=r=>new ye({typeName:b.ZodNever,...T(r)});var Ot=class extends N{_parse(e){if(this._getType(e)!==g.undefined){let n=this._getOrReturnCtx(e);return y(n,{code:p.invalid_type,expected:g.void,received:n.parsedType}),x}return ne(e.data)}};Ot.create=r=>new Ot({typeName:b.ZodVoid,...T(r)});var le=class extends N{_parse(e){let{ctx:t,status:n}=this._processInputParams(e),s=this._def;if(t.parsedType!==g.array)return y(t,{code:p.invalid_type,expected:g.array,received:t.parsedType}),x;if(s.exactLength!==null){let a=t.data.length>s.exactLength.value,o=t.data.length<s.exactLength.value;(a||o)&&(y(t,{code:a?p.too_big:p.too_small,minimum:o?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(y(t,{code:p.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(y(t,{code:p.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((a,o)=>s.type._parseAsync(new fe(t,a,t.path,o)))).then(a=>Y.mergeArray(n,a));let i=[...t.data].map((a,o)=>s.type._parseSync(new fe(t,a,t.path,o)));return Y.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new le({...this._def,minLength:{value:e,message:v.toString(t)}})}max(e,t){return new le({...this._def,maxLength:{value:e,message:v.toString(t)}})}length(e,t){return new le({...this._def,exactLength:{value:e,message:v.toString(t)}})}nonempty(e){return this.min(1,e)}};le.create=(r,e)=>new le({type:r,minLength:null,maxLength:null,exactLength:null,typeName:b.ZodArray,...T(e)});function Nt(r){if(r instanceof A){let e={};for(let t in r.shape){let n=r.shape[t];e[t]=de.create(Nt(n))}return new A({...r._def,shape:()=>e})}else return r instanceof le?new le({...r._def,type:Nt(r.element)}):r instanceof de?de.create(Nt(r.unwrap())):r instanceof Ce?Ce.create(Nt(r.unwrap())):r instanceof me?me.create(r.items.map(e=>Nt(e))):r}var A=class extends N{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),t=k.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==g.object){let c=this._getOrReturnCtx(e);return y(c,{code:p.invalid_type,expected:g.object,received:c.parsedType}),x}let{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof ye&&this._def.unknownKeys==="strip"))for(let c in s.data)a.includes(c)||o.push(c);let u=[];for(let c of a){let m=i[c],S=s.data[c];u.push({key:{status:"valid",value:c},value:m._parse(new fe(s,S,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof ye){let c=this._def.unknownKeys;if(c==="passthrough")for(let m of o)u.push({key:{status:"valid",value:m},value:{status:"valid",value:s.data[m]}});else if(c==="strict")o.length>0&&(y(s,{code:p.unrecognized_keys,keys:o}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let c=this._def.catchall;for(let m of o){let S=s.data[m];u.push({key:{status:"valid",value:m},value:c._parse(new fe(s,S,s.path,m)),alwaysSet:m in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let c=[];for(let m of u){let S=await m.key,E=await m.value;c.push({key:S,value:E,alwaysSet:m.alwaysSet})}return c}).then(c=>Y.mergeObjectSync(n,c)):Y.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return v.errToObj,new A({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var s,i,a,o;let u=(a=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,t,n).message)!==null&&a!==void 0?a:n.defaultError;return t.code==="unrecognized_keys"?{message:(o=v.errToObj(e).message)!==null&&o!==void 0?o:u}:{message:u}}}:{}})}strip(){return new A({...this._def,unknownKeys:"strip"})}passthrough(){return new A({...this._def,unknownKeys:"passthrough"})}extend(e){return new A({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new A({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:b.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new A({...this._def,catchall:e})}pick(e){let t={};return k.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new A({...this._def,shape:()=>t})}omit(e){let t={};return k.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new A({...this._def,shape:()=>t})}deepPartial(){return Nt(this)}partial(e){let t={};return k.objectKeys(this.shape).forEach(n=>{let s=this.shape[n];e&&!e[n]?t[n]=s:t[n]=s.optional()}),new A({...this._def,shape:()=>t})}required(e){let t={};return k.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof de;)i=i._def.innerType;t[n]=i}}),new A({...this._def,shape:()=>t})}keyof(){return Ps(k.objectKeys(this.shape))}};A.create=(r,e)=>new A({shape:()=>r,unknownKeys:"strip",catchall:ye.create(),typeName:b.ZodObject,...T(e)});A.strictCreate=(r,e)=>new A({shape:()=>r,unknownKeys:"strict",catchall:ye.create(),typeName:b.ZodObject,...T(e)});A.lazycreate=(r,e)=>new A({shape:r,unknownKeys:"strip",catchall:ye.create(),typeName:b.ZodObject,...T(e)});var We=class extends N{_parse(e){let{ctx:t}=this._processInputParams(e),n=this._def.options;function s(i){for(let o of i)if(o.result.status==="valid")return o.result;for(let o of i)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;let a=i.map(o=>new re(o.ctx.common.issues));return y(t,{code:p.invalid_union,unionErrors:a}),x}if(t.common.async)return Promise.all(n.map(async i=>{let a={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(s);{let i,a=[];for(let u of n){let c={...t,common:{...t.common,issues:[]},parent:null},m=u._parseSync({data:t.data,path:t.path,parent:c});if(m.status==="valid")return m;m.status==="dirty"&&!i&&(i={result:m,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;let o=a.map(u=>new re(u));return y(t,{code:p.invalid_union,unionErrors:o}),x}}get options(){return this._def.options}};We.create=(r,e)=>new We({options:r,typeName:b.ZodUnion,...T(e)});var $e=r=>r instanceof Ye?$e(r.schema):r instanceof ce?$e(r.innerType()):r instanceof Ge?[r.value]:r instanceof Ne?r.options:r instanceof Xe?k.objectValues(r.enum):r instanceof et?$e(r._def.innerType):r instanceof Ue?[void 0]:r instanceof Ze?[null]:r instanceof de?[void 0,...$e(r.unwrap())]:r instanceof Ce?[null,...$e(r.unwrap())]:r instanceof or||r instanceof nt?$e(r.unwrap()):r instanceof tt?$e(r._def.innerType):[],Et=class extends N{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==g.object)return y(t,{code:p.invalid_type,expected:g.object,received:t.parsedType}),x;let n=this.discriminator,s=t.data[n],i=this.optionsMap.get(s);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(y(t,{code:p.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),x)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){let s=new Map;for(let i of t){let a=$e(i.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of a){if(s.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);s.set(o,i)}}return new Et({typeName:b.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...T(n)})}};function jn(r,e){let t=De(r),n=De(e);if(r===e)return{valid:!0,data:r};if(t===g.object&&n===g.object){let s=k.objectKeys(e),i=k.objectKeys(r).filter(o=>s.indexOf(o)!==-1),a={...r,...e};for(let o of i){let u=jn(r[o],e[o]);if(!u.valid)return{valid:!1};a[o]=u.data}return{valid:!0,data:a}}else if(t===g.array&&n===g.array){if(r.length!==e.length)return{valid:!1};let s=[];for(let i=0;i<r.length;i++){let a=r[i],o=e[i],u=jn(a,o);if(!u.valid)return{valid:!1};s.push(u.data)}return{valid:!0,data:s}}else return t===g.date&&n===g.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}var Je=class extends N{_parse(e){let{status:t,ctx:n}=this._processInputParams(e),s=(i,a)=>{if(En(i)||En(a))return x;let o=jn(i.value,a.value);return o.valid?((Pn(i)||Pn(a))&&t.dirty(),{status:t.value,value:o.data}):(y(n,{code:p.invalid_intersection_types}),x)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,a])=>s(i,a)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Je.create=(r,e,t)=>new Je({left:r,right:e,typeName:b.ZodIntersection,...T(t)});var me=class extends N{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==g.array)return y(n,{code:p.invalid_type,expected:g.array,received:n.parsedType}),x;if(n.data.length<this._def.items.length)return y(n,{code:p.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),x;!this._def.rest&&n.data.length>this._def.items.length&&(y(n,{code:p.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let i=[...n.data].map((a,o)=>{let u=this._def.items[o]||this._def.rest;return u?u._parse(new fe(n,a,n.path,o)):null}).filter(a=>!!a);return n.common.async?Promise.all(i).then(a=>Y.mergeArray(t,a)):Y.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new me({...this._def,rest:e})}};me.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new me({items:r,typeName:b.ZodTuple,rest:null,...T(e)})};var He=class extends N{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==g.object)return y(n,{code:p.invalid_type,expected:g.object,received:n.parsedType}),x;let s=[],i=this._def.keyType,a=this._def.valueType;for(let o in n.data)s.push({key:i._parse(new fe(n,o,n.path,o)),value:a._parse(new fe(n,n.data[o],n.path,o)),alwaysSet:o in n.data});return n.common.async?Y.mergeObjectAsync(t,s):Y.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof N?new He({keyType:e,valueType:t,typeName:b.ZodRecord,...T(n)}):new He({keyType:oe.create(),valueType:e,typeName:b.ZodRecord,...T(t)})}},Pt=class extends N{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==g.map)return y(n,{code:p.invalid_type,expected:g.map,received:n.parsedType}),x;let s=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map(([o,u],c)=>({key:s._parse(new fe(n,o,n.path,[c,"key"])),value:i._parse(new fe(n,u,n.path,[c,"value"]))}));if(n.common.async){let o=new Map;return Promise.resolve().then(async()=>{for(let u of a){let c=await u.key,m=await u.value;if(c.status==="aborted"||m.status==="aborted")return x;(c.status==="dirty"||m.status==="dirty")&&t.dirty(),o.set(c.value,m.value)}return{status:t.value,value:o}})}else{let o=new Map;for(let u of a){let c=u.key,m=u.value;if(c.status==="aborted"||m.status==="aborted")return x;(c.status==="dirty"||m.status==="dirty")&&t.dirty(),o.set(c.value,m.value)}return{status:t.value,value:o}}}};Pt.create=(r,e,t)=>new Pt({valueType:e,keyType:r,typeName:b.ZodMap,...T(t)});var Ee=class extends N{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==g.set)return y(n,{code:p.invalid_type,expected:g.set,received:n.parsedType}),x;let s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(y(n,{code:p.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(y(n,{code:p.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());let i=this._def.valueType;function a(u){let c=new Set;for(let m of u){if(m.status==="aborted")return x;m.status==="dirty"&&t.dirty(),c.add(m.value)}return{status:t.value,value:c}}let o=[...n.data.values()].map((u,c)=>i._parse(new fe(n,u,n.path,c)));return n.common.async?Promise.all(o).then(u=>a(u)):a(o)}min(e,t){return new Ee({...this._def,minSize:{value:e,message:v.toString(t)}})}max(e,t){return new Ee({...this._def,maxSize:{value:e,message:v.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};Ee.create=(r,e)=>new Ee({valueType:r,minSize:null,maxSize:null,typeName:b.ZodSet,...T(e)});var Le=class extends N{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==g.function)return y(t,{code:p.invalid_type,expected:g.function,received:t.parsedType}),x;function n(o,u){return Ur({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Fr(),$t].filter(c=>!!c),issueData:{code:p.invalid_arguments,argumentsError:u}})}function s(o,u){return Ur({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Fr(),$t].filter(c=>!!c),issueData:{code:p.invalid_return_type,returnTypeError:u}})}let i={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof Ve){let o=this;return ne(async function(...u){let c=new re([]),m=await o._def.args.parseAsync(u,i).catch(V=>{throw c.addIssue(n(u,V)),c}),S=await Reflect.apply(a,this,m);return await o._def.returns._def.type.parseAsync(S,i).catch(V=>{throw c.addIssue(s(S,V)),c})})}else{let o=this;return ne(function(...u){let c=o._def.args.safeParse(u,i);if(!c.success)throw new re([n(u,c.error)]);let m=Reflect.apply(a,this,c.data),S=o._def.returns.safeParse(m,i);if(!S.success)throw new re([s(m,S.error)]);return S.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Le({...this._def,args:me.create(e).rest(ke.create())})}returns(e){return new Le({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new Le({args:e||me.create([]).rest(ke.create()),returns:t||ke.create(),typeName:b.ZodFunction,...T(n)})}},Ye=class extends N{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};Ye.create=(r,e)=>new Ye({getter:r,typeName:b.ZodLazy,...T(e)});var Ge=class extends N{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return y(t,{received:t.data,code:p.invalid_literal,expected:this._def.value}),x}return{status:"valid",value:e.data}}get value(){return this._def.value}};Ge.create=(r,e)=>new Ge({value:r,typeName:b.ZodLiteral,...T(e)});function Ps(r,e){return new Ne({values:r,typeName:b.ZodEnum,...T(e)})}var Ne=class extends N{constructor(){super(...arguments),nr.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let t=this._getOrReturnCtx(e),n=this._def.values;return y(t,{expected:k.joinValues(n),received:t.parsedType,code:p.invalid_type}),x}if(Zr(this,nr,"f")||$s(this,nr,new Set(this._def.values),"f"),!Zr(this,nr,"f").has(e.data)){let t=this._getOrReturnCtx(e),n=this._def.values;return y(t,{received:t.data,code:p.invalid_enum_value,options:n}),x}return ne(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ne.create(e,{...this._def,...t})}exclude(e,t=this._def){return Ne.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}};nr=new WeakMap;Ne.create=Ps;var Xe=class extends N{constructor(){super(...arguments),sr.set(this,void 0)}_parse(e){let t=k.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==g.string&&n.parsedType!==g.number){let s=k.objectValues(t);return y(n,{expected:k.joinValues(s),received:n.parsedType,code:p.invalid_type}),x}if(Zr(this,sr,"f")||$s(this,sr,new Set(k.getValidEnumValues(this._def.values)),"f"),!Zr(this,sr,"f").has(e.data)){let s=k.objectValues(t);return y(n,{received:n.data,code:p.invalid_enum_value,options:s}),x}return ne(e.data)}get enum(){return this._def.values}};sr=new WeakMap;Xe.create=(r,e)=>new Xe({values:r,typeName:b.ZodNativeEnum,...T(e)});var Ve=class extends N{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==g.promise&&t.common.async===!1)return y(t,{code:p.invalid_type,expected:g.promise,received:t.parsedType}),x;let n=t.parsedType===g.promise?t.data:Promise.resolve(t.data);return ne(n.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}};Ve.create=(r,e)=>new Ve({type:r,typeName:b.ZodPromise,...T(e)});var ce=class extends N{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===b.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:a=>{y(n,a),a.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){let a=s.transform(n.data,i);if(n.common.async)return Promise.resolve(a).then(async o=>{if(t.value==="aborted")return x;let u=await this._def.schema._parseAsync({data:o,path:n.path,parent:n});return u.status==="aborted"?x:u.status==="dirty"||t.value==="dirty"?Ct(u.value):u});{if(t.value==="aborted")return x;let o=this._def.schema._parseSync({data:a,path:n.path,parent:n});return o.status==="aborted"?x:o.status==="dirty"||t.value==="dirty"?Ct(o.value):o}}if(s.type==="refinement"){let a=o=>{let u=s.refinement(o,i);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){let o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?x:(o.status==="dirty"&&t.dirty(),a(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?x:(o.status==="dirty"&&t.dirty(),a(o.value).then(()=>({status:t.value,value:o.value}))))}if(s.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ir(a))return a;let o=s.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>ir(a)?Promise.resolve(s.transform(a.value,i)).then(o=>({status:t.value,value:o})):a);k.assertNever(s)}};ce.create=(r,e,t)=>new ce({schema:r,typeName:b.ZodEffects,effect:e,...T(t)});ce.createWithPreprocess=(r,e,t)=>new ce({schema:e,effect:{type:"preprocess",transform:r},typeName:b.ZodEffects,...T(t)});var de=class extends N{_parse(e){return this._getType(e)===g.undefined?ne(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};de.create=(r,e)=>new de({innerType:r,typeName:b.ZodOptional,...T(e)});var Ce=class extends N{_parse(e){return this._getType(e)===g.null?ne(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Ce.create=(r,e)=>new Ce({innerType:r,typeName:b.ZodNullable,...T(e)});var et=class extends N{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return t.parsedType===g.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};et.create=(r,e)=>new et({innerType:r,typeName:b.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...T(e)});var tt=class extends N{_parse(e){let{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return ar(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new re(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new re(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};tt.create=(r,e)=>new tt({innerType:r,typeName:b.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...T(e)});var jt=class extends N{_parse(e){if(this._getType(e)!==g.nan){let n=this._getOrReturnCtx(e);return y(n,{code:p.invalid_type,expected:g.nan,received:n.parsedType}),x}return{status:"valid",value:e.data}}};jt.create=r=>new jt({typeName:b.ZodNaN,...T(r)});var Fa=Symbol("zod_brand"),or=class extends N{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}},rt=class extends N{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?x:i.status==="dirty"?(t.dirty(),Ct(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{let s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?x:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,t){return new rt({in:e,out:t,typeName:b.ZodPipeline})}},nt=class extends N{_parse(e){let t=this._def.innerType._parse(e),n=s=>(ir(s)&&(s.value=Object.freeze(s.value)),s);return ar(t)?t.then(s=>n(s)):n(t)}unwrap(){return this._def.innerType}};nt.create=(r,e)=>new nt({innerType:r,typeName:b.ZodReadonly,...T(e)});function js(r,e={},t){return r?ze.create().superRefine((n,s)=>{var i,a;if(!r(n)){let o=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,u=(a=(i=o.fatal)!==null&&i!==void 0?i:t)!==null&&a!==void 0?a:!0,c=typeof o=="string"?{message:o}:o;s.addIssue({code:"custom",...c,fatal:u})}}):ze.create()}var Ua={object:A.lazycreate},b;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(b||(b={}));var Za=(r,e={message:`Input not instance of ${r.name}`})=>js(t=>t instanceof r,e),As=oe.create,Is=Se.create,Wa=jt.create,Ja=Te.create,qs=Fe.create,Ha=Oe.create,Ya=kt.create,Ga=Ue.create,Xa=Ze.create,eo=ze.create,to=ke.create,ro=ye.create,no=Ot.create,so=le.create,io=A.create,ao=A.strictCreate,oo=We.create,lo=Et.create,co=Je.create,uo=me.create,fo=He.create,mo=Pt.create,ho=Ee.create,po=Le.create,yo=Ye.create,go=Ge.create,vo=Ne.create,_o=Xe.create,wo=Ve.create,Ns=ce.create,bo=de.create,xo=Ce.create,So=ce.createWithPreprocess,To=rt.create,No=()=>As().optional(),Co=()=>Is().optional(),$o=()=>qs().optional(),ko={string:r=>oe.create({...r,coerce:!0}),number:r=>Se.create({...r,coerce:!0}),boolean:r=>Fe.create({...r,coerce:!0}),bigint:r=>Te.create({...r,coerce:!0}),date:r=>Oe.create({...r,coerce:!0})},Oo=x,ie=Object.freeze({__proto__:null,defaultErrorMap:$t,setErrorMap:ka,getErrorMap:Fr,makeIssue:Ur,EMPTY_PATH:Oa,addIssueToContext:y,ParseStatus:Y,INVALID:x,DIRTY:Ct,OK:ne,isAborted:En,isDirty:Pn,isValid:ir,isAsync:ar,get util(){return k},get objectUtil(){return On},ZodParsedType:g,getParsedType:De,ZodType:N,datetimeRegex:Es,ZodString:oe,ZodNumber:Se,ZodBigInt:Te,ZodBoolean:Fe,ZodDate:Oe,ZodSymbol:kt,ZodUndefined:Ue,ZodNull:Ze,ZodAny:ze,ZodUnknown:ke,ZodNever:ye,ZodVoid:Ot,ZodArray:le,ZodObject:A,ZodUnion:We,ZodDiscriminatedUnion:Et,ZodIntersection:Je,ZodTuple:me,ZodRecord:He,ZodMap:Pt,ZodSet:Ee,ZodFunction:Le,ZodLazy:Ye,ZodLiteral:Ge,ZodEnum:Ne,ZodNativeEnum:Xe,ZodPromise:Ve,ZodEffects:ce,ZodTransformer:ce,ZodOptional:de,ZodNullable:Ce,ZodDefault:et,ZodCatch:tt,ZodNaN:jt,BRAND:Fa,ZodBranded:or,ZodPipeline:rt,ZodReadonly:nt,custom:js,Schema:N,ZodSchema:N,late:Ua,get ZodFirstPartyTypeKind(){return b},coerce:ko,any:eo,array:so,bigint:Ja,boolean:qs,date:Ha,discriminatedUnion:lo,effect:Ns,enum:vo,function:po,instanceof:Za,intersection:co,lazy:yo,literal:go,map:mo,nan:Wa,nativeEnum:_o,never:ro,null:Xa,nullable:xo,number:Is,object:io,oboolean:$o,onumber:Co,optional:bo,ostring:No,pipeline:To,preprocess:So,promise:wo,record:fo,set:ho,strictObject:ao,string:As,symbol:Ya,transformer:Ns,tuple:uo,undefined:Ga,union:oo,unknown:to,void:no,NEVER:Oo,ZodIssueCode:p,quotelessJson:$a,ZodError:re});var At=class{};At.createCommon={body:ie.object({name:ie.string(),code:ie.string(),province_code:ie.number(),district_code:ie.number(),ward_code:ie.number()})},At.updateCommon={body:ie.object({id:ie.string(),name:ie.string(),code:ie.string(),province_code:ie.number(),district_code:ie.number(),ward_code:ie.number()})};var Eo=async r=>{let e=new tr(r);r.route({method:"POST",url:"/",schema:At.createCommon,handler:e.create})};0&&(module.exports={COMMON_LAND_ROUTER});
//# sourceMappingURL=common-land.router.js.map
