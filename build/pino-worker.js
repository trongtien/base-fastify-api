"use strict";var E=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var _r=E((E_,ki)=>{"use strict";var et=e=>e&&typeof e.message=="string",mr=e=>{if(!e)return;let t=e.cause;if(typeof t=="function"){let r=e.cause();return et(r)?r:void 0}else return et(t)?t:void 0},vi=(e,t)=>{if(!et(e))return"";let r=e.stack||"";if(t.has(e))return r+`
causes have become circular...`;let n=mr(e);return n?(t.add(e),r+`
caused by: `+vi(n,t)):r},ia=e=>vi(e,new Set),Li=(e,t,r)=>{if(!et(e))return"";let n=r?"":e.message||"";if(t.has(e))return n+": ...";let i=mr(e);if(i){t.add(e);let o=typeof e.cause=="function";return n+(o?"":": ")+Li(i,t,o)}else return n},oa=e=>Li(e,new Set);ki.exports={isErrorLike:et,getErrorCause:mr,stackWithCauses:ia,messageWithCauses:oa}});var Sr=E((R_,Di)=>{"use strict";var sa=Symbol("circular-ref-tag"),_t=Symbol("pino-raw-err-ref"),Ii=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},aggregateErrors:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[_t]},set:function(e){this[_t]=e}}});Object.defineProperty(Ii,_t,{writable:!0,value:{}});Di.exports={pinoErrProto:Ii,pinoErrorSymbols:{seen:sa,rawSymbol:_t}}});var ji=E((A_,qi)=>{"use strict";qi.exports=Rr;var{messageWithCauses:la,stackWithCauses:fa,isErrorLike:Pi}=_r(),{pinoErrProto:ua,pinoErrorSymbols:aa}=Sr(),{seen:Er}=aa,{toString:ca}=Object.prototype;function Rr(e){if(!Pi(e))return e;e[Er]=void 0;let t=Object.create(ua);t.type=ca.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=la(e),t.stack=fa(e),Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(r=>Rr(r)));for(let r in e)if(t[r]===void 0){let n=e[r];Pi(n)?r!=="cause"&&!Object.prototype.hasOwnProperty.call(n,Er)&&(t[r]=Rr(n)):t[r]=n}return delete e[Er],t.raw=e,t}});var Mi=E((x_,Ni)=>{"use strict";Ni.exports=Et;var{isErrorLike:Ar}=_r(),{pinoErrProto:da,pinoErrorSymbols:ha}=Sr(),{seen:St}=ha,{toString:pa}=Object.prototype;function Et(e){if(!Ar(e))return e;e[St]=void 0;let t=Object.create(da);t.type=pa.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=e.message,t.stack=e.stack,Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(r=>Et(r))),Ar(e.cause)&&!Object.prototype.hasOwnProperty.call(e.cause,St)&&(t.cause=Et(e.cause));for(let r in e)if(t[r]===void 0){let n=e[r];Ar(n)?Object.prototype.hasOwnProperty.call(n,St)||(t[r]=Et(n)):t[r]=n}return delete e[St],t.raw=e,t}});var Bi=E((T_,Wi)=>{"use strict";Wi.exports={mapHttpRequest:ya,reqSerializer:Ci};var xr=Symbol("pino-raw-req-ref"),$i=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[xr]},set:function(e){this[xr]=e}}});Object.defineProperty($i,xr,{writable:!0,value:{}});function Ci(e){let t=e.info||e.socket,r=Object.create($i);if(r.id=typeof e.id=="function"?e.id():e.id||(e.info?e.info.id:void 0),r.method=e.method,e.originalUrl)r.url=e.originalUrl;else{let n=e.path;r.url=typeof n=="string"?n:e.url?e.url.path||e.url:void 0}return e.query&&(r.query=e.query),e.params&&(r.params=e.params),r.headers=e.headers,r.remoteAddress=t&&t.remoteAddress,r.remotePort=t&&t.remotePort,r.raw=e.raw||e,r}function ya(e){return{req:Ci(e)}}});var Gi=E((O_,Vi)=>{"use strict";Vi.exports={mapHttpResponse:ba,resSerializer:Ui};var Tr=Symbol("pino-raw-res-ref"),Fi=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[Tr]},set:function(e){this[Tr]=e}}});Object.defineProperty(Fi,Tr,{writable:!0,value:{}});function Ui(e){let t=Object.create(Fi);return t.statusCode=e.headersSent?e.statusCode:null,t.headers=e.getHeaders?e.getHeaders():e._headers,t.raw=e,t}function ba(e){return{res:Ui(e)}}});var vr=E((v_,zi)=>{"use strict";var Or=ji(),ga=Mi(),Rt=Bi(),At=Gi();zi.exports={err:Or,errWithCause:ga,mapHttpRequest:Rt.mapHttpRequest,mapHttpResponse:At.mapHttpResponse,req:Rt.reqSerializer,res:At.resSerializer,wrapErrorSerializer:function(t){return t===Or?t:function(n){return t(Or(n))}},wrapRequestSerializer:function(t){return t===Rt.reqSerializer?t:function(n){return t(Rt.reqSerializer(n))}},wrapResponseSerializer:function(t){return t===At.resSerializer?t:function(n){return t(At.resSerializer(n))}}}});var Lr=E((L_,Hi)=>{"use strict";function wa(e,t){return t}Hi.exports=function(){let t=Error.prepareStackTrace;Error.prepareStackTrace=wa;let r=new Error().stack;if(Error.prepareStackTrace=t,!Array.isArray(r))return;let n=r.slice(2),i=[];for(let o of n)o&&i.push(o.getFileName());return i}});var Ji=E((k_,Ki)=>{"use strict";Ki.exports=ma;function ma(e={}){let{ERR_PATHS_MUST_BE_STRINGS:t=()=>"fast-redact - Paths must be (non-empty) strings",ERR_INVALID_PATH:r=n=>`fast-redact \u2013 Invalid path (${n})`}=e;return function({paths:i}){i.forEach(o=>{if(typeof o!="string")throw Error(t());try{if(/ã€‡/.test(o))throw Error();let s=(o[0]==="["?"":".")+o.replace(/^\*/,"\u3007").replace(/\.\*/g,".\u3007").replace(/\[\*\]/g,"[\u3007]");if(/\n|\r|;/.test(s)||/\/\*/.test(s))throw Error();Function(`
            'use strict'
            const o = new Proxy({}, { get: () => o, set: () => { throw Error() } });
            const \u3007 = null;
            o${s}
            if ([o${s}].length !== 1) throw Error()`)()}catch{throw Error(r(o))}})}}});var xt=E((I_,Yi)=>{"use strict";Yi.exports=/[^.[\]]+|\[((?:.)*?)\]/g});var Qi=E((D_,Xi)=>{"use strict";var _a=xt();Xi.exports=Sa;function Sa({paths:e}){let t=[];var r=0;let n=e.reduce(function(i,o,s){var f=o.match(_a).map(a=>a.replace(/'|"|`/g,""));let c=o[0]==="[";f=f.map(a=>a[0]==="["?a.substr(1,a.length-2):a);let u=f.indexOf("*");if(u>-1){let a=f.slice(0,u),d=a.join("."),p=f.slice(u+1,f.length),l=p.length>0;r++,t.push({before:a,beforeStr:d,after:p,nested:l})}else i[o]={path:f,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(o),leadingBracket:c};return i},{});return{wildcards:t,wcLen:r,secret:n}}});var eo=E((P_,Zi)=>{"use strict";var Ea=xt();Zi.exports=Ra;function Ra({secret:e,serialize:t,wcLen:r,strict:n,isCensorFct:i,censorFctTakesPath:o},s){let f=Function("o",`
    if (typeof o !== 'object' || o == null) {
      ${Oa(n,t)}
    }
    const { censor, secret } = this
    const originalSecret = {}
    const secretKeys = Object.keys(secret)
    for (var i = 0; i < secretKeys.length; i++) {
      originalSecret[secretKeys[i]] = secret[secretKeys[i]]
    }

    ${Aa(e,i,o)}
    this.compileRestore()
    ${xa(r>0,i,o)}
    this.secret = originalSecret
    ${Ta(t)}
  `).bind(s);return f.state=s,t===!1&&(f.restore=c=>s.restore(c)),f}function Aa(e,t,r){return Object.keys(e).map(n=>{let{escPath:i,leadingBracket:o,path:s}=e[n],f=o?1:0,c=o?"":".",u=[];for(var a;(a=Ea.exec(n))!==null;){let[,h]=a,{index:y,input:g}=a;y>f&&u.push(g.substring(0,y-(h?0:1)))}var d=u.map(h=>`o${c}${h}`).join(" && ");d.length===0?d+=`o${c}${n} != null`:d+=` && o${c}${n} != null`;let p=`
      switch (true) {
        ${u.reverse().map(h=>`
          case o${c}${h} === censor:
            secret[${i}].circle = ${JSON.stringify(h)}
            break
        `).join(`
`)}
      }
    `,l=r?`val, ${JSON.stringify(s)}`:"val";return`
      if (${d}) {
        const val = o${c}${n}
        if (val === censor) {
          secret[${i}].precensored = true
        } else {
          secret[${i}].val = val
          o${c}${n} = ${t?`censor(${l})`:"censor"}
          ${p}
        }
      }
    `}).join(`
`)}function xa(e,t,r){return e===!0?`
    {
      const { wildcards, wcLen, groupRedact, nestedRedact } = this
      for (var i = 0; i < wcLen; i++) {
        const { before, beforeStr, after, nested } = wildcards[i]
        if (nested === true) {
          secret[beforeStr] = secret[beforeStr] || []
          nestedRedact(secret[beforeStr], o, before, after, censor, ${t}, ${r})
        } else secret[beforeStr] = groupRedact(o, before, censor, ${t}, ${r})
      }
    }
  `:""}function Ta(e){return e===!1?"return o":`
    var s = this.serialize(o)
    this.restore(o)
    return s
  `}function Oa(e,t){return e===!0?"throw Error('fast-redact: primitives cannot be redacted')":t===!1?"return o":"return this.serialize(o)"}});var Ir=E((q_,no)=>{"use strict";no.exports={groupRedact:La,groupRestore:va,nestedRedact:Ia,nestedRestore:ka};function va({keys:e,values:t,target:r}){if(r==null||typeof r=="string")return;let n=e.length;for(var i=0;i<n;i++){let o=e[i];r[o]=t[i]}}function La(e,t,r,n,i){let o=to(e,t);if(o==null||typeof o=="string")return{keys:null,values:null,target:o,flat:!0};let s=Object.keys(o),f=s.length,c=t.length,u=i?[...t]:void 0,a=new Array(f);for(var d=0;d<f;d++){let p=s[d];a[d]=o[p],i?(u[c]=p,o[p]=r(o[p],u)):n?o[p]=r(o[p]):o[p]=r}return{keys:s,values:a,target:o,flat:!0}}function ka(e){for(let t=0;t<e.length;t++){let{target:r,path:n,value:i}=e[t],o=r;for(let s=n.length-1;s>0;s--)o=o[n[s]];o[n[0]]=i}}function Ia(e,t,r,n,i,o,s){let f=to(t,r);if(f==null)return;let c=Object.keys(f),u=c.length;for(var a=0;a<u;a++){let d=c[a];Da(e,f,d,r,n,i,o,s)}return e}function kr(e,t){return e!=null?"hasOwn"in Object?Object.hasOwn(e,t):Object.prototype.hasOwnProperty.call(e,t):!1}function Da(e,t,r,n,i,o,s,f){let c=i.length,u=c-1,a=r;var d=-1,p,l,h,y=null,g=null,m,w,S=!1,_=0,R=0,A=Pa();if(h=p=t[r],typeof p=="object"){for(;p!=null&&++d<c&&(R+=1,r=i[d],y=h,!(r!=="*"&&!g&&!(typeof p=="object"&&r in p)));)if(!(r==="*"&&(g==="*"&&(S=!0),g=r,d!==u))){if(g){let x=Object.keys(p);for(var v=0;v<x.length;v++){let T=x[v];if(w=p[T],m=r==="*",S)A=ue(A,T,R),_=d,h=ro(w,_-1,r,n,i,o,s,f,a,p,l,h,m,T,d,u,A,e,t[a],R+1);else if(m||typeof w=="object"&&w!==null&&r in w){if(m?h=w:h=w[r],l=d!==u?h:s?f?o(h,[...n,a,...i]):o(h):o,m){let I=tt(ue(A,T,R),h,t[a]);e.push(I),p[T]=l}else if(w[r]!==l)if(l===void 0&&o!==void 0||kr(w,r)&&l===h)A=ue(A,T,R);else{A=ue(A,T,R);let I=tt(ue(A,r,R+1),h,t[a]);e.push(I),w[r]=l}}}g=null}else{if(h=p[r],A=ue(A,r,R),l=d!==u?h:s?f?o(h,[...n,a,...i]):o(h):o,!(kr(p,r)&&l===h||l===void 0&&o!==void 0)){let x=tt(A,h,t[a]);e.push(x),p[r]=l}p=p[r]}if(typeof p!="object")break}}}function to(e,t){for(var r=-1,n=t.length,i=e;i!=null&&++r<n;)i=i[t[r]];return i}function ro(e,t,r,n,i,o,s,f,c,u,a,d,p,l,h,y,g,m,w,S){if(t===0&&(p||typeof e=="object"&&e!==null&&r in e)){if(p?d=e:d=e[r],a=h!==y?d:s?f?o(d,[...n,c,...i]):o(d):o,p){let _=tt(g,d,w);m.push(_),u[l]=a}else if(e[r]!==a){if(!(a===void 0&&o!==void 0||kr(e,r)&&a===d)){let _=tt(ue(g,r,S+1),d,w);m.push(_),e[r]=a}}}for(let _ in e)typeof e[_]=="object"&&(g=ue(g,_,S),ro(e[_],t-1,r,n,i,o,s,f,c,u,a,d,p,l,h,y,g,m,w,S+1))}function Pa(){return{parent:null,key:null,children:[],depth:0}}function ue(e,t,r){if(e.depth===r)return ue(e.parent,t,r);var n={parent:e,key:t,depth:r,children:[]};return e.children.push(n),n}function tt(e,t,r){let n=e,i=[];do i.push(n.key),n=n.parent;while(n.parent!=null);return{path:i,value:t,target:r}}});var oo=E((j_,io)=>{"use strict";var{groupRestore:qa,nestedRestore:ja}=Ir();io.exports=Na;function Na(){return function(){if(this.restore){this.restore.state.secret=this.secret;return}let{secret:t,wcLen:r}=this,n=Object.keys(t),i=Ma(t,n),o=r>0,s=o?{secret:t,groupRestore:qa,nestedRestore:ja}:{secret:t};this.restore=Function("o",$a(i,n,o)).bind(s),this.restore.state=s}}function Ma(e,t){return t.map(r=>{let{circle:n,escPath:i,leadingBracket:o}=e[r],f=n?`o.${n} = secret[${i}].val`:`o${o?"":"."}${r} = secret[${i}].val`,c=`secret[${i}].val = undefined`;return`
      if (secret[${i}].val !== undefined) {
        try { ${f} } catch (e) {}
        ${c}
      }
    `}).join("")}function $a(e,t,r){return`
    const secret = this.secret
    ${r===!0?`
    const keys = Object.keys(secret)
    const len = keys.length
    for (var i = len - 1; i >= ${t.length}; i--) {
      const k = keys[i]
      const o = secret[k]
      if (o) {
        if (o.flat === true) this.groupRestore(o)
        else this.nestedRestore(o)
        secret[k] = null
      }
    }
  `:""}
    ${e}
    return o
  `}});var lo=E((N_,so)=>{"use strict";so.exports=Ca;function Ca(e){let{secret:t,censor:r,compileRestore:n,serialize:i,groupRedact:o,nestedRedact:s,wildcards:f,wcLen:c}=e,u=[{secret:t,censor:r,compileRestore:n}];return i!==!1&&u.push({serialize:i}),c>0&&u.push({groupRedact:o,nestedRedact:s,wildcards:f,wcLen:c}),Object.assign(...u)}});var ao=E((M_,uo)=>{"use strict";var fo=Ji(),Wa=Qi(),Ba=eo(),Fa=oo(),{groupRedact:Ua,nestedRedact:Va}=Ir(),Ga=lo(),za=xt(),Ha=fo(),Dr=e=>e;Dr.restore=Dr;var Ka="[REDACTED]";Pr.rx=za;Pr.validator=fo;uo.exports=Pr;function Pr(e={}){let t=Array.from(new Set(e.paths||[])),r="serialize"in e&&(e.serialize===!1||typeof e.serialize=="function")?e.serialize:JSON.stringify,n=e.remove;if(n===!0&&r!==JSON.stringify)throw Error("fast-redact \u2013 remove option may only be set when serializer is JSON.stringify");let i=n===!0?void 0:"censor"in e?e.censor:Ka,o=typeof i=="function",s=o&&i.length>1;if(t.length===0)return r||Dr;Ha({paths:t,serialize:r,censor:i});let{wildcards:f,wcLen:c,secret:u}=Wa({paths:t,censor:i}),a=Fa(),d="strict"in e?e.strict:!0;return Ba({secret:u,wcLen:c,serialize:r,strict:d,isCensorFct:o,censorFctTakesPath:s},Ga({secret:u,censor:i,compileRestore:a,serialize:r,groupRedact:Ua,nestedRedact:Va,wildcards:f,wcLen:c}))}});var Me=E(($_,co)=>{"use strict";var Ja=Symbol("pino.setLevel"),Ya=Symbol("pino.getLevel"),Xa=Symbol("pino.levelVal"),Qa=Symbol("pino.levelComp"),Za=Symbol("pino.useLevelLabels"),ec=Symbol("pino.useOnlyCustomLevels"),tc=Symbol("pino.mixin"),rc=Symbol("pino.lsCache"),nc=Symbol("pino.chindings"),ic=Symbol("pino.asJson"),oc=Symbol("pino.write"),sc=Symbol("pino.redactFmt"),lc=Symbol("pino.time"),fc=Symbol("pino.timeSliceIndex"),uc=Symbol("pino.stream"),ac=Symbol("pino.stringify"),cc=Symbol("pino.stringifySafe"),dc=Symbol("pino.stringifiers"),hc=Symbol("pino.end"),pc=Symbol("pino.formatOpts"),yc=Symbol("pino.messageKey"),bc=Symbol("pino.errorKey"),gc=Symbol("pino.nestedKey"),wc=Symbol("pino.nestedKeyStr"),mc=Symbol("pino.mixinMergeStrategy"),_c=Symbol("pino.msgPrefix"),Sc=Symbol("pino.wildcardFirst"),Ec=Symbol.for("pino.serializers"),Rc=Symbol.for("pino.formatters"),Ac=Symbol.for("pino.hooks"),xc=Symbol.for("pino.metadata");co.exports={setLevelSym:Ja,getLevelSym:Ya,levelValSym:Xa,levelCompSym:Qa,useLevelLabelsSym:Za,mixinSym:tc,lsCacheSym:rc,chindingsSym:nc,asJsonSym:ic,writeSym:oc,serializersSym:Ec,redactFmtSym:sc,timeSym:lc,timeSliceIndexSym:fc,streamSym:uc,stringifySym:ac,stringifySafeSym:cc,stringifiersSym:dc,endSym:hc,formatOptsSym:pc,messageKeySym:yc,errorKeySym:bc,nestedKeySym:gc,wildcardFirstSym:Sc,needsMetadataGsym:xc,useOnlyCustomLevelsSym:ec,formattersSym:Rc,hooksSym:Ac,nestedKeyStrSym:wc,mixinMergeStrategySym:mc,msgPrefixSym:_c}});var Nr=E((C_,bo)=>{"use strict";var jr=ao(),{redactFmtSym:Tc,wildcardFirstSym:Tt}=Me(),{rx:qr,validator:Oc}=jr,ho=Oc({ERR_PATHS_MUST_BE_STRINGS:()=>"pino \u2013 redacted paths must be strings",ERR_INVALID_PATH:e=>`pino \u2013 redact paths array contains an invalid path (${e})`}),po="[Redacted]",yo=!1;function vc(e,t){let{paths:r,censor:n}=Lc(e),i=r.reduce((f,c)=>{qr.lastIndex=0;let u=qr.exec(c),a=qr.exec(c),d=u[1]!==void 0?u[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):u[0];if(d==="*"&&(d=Tt),a===null)return f[d]=null,f;if(f[d]===null)return f;let{index:p}=a,l=`${c.substr(p,c.length-1)}`;return f[d]=f[d]||[],d!==Tt&&f[d].length===0&&f[d].push(...f[Tt]||[]),d===Tt&&Object.keys(f).forEach(function(h){f[h]&&f[h].push(l)}),f[d].push(l),f},{}),o={[Tc]:jr({paths:r,censor:n,serialize:t,strict:yo})},s=(...f)=>t(typeof n=="function"?n(...f):n);return[...Object.keys(i),...Object.getOwnPropertySymbols(i)].reduce((f,c)=>{if(i[c]===null)f[c]=u=>s(u,[c]);else{let u=typeof n=="function"?(a,d)=>n(a,[c,...d]):n;f[c]=jr({paths:i[c],censor:u,serialize:t,strict:yo})}return f},o)}function Lc(e){if(Array.isArray(e))return e={paths:e,censor:po},ho(e),e;let{paths:t,censor:r=po,remove:n}=e;if(Array.isArray(t)===!1)throw Error("pino \u2013 redact must contain an array of strings");return n===!0&&(r=void 0),ho({paths:t,censor:r}),{paths:t,censor:r}}bo.exports=vc});var wo=E((W_,go)=>{"use strict";var kc=()=>"",Ic=()=>`,"time":${Date.now()}`,Dc=()=>`,"time":${Math.round(Date.now()/1e3)}`,Pc=()=>`,"time":"${new Date(Date.now()).toISOString()}"`;go.exports={nullTime:kc,epochTime:Ic,unixTime:Dc,isoTime:Pc}});var _o=E((B_,mo)=>{"use strict";function qc(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}mo.exports=jc;function jc(e,t,r){var n=r&&r.stringify||qc,i=1;if(typeof e=="object"&&e!==null){var o=t.length+i;if(o===1)return e;var s=new Array(o);s[0]=n(e);for(var f=1;f<o;f++)s[f]=n(t[f]);return s.join(" ")}if(typeof e!="string")return e;var c=t.length;if(c===0)return e;for(var u="",a=1-i,d=-1,p=e&&e.length||0,l=0;l<p;){if(e.charCodeAt(l)===37&&l+1<p){switch(d=d>-1?d:0,e.charCodeAt(l+1)){case 100:case 102:if(a>=c||t[a]==null)break;d<l&&(u+=e.slice(d,l)),u+=Number(t[a]),d=l+2,l++;break;case 105:if(a>=c||t[a]==null)break;d<l&&(u+=e.slice(d,l)),u+=Math.floor(Number(t[a])),d=l+2,l++;break;case 79:case 111:case 106:if(a>=c||t[a]===void 0)break;d<l&&(u+=e.slice(d,l));var h=typeof t[a];if(h==="string"){u+="'"+t[a]+"'",d=l+2,l++;break}if(h==="function"){u+=t[a].name||"<anonymous>",d=l+2,l++;break}u+=n(t[a]),d=l+2,l++;break;case 115:if(a>=c)break;d<l&&(u+=e.slice(d,l)),u+=String(t[a]),d=l+2,l++;break;case 37:d<l&&(u+=e.slice(d,l)),u+="%",d=l+2,l++,a--;break}++a}++l}return d===-1?e:(d<p&&(u+=e.slice(d)),u)}});var $r=E((F_,Mr)=>{"use strict";if(typeof SharedArrayBuffer<"u"&&typeof Atomics<"u"){let t=function(r){if((r>0&&r<1/0)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(e,0,0,Number(r))},e=new Int32Array(new SharedArrayBuffer(4));Mr.exports=t}else{let e=function(t){if((t>0&&t<1/0)===!1)throw typeof t!="number"&&typeof t!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");let n=Date.now()+Number(t);for(;n>Date.now(););};Mr.exports=e}});var vo=E((U_,Oo)=>{"use strict";var $=require("fs"),Nc=require("events"),Mc=require("util").inherits,So=require("path"),Wr=$r(),Ot=100,vt=Buffer.allocUnsafe(0),$c=16*1024,Eo="buffer",Ro="utf8";function Ao(e,t){t._opening=!0,t._writing=!0,t._asyncDrainScheduled=!1;function r(o,s){if(o){t._reopening=!1,t._writing=!1,t._opening=!1,t.sync?process.nextTick(()=>{t.listenerCount("error")>0&&t.emit("error",o)}):t.emit("error",o);return}let f=t._reopening;t.fd=s,t.file=e,t._reopening=!1,t._opening=!1,t._writing=!1,t.sync?process.nextTick(()=>t.emit("ready")):t.emit("ready"),!t.destroyed&&(!t._writing&&t._len>t.minLength||t._flushPending?t._actualWrite():f&&process.nextTick(()=>t.emit("drain")))}let n=t.append?"a":"w",i=t.mode;if(t.sync)try{t.mkdir&&$.mkdirSync(So.dirname(e),{recursive:!0});let o=$.openSync(e,n,i);r(null,o)}catch(o){throw r(o),o}else t.mkdir?$.mkdir(So.dirname(e),{recursive:!0},o=>{if(o)return r(o);$.open(e,n,i,r)}):$.open(e,n,i,r)}function Y(e){if(!(this instanceof Y))return new Y(e);let{fd:t,dest:r,minLength:n,maxLength:i,maxWrite:o,sync:s,append:f=!0,mkdir:c,retryEAGAIN:u,fsync:a,contentMode:d,mode:p}=e||{};t=t||r,this._len=0,this.fd=-1,this._bufs=[],this._lens=[],this._writing=!1,this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._flushPending=!1,this._hwm=Math.max(n||0,16387),this.file=null,this.destroyed=!1,this.minLength=n||0,this.maxLength=i||0,this.maxWrite=o||$c,this.sync=s||!1,this.writable=!0,this._fsync=a||!1,this.append=f||!1,this.mode=p,this.retryEAGAIN=u||(()=>!0),this.mkdir=c||!1;let l,h;if(d===Eo)this._writingBuf=vt,this.write=Bc,this.flush=Uc,this.flushSync=Gc,this._actualWrite=Hc,l=()=>$.writeSync(this.fd,this._writingBuf),h=()=>$.write(this.fd,this._writingBuf,this.release);else if(d===void 0||d===Ro)this._writingBuf="",this.write=Wc,this.flush=Fc,this.flushSync=Vc,this._actualWrite=zc,l=()=>$.writeSync(this.fd,this._writingBuf,"utf8"),h=()=>$.write(this.fd,this._writingBuf,"utf8",this.release);else throw new Error(`SonicBoom supports "${Ro}" and "${Eo}", but passed ${d}`);if(typeof t=="number")this.fd=t,process.nextTick(()=>this.emit("ready"));else if(typeof t=="string")Ao(t,this);else throw new Error("SonicBoom supports only file descriptors and files");if(this.minLength>=this.maxWrite)throw new Error(`minLength should be smaller than maxWrite (${this.maxWrite})`);this.release=(y,g)=>{if(y){if((y.code==="EAGAIN"||y.code==="EBUSY")&&this.retryEAGAIN(y,this._writingBuf.length,this._len-this._writingBuf.length))if(this.sync)try{Wr(Ot),this.release(void 0,0)}catch(S){this.release(S)}else setTimeout(h,Ot);else this._writing=!1,this.emit("error",y);return}this.emit("write",g);let m=Cr(this._writingBuf,this._len,g);if(this._len=m.len,this._writingBuf=m.writingBuf,this._writingBuf.length){if(!this.sync){h();return}try{do{let S=l(),_=Cr(this._writingBuf,this._len,S);this._len=_.len,this._writingBuf=_.writingBuf}while(this._writingBuf.length)}catch(S){this.release(S);return}}this._fsync&&$.fsyncSync(this.fd);let w=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):w>this.minLength?this._actualWrite():this._ending?w>0?this._actualWrite():(this._writing=!1,Lt(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(Cc,this)):this.emit("drain"))},this.on("newListener",function(y){y==="drain"&&(this._asyncDrainScheduled=!1)})}function Cr(e,t,r){return typeof e=="string"&&Buffer.byteLength(e)!==r&&(r=Buffer.from(e).subarray(0,r).toString().length),t=Math.max(t-r,0),e=e.slice(r),{writingBuf:e,len:t}}function Cc(e){e.listenerCount("drain")>0&&(e._asyncDrainScheduled=!1,e.emit("drain"))}Mc(Y,Nc);function xo(e,t){return e.length===0?vt:e.length===1?e[0]:Buffer.concat(e,t)}function Wc(e){if(this.destroyed)throw new Error("SonicBoom destroyed");let t=this._len+e.length,r=this._bufs;return this.maxLength&&t>this.maxLength?(this.emit("drop",e),this._len<this._hwm):(r.length===0||r[r.length-1].length+e.length>this.maxWrite?r.push(""+e):r[r.length-1]+=e,this._len=t,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function Bc(e){if(this.destroyed)throw new Error("SonicBoom destroyed");let t=this._len+e.length,r=this._bufs,n=this._lens;return this.maxLength&&t>this.maxLength?(this.emit("drop",e),this._len<this._hwm):(r.length===0||n[n.length-1]+e.length>this.maxWrite?(r.push([e]),n.push(e.length)):(r[r.length-1].push(e),n[n.length-1]+=e.length),this._len=t,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function To(e){this._flushPending=!0;let t=()=>{this._fsync?(this._flushPending=!1,e()):$.fsync(this.fd,n=>{this._flushPending=!1,e(n)}),this.off("error",r)},r=n=>{this._flushPending=!1,e(n),this.off("drain",t)};this.once("drain",t),this.once("error",r)}function Fc(e){if(e!=null&&typeof e!="function")throw new Error("flush cb must be a function");if(this.destroyed){let t=new Error("SonicBoom destroyed");if(e){e(t);return}throw t}if(this.minLength<=0){e?.();return}e&&To.call(this,e),!this._writing&&(this._bufs.length===0&&this._bufs.push(""),this._actualWrite())}function Uc(e){if(e!=null&&typeof e!="function")throw new Error("flush cb must be a function");if(this.destroyed){let t=new Error("SonicBoom destroyed");if(e){e(t);return}throw t}if(this.minLength<=0){e?.();return}e&&To.call(this,e),!this._writing&&(this._bufs.length===0&&(this._bufs.push([]),this._lens.push(0)),this._actualWrite())}Y.prototype.reopen=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(e)});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(e&&(this.file=e),this._reopening=!0,this._writing)return;let t=this.fd;this.once("ready",()=>{t!==this.fd&&$.close(t,r=>{if(r)return this.emit("error",r)})}),Ao(this.file,this)};Y.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}this._ending||(this._ending=!0,!this._writing&&(this._len>0&&this.fd>=0?this._actualWrite():Lt(this)))};function Vc(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");let e="";for(;this._bufs.length||e;){e.length<=0&&(e=this._bufs[0]);try{let t=$.writeSync(this.fd,e,"utf8"),r=Cr(e,this._len,t);e=r.writingBuf,this._len=r.len,e.length<=0&&this._bufs.shift()}catch(t){if((t.code==="EAGAIN"||t.code==="EBUSY")&&!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;Wr(Ot)}}try{$.fsyncSync(this.fd)}catch{}}function Gc(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift([this._writingBuf]),this._writingBuf=vt);let e=vt;for(;this._bufs.length||e.length;){e.length<=0&&(e=xo(this._bufs[0],this._lens[0]));try{let t=$.writeSync(this.fd,e);e=e.subarray(t),this._len=Math.max(this._len-t,0),e.length<=0&&(this._bufs.shift(),this._lens.shift())}catch(t){if((t.code==="EAGAIN"||t.code==="EBUSY")&&!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;Wr(Ot)}}}Y.prototype.destroy=function(){this.destroyed||Lt(this)};function zc(){let e=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf||this._bufs.shift()||"",this.sync)try{let t=$.writeSync(this.fd,this._writingBuf,"utf8");e(null,t)}catch(t){e(t)}else $.write(this.fd,this._writingBuf,"utf8",e)}function Hc(){let e=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf.length?this._writingBuf:xo(this._bufs.shift(),this._lens.shift()),this.sync)try{let t=$.writeSync(this.fd,this._writingBuf);e(null,t)}catch(t){e(t)}else $.write(this.fd,this._writingBuf,e)}function Lt(e){if(e.fd===-1){e.once("ready",Lt.bind(null,e));return}e.destroyed=!0,e._bufs=[],e._lens=[],$.fsync(e.fd,t);function t(){e.fd!==1&&e.fd!==2?$.close(e.fd,r):r()}function r(n){if(n){e.emit("error",n);return}e._ending&&!e._writing&&e.emit("finish"),e.emit("close")}}Y.SonicBoom=Y;Y.default=Y;Oo.exports=Y});var Br=E((V_,Po)=>{"use strict";var X={exit:[],beforeExit:[]},Lo={exit:Yc,beforeExit:Xc},$e;function Kc(){$e===void 0&&($e=new FinalizationRegistry(Qc))}function Jc(e){X[e].length>0||process.on(e,Lo[e])}function ko(e){X[e].length>0||(process.removeListener(e,Lo[e]),X.exit.length===0&&X.beforeExit.length===0&&($e=void 0))}function Yc(){Io("exit")}function Xc(){Io("beforeExit")}function Io(e){for(let t of X[e]){let r=t.deref(),n=t.fn;r!==void 0&&n(r,e)}X[e]=[]}function Qc(e){for(let t of["exit","beforeExit"]){let r=X[t].indexOf(e);X[t].splice(r,r+1),ko(t)}}function Do(e,t,r){if(t===void 0)throw new Error("the object can't be undefined");Jc(e);let n=new WeakRef(t);n.fn=r,Kc(),$e.register(t,n),X[e].push(n)}function Zc(e,t){Do("exit",e,t)}function ed(e,t){Do("beforeExit",e,t)}function td(e){if($e!==void 0){$e.unregister(e);for(let t of["exit","beforeExit"])X[t]=X[t].filter(r=>{let n=r.deref();return n&&n!==e}),ko(t)}}Po.exports={register:Zc,registerBeforeExit:ed,unregister:td}});var qo=E((G_,rd)=>{rd.exports={name:"thread-stream",version:"3.1.0",description:"A streaming way to send data to a Node.js Worker Thread",main:"index.js",types:"index.d.ts",dependencies:{"real-require":"^0.2.0"},devDependencies:{"@types/node":"^20.1.0","@types/tap":"^15.0.0","@yao-pkg/pkg":"^5.11.5",desm:"^1.3.0",fastbench:"^1.0.1",husky:"^9.0.6","pino-elasticsearch":"^8.0.0","sonic-boom":"^4.0.1",standard:"^17.0.0",tap:"^16.2.0","ts-node":"^10.8.0",typescript:"^5.3.2","why-is-node-running":"^2.2.2"},scripts:{build:"tsc --noEmit",test:'standard && npm run build && npm run transpile && tap "test/**/*.test.*js" && tap --ts test/*.test.*ts',"test:ci":"standard && npm run transpile && npm run test:ci:js && npm run test:ci:ts","test:ci:js":'tap --no-check-coverage --timeout=120 --coverage-report=lcovonly "test/**/*.test.*js"',"test:ci:ts":'tap --ts --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*ts"',"test:yarn":'npm run transpile && tap "test/**/*.test.js" --no-check-coverage',transpile:"sh ./test/ts/transpile.sh",prepare:"husky install"},standard:{ignore:["test/ts/**/*","test/syntax-error.mjs"]},repository:{type:"git",url:"git+https://github.com/mcollina/thread-stream.git"},keywords:["worker","thread","threads","stream"],author:"Matteo Collina <hello@matteocollina.com>",license:"MIT",bugs:{url:"https://github.com/mcollina/thread-stream/issues"},homepage:"https://github.com/mcollina/thread-stream#readme"}});var No=E((z_,jo)=>{"use strict";function nd(e,t,r,n,i){let o=Date.now()+n,s=Atomics.load(e,t);if(s===r){i(null,"ok");return}let f=s,c=u=>{Date.now()>o?i(null,"timed-out"):setTimeout(()=>{f=s,s=Atomics.load(e,t),s===f?c(u>=1e3?1e3:u*2):s===r?i(null,"ok"):i(null,"not-equal")},u)};c(1)}function id(e,t,r,n,i){let o=Date.now()+n,s=Atomics.load(e,t);if(s!==r){i(null,"ok");return}let f=c=>{Date.now()>o?i(null,"timed-out"):setTimeout(()=>{s=Atomics.load(e,t),s!==r?i(null,"ok"):f(c>=1e3?1e3:c*2)},c)};f(1)}jo.exports={wait:nd,waitDiff:id}});var $o=E((H_,Mo)=>{"use strict";Mo.exports={WRITE_INDEX:4,READ_INDEX:8}});var Uo=E((K_,Fo)=>{"use strict";var{version:od}=qo(),{EventEmitter:sd}=require("events"),{Worker:ld}=require("worker_threads"),{join:fd}=require("path"),{pathToFileURL:ud}=require("url"),{wait:ad}=No(),{WRITE_INDEX:z,READ_INDEX:te}=$o(),cd=require("buffer"),dd=require("assert"),b=Symbol("kImpl"),hd=cd.constants.MAX_STRING_LENGTH,rt=class{constructor(t){this._value=t}deref(){return this._value}},It=class{register(){}unregister(){}},pd=process.env.NODE_V8_COVERAGE?It:global.FinalizationRegistry||It,yd=process.env.NODE_V8_COVERAGE?rt:global.WeakRef||rt,Co=new pd(e=>{e.exited||e.terminate()});function bd(e,t){let{filename:r,workerData:n}=t,o=("__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{})["thread-stream-worker"]||fd(__dirname,"lib","worker.js"),s=new ld(o,{...t.workerOpts,trackUnmanagedFds:!1,workerData:{filename:r.indexOf("file://")===0?r:ud(r).href,dataBuf:e[b].dataBuf,stateBuf:e[b].stateBuf,workerData:{$context:{threadStreamVersion:od},...n}}});return s.stream=new rt(e),s.on("message",gd),s.on("exit",Bo),Co.register(e,s),s}function Wo(e){dd(!e[b].sync),e[b].needDrain&&(e[b].needDrain=!1,e.emit("drain"))}function kt(e){let t=Atomics.load(e[b].state,z),r=e[b].data.length-t;if(r>0){if(e[b].buf.length===0){e[b].flushing=!1,e[b].ending?zr(e):e[b].needDrain&&process.nextTick(Wo,e);return}let n=e[b].buf.slice(0,r),i=Buffer.byteLength(n);i<=r?(e[b].buf=e[b].buf.slice(r),Dt(e,n,kt.bind(null,e))):e.flush(()=>{if(!e.destroyed){for(Atomics.store(e[b].state,te,0),Atomics.store(e[b].state,z,0);i>e[b].data.length;)r=r/2,n=e[b].buf.slice(0,r),i=Buffer.byteLength(n);e[b].buf=e[b].buf.slice(r),Dt(e,n,kt.bind(null,e))}})}else if(r===0){if(t===0&&e[b].buf.length===0)return;e.flush(()=>{Atomics.store(e[b].state,te,0),Atomics.store(e[b].state,z,0),kt(e)})}else re(e,new Error("overwritten"))}function gd(e){let t=this.stream.deref();if(t===void 0){this.exited=!0,this.terminate();return}switch(e.code){case"READY":this.stream=new yd(t),t.flush(()=>{t[b].ready=!0,t.emit("ready")});break;case"ERROR":re(t,e.err);break;case"EVENT":Array.isArray(e.args)?t.emit(e.name,...e.args):t.emit(e.name,e.args);break;case"WARNING":process.emitWarning(e.err);break;default:re(t,new Error("this should not happen: "+e.code))}}function Bo(e){let t=this.stream.deref();t!==void 0&&(Co.unregister(t),t.worker.exited=!0,t.worker.off("exit",Bo),re(t,e!==0?new Error("the worker thread exited"):null))}var Ur=class extends sd{constructor(t={}){if(super(),t.bufferSize<4)throw new Error("bufferSize must at least fit a 4-byte utf-8 char");this[b]={},this[b].stateBuf=new SharedArrayBuffer(128),this[b].state=new Int32Array(this[b].stateBuf),this[b].dataBuf=new SharedArrayBuffer(t.bufferSize||4*1024*1024),this[b].data=Buffer.from(this[b].dataBuf),this[b].sync=t.sync||!1,this[b].ending=!1,this[b].ended=!1,this[b].needDrain=!1,this[b].destroyed=!1,this[b].flushing=!1,this[b].ready=!1,this[b].finished=!1,this[b].errored=null,this[b].closed=!1,this[b].buf="",this.worker=bd(this,t),this.on("message",(r,n)=>{this.worker.postMessage(r,n)})}write(t){if(this[b].destroyed)return Vr(this,new Error("the worker has exited")),!1;if(this[b].ending)return Vr(this,new Error("the worker is ending")),!1;if(this[b].flushing&&this[b].buf.length+t.length>=hd)try{Fr(this),this[b].flushing=!0}catch(r){return re(this,r),!1}if(this[b].buf+=t,this[b].sync)try{return Fr(this),!0}catch(r){return re(this,r),!1}return this[b].flushing||(this[b].flushing=!0,setImmediate(kt,this)),this[b].needDrain=this[b].data.length-this[b].buf.length-Atomics.load(this[b].state,z)<=0,!this[b].needDrain}end(){this[b].destroyed||(this[b].ending=!0,zr(this))}flush(t){if(this[b].destroyed){typeof t=="function"&&process.nextTick(t,new Error("the worker has exited"));return}let r=Atomics.load(this[b].state,z);ad(this[b].state,te,r,1/0,(n,i)=>{if(n){re(this,n),process.nextTick(t,n);return}if(i==="not-equal"){this.flush(t);return}process.nextTick(t)})}flushSync(){this[b].destroyed||(Fr(this),Gr(this))}unref(){this.worker.unref()}ref(){this.worker.ref()}get ready(){return this[b].ready}get destroyed(){return this[b].destroyed}get closed(){return this[b].closed}get writable(){return!this[b].destroyed&&!this[b].ending}get writableEnded(){return this[b].ending}get writableFinished(){return this[b].finished}get writableNeedDrain(){return this[b].needDrain}get writableObjectMode(){return!1}get writableErrored(){return this[b].errored}};function Vr(e,t){setImmediate(()=>{e.emit("error",t)})}function re(e,t){e[b].destroyed||(e[b].destroyed=!0,t&&(e[b].errored=t,Vr(e,t)),e.worker.exited?setImmediate(()=>{e[b].closed=!0,e.emit("close")}):e.worker.terminate().catch(()=>{}).then(()=>{e[b].closed=!0,e.emit("close")}))}function Dt(e,t,r){let n=Atomics.load(e[b].state,z),i=Buffer.byteLength(t);return e[b].data.write(t,n),Atomics.store(e[b].state,z,n+i),Atomics.notify(e[b].state,z),r(),!0}function zr(e){if(!(e[b].ended||!e[b].ending||e[b].flushing)){e[b].ended=!0;try{e.flushSync();let t=Atomics.load(e[b].state,te);Atomics.store(e[b].state,z,-1),Atomics.notify(e[b].state,z);let r=0;for(;t!==-1;){if(Atomics.wait(e[b].state,te,t,1e3),t=Atomics.load(e[b].state,te),t===-2){re(e,new Error("end() failed"));return}if(++r===10){re(e,new Error("end() took too long (10s)"));return}}process.nextTick(()=>{e[b].finished=!0,e.emit("finish")})}catch(t){re(e,t)}}}function Fr(e){let t=()=>{e[b].ending?zr(e):e[b].needDrain&&process.nextTick(Wo,e)};for(e[b].flushing=!1;e[b].buf.length!==0;){let r=Atomics.load(e[b].state,z),n=e[b].data.length-r;if(n===0){Gr(e),Atomics.store(e[b].state,te,0),Atomics.store(e[b].state,z,0);continue}else if(n<0)throw new Error("overwritten");let i=e[b].buf.slice(0,n),o=Buffer.byteLength(i);if(o<=n)e[b].buf=e[b].buf.slice(n),Dt(e,i,t);else{for(Gr(e),Atomics.store(e[b].state,te,0),Atomics.store(e[b].state,z,0);o>e[b].buf.length;)n=n/2,i=e[b].buf.slice(0,n),o=Buffer.byteLength(i);e[b].buf=e[b].buf.slice(n),Dt(e,i,t)}}}function Gr(e){if(e[b].flushing)throw new Error("unable to flush while flushing");let t=Atomics.load(e[b].state,z),r=0;for(;;){let n=Atomics.load(e[b].state,te);if(n===-2)throw Error("_flushSync failed");if(n!==t)Atomics.wait(e[b].state,te,n,1e3);else break;if(++r===10)throw new Error("_flushSync took too long (10s)")}}Fo.exports=Ur});var Jr=E((J_,Vo)=>{"use strict";var{createRequire:wd}=require("module"),md=Lr(),{join:Hr,isAbsolute:_d,sep:Sd}=require("path"),Ed=$r(),Kr=Br(),Rd=Uo();function Ad(e){Kr.register(e,Td),Kr.registerBeforeExit(e,Od),e.on("close",function(){Kr.unregister(e)})}function xd(e,t,r){let n=new Rd({filename:e,workerData:t,workerOpts:r});n.on("ready",i),n.on("close",function(){process.removeListener("exit",o)}),process.on("exit",o);function i(){process.removeListener("exit",o),n.unref(),r.autoEnd!==!1&&Ad(n)}function o(){n.closed||(n.flushSync(),Ed(100),n.end())}return n}function Td(e){e.ref(),e.flushSync(),e.end(),e.once("close",function(){e.unref()})}function Od(e){e.flushSync()}function vd(e){let{pipeline:t,targets:r,levels:n,dedupe:i,worker:o={},caller:s=md()}=e,f={...e.options},c=typeof s=="string"?[s]:s,u="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{},a=e.target;if(a&&r)throw new Error("only one of target or targets can be specified");return r?(a=u["pino-worker"]||Hr(__dirname,"worker.js"),f.targets=r.filter(p=>p.target).map(p=>({...p,target:d(p.target)})),f.pipelines=r.filter(p=>p.pipeline).map(p=>p.pipeline.map(l=>({...l,level:p.level,target:d(l.target)})))):t&&(a=u["pino-worker"]||Hr(__dirname,"worker.js"),f.pipelines=[t.map(p=>({...p,target:d(p.target)}))]),n&&(f.levels=n),i&&(f.dedupe=i),f.pinoWillSendConfig=!0,xd(d(a),f,o);function d(p){if(p=u[p]||p,_d(p)||p.indexOf("file://")===0)return p;if(p==="pino/file")return Hr(__dirname,"..","file.js");let l;for(let h of c)try{let y=h==="node:repl"?process.cwd()+Sd:h;l=wd(y).resolve(p);break}catch{continue}if(!l)throw new Error(`unable to determine transport target for "${p}"`);return l}}Vo.exports=vd});var jt=E((Y_,ts)=>{"use strict";var Go=_o(),{mapHttpRequest:Ld,mapHttpResponse:kd}=vr(),Xr=vo(),zo=Br(),{lsCacheSym:Id,chindingsSym:Jo,writeSym:Ho,serializersSym:Yo,formatOptsSym:Ko,endSym:Dd,stringifiersSym:Xo,stringifySym:Qo,stringifySafeSym:Qr,wildcardFirstSym:Zo,nestedKeySym:Pd,formattersSym:es,messageKeySym:qd,errorKeySym:jd,nestedKeyStrSym:Nd,msgPrefixSym:Pt}=Me(),{isMainThread:Md}=require("worker_threads"),$d=Jr();function Ce(){}function Cd(e,t){if(!t)return r;return function(...i){t.call(this,i,r,e)};function r(n,...i){if(typeof n=="object"){let o=n;n!==null&&(n.method&&n.headers&&n.socket?n=Ld(n):typeof n.setHeader=="function"&&(n=kd(n)));let s;o===null&&i.length===0?s=[null]:(o=i.shift(),s=i),typeof this[Pt]=="string"&&o!==void 0&&o!==null&&(o=this[Pt]+o),this[Ho](n,Go(o,s,this[Ko]),e)}else{let o=n===void 0?i.shift():n;typeof this[Pt]=="string"&&o!==void 0&&o!==null&&(o=this[Pt]+o),this[Ho](null,Go(o,i,this[Ko]),e)}}}function Yr(e){let t="",r=0,n=!1,i=255,o=e.length;if(o>100)return JSON.stringify(e);for(var s=0;s<o&&i>=32;s++)i=e.charCodeAt(s),(i===34||i===92)&&(t+=e.slice(r,s)+"\\",r=s,n=!0);return n?t+=e.slice(r):t=e,i<32?JSON.stringify(e):'"'+t+'"'}function Wd(e,t,r,n){let i=this[Qo],o=this[Qr],s=this[Xo],f=this[Dd],c=this[Jo],u=this[Yo],a=this[es],d=this[qd],p=this[jd],l=this[Id][r]+n;l=l+c;let h;a.log&&(e=a.log(e));let y=s[Zo],g="";for(let w in e)if(h=e[w],Object.prototype.hasOwnProperty.call(e,w)&&h!==void 0){u[w]?h=u[w](h):w===p&&u.err&&(h=u.err(h));let S=s[w]||y;switch(typeof h){case"undefined":case"function":continue;case"number":Number.isFinite(h)===!1&&(h=null);case"boolean":S&&(h=S(h));break;case"string":h=(S||Yr)(h);break;default:h=(S||i)(h,o)}if(h===void 0)continue;let _=Yr(w);g+=","+_+":"+h}let m="";if(t!==void 0){h=u[d]?u[d](t):t;let w=s[d]||y;switch(typeof h){case"function":break;case"number":Number.isFinite(h)===!1&&(h=null);case"boolean":w&&(h=w(h)),m=',"'+d+'":'+h;break;case"string":h=(w||Yr)(h),m=',"'+d+'":'+h;break;default:h=(w||i)(h,o),m=',"'+d+'":'+h}}return this[Pd]&&g?l+this[Nd]+g.slice(1)+"}"+m+f:l+g+m+f}function Bd(e,t){let r,n=e[Jo],i=e[Qo],o=e[Qr],s=e[Xo],f=s[Zo],c=e[Yo],u=e[es].bindings;t=u(t);for(let a in t)if(r=t[a],(a!=="level"&&a!=="serializers"&&a!=="formatters"&&a!=="customLevels"&&t.hasOwnProperty(a)&&r!==void 0)===!0){if(r=c[a]?c[a](r):r,r=(s[a]||f||i)(r,o),r===void 0)continue;n+=',"'+a+'":'+r}return n}function Fd(e){return e.write!==e.constructor.prototype.write}var Ud=process.env.NODE_V8_COVERAGE||process.env.V8_COVERAGE;function qt(e){let t=new Xr(e);return t.on("error",r),!Ud&&!e.sync&&Md&&(zo.register(t,Vd),t.on("close",function(){zo.unregister(t)})),t;function r(n){if(n.code==="EPIPE"){t.write=Ce,t.end=Ce,t.flushSync=Ce,t.destroy=Ce;return}t.removeListener("error",r),t.emit("error",n)}}function Vd(e,t){e.destroyed||(t==="beforeExit"?(e.flush(),e.on("drain",function(){e.end()})):e.flushSync())}function Gd(e){return function(r,n,i={},o){if(typeof i=="string")o=qt({dest:i}),i={};else if(typeof o=="string"){if(i&&i.transport)throw Error("only one of option.transport or stream can be specified");o=qt({dest:o})}else if(i instanceof Xr||i.writable||i._writableState)o=i,i={};else if(i.transport){if(i.transport instanceof Xr||i.transport.writable||i.transport._writableState)throw Error("option.transport do not allow stream, please pass to option directly. e.g. pino(transport)");if(i.transport.targets&&i.transport.targets.length&&i.formatters&&typeof i.formatters.level=="function")throw Error("option.transport.targets do not allow custom level formatters");let c;i.customLevels&&(c=i.useOnlyCustomLevels?i.customLevels:Object.assign({},i.levels,i.customLevels)),o=$d({caller:n,...i.transport,levels:c})}if(i=Object.assign({},e,i),i.serializers=Object.assign({},e.serializers,i.serializers),i.formatters=Object.assign({},e.formatters,i.formatters),i.prettyPrint)throw new Error("prettyPrint option is no longer supported, see the pino-pretty package (https://github.com/pinojs/pino-pretty)");let{enabled:s,onChild:f}=i;return s===!1&&(i.level="silent"),f||(i.onChild=Ce),o||(Fd(process.stdout)?o=process.stdout:o=qt({fd:process.stdout.fd||1})),{opts:i,stream:o}}}function zd(e,t){try{return JSON.stringify(e)}catch{try{return(t||this[Qr])(e)}catch{return'"[unable to serialize, circular reference is too complex to analyze]"'}}}function Hd(e,t,r){return{level:e,bindings:t,log:r}}function Kd(e){let t=Number(e);return typeof e=="string"&&Number.isFinite(t)?t:e===void 0?1:e}ts.exports={noop:Ce,buildSafeSonicBoom:qt,asChindings:Bd,asJson:Wd,genLog:Cd,createArgsNormalizer:Gd,stringify:zd,buildFormatters:Hd,normalizeDestFileDescriptor:Kd}});var Nt=E((X_,rs)=>{var Jd={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},Yd={ASC:"ASC",DESC:"DESC"};rs.exports={DEFAULT_LEVELS:Jd,SORTING_ORDER:Yd}});var tn=E((Q_,ss)=>{"use strict";var{lsCacheSym:Xd,levelValSym:Zr,useOnlyCustomLevelsSym:Qd,streamSym:Zd,formattersSym:eh,hooksSym:th,levelCompSym:ns}=Me(),{noop:rh,genLog:Ee}=jt(),{DEFAULT_LEVELS:ne,SORTING_ORDER:is}=Nt(),os={fatal:e=>{let t=Ee(ne.fatal,e);return function(...r){let n=this[Zd];if(t.call(this,...r),typeof n.flushSync=="function")try{n.flushSync()}catch{}}},error:e=>Ee(ne.error,e),warn:e=>Ee(ne.warn,e),info:e=>Ee(ne.info,e),debug:e=>Ee(ne.debug,e),trace:e=>Ee(ne.trace,e)},en=Object.keys(ne).reduce((e,t)=>(e[ne[t]]=t,e),{}),nh=Object.keys(en).reduce((e,t)=>(e[t]='{"level":'+Number(t),e),{});function ih(e){let t=e[eh].level,{labels:r}=e.levels,n={};for(let i in r){let o=t(r[i],Number(i));n[i]=JSON.stringify(o).slice(0,-1)}return e[Xd]=n,e}function oh(e,t){if(t)return!1;switch(e){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function sh(e){let{labels:t,values:r}=this.levels;if(typeof e=="number"){if(t[e]===void 0)throw Error("unknown level value"+e);e=t[e]}if(r[e]===void 0)throw Error("unknown level "+e);let n=this[Zr],i=this[Zr]=r[e],o=this[Qd],s=this[ns],f=this[th].logMethod;for(let c in r){if(s(r[c],i)===!1){this[c]=rh;continue}this[c]=oh(c,o)?os[c](f):Ee(r[c],f)}this.emit("level-change",e,i,t[n],n,this)}function lh(e){let{levels:t,levelVal:r}=this;return t&&t.labels?t.labels[r]:""}function fh(e){let{values:t}=this.levels,r=t[e];return r!==void 0&&this[ns](r,this[Zr])}function uh(e,t,r){return e===is.DESC?t<=r:t>=r}function ah(e){return typeof e=="string"?uh.bind(null,e):e}function ch(e=null,t=!1){let r=e?Object.keys(e).reduce((o,s)=>(o[e[s]]=s,o),{}):null,n=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),t?null:en,r),i=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),t?null:ne,e);return{labels:n,values:i}}function dh(e,t,r){if(typeof e=="number"){if(![].concat(Object.keys(t||{}).map(o=>t[o]),r?[]:Object.keys(en).map(o=>+o),1/0).includes(e))throw Error(`default level:${e} must be included in custom levels`);return}let n=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),r?null:ne,t);if(!(e in n))throw Error(`default level:${e} must be included in custom levels`)}function hh(e,t){let{labels:r,values:n}=e;for(let i in t){if(i in n)throw Error("levels cannot be overridden");if(t[i]in r)throw Error("pre-existing level values cannot be used for new levels")}}function ph(e){if(typeof e!="function"&&!(typeof e=="string"&&Object.values(is).includes(e)))throw new Error('Levels comparison should be one of "ASC", "DESC" or "function" type')}ss.exports={initialLsCache:nh,genLsCache:ih,levelMethods:os,getLevel:lh,setLevel:sh,isLevelEnabled:fh,mappings:ch,assertNoLevelCollisions:hh,assertDefaultLevelFound:dh,genLevelComparison:ah,assertLevelComparison:ph}});var rn=E((Z_,ls)=>{"use strict";ls.exports={version:"9.2.0"}});var ws=E((tS,gs)=>{"use strict";var{EventEmitter:yh}=require("events"),{lsCacheSym:bh,levelValSym:gh,setLevelSym:on,getLevelSym:fs,chindingsSym:sn,parsedChindingsSym:wh,mixinSym:mh,asJsonSym:hs,writeSym:_h,mixinMergeStrategySym:Sh,timeSym:Eh,timeSliceIndexSym:Rh,streamSym:ps,serializersSym:Re,formattersSym:nn,errorKeySym:Ah,messageKeySym:xh,useOnlyCustomLevelsSym:Th,needsMetadataGsym:Oh,redactFmtSym:vh,stringifySym:Lh,formatOptsSym:kh,stringifiersSym:Ih,msgPrefixSym:us}=Me(),{getLevel:Dh,setLevel:Ph,isLevelEnabled:qh,mappings:jh,initialLsCache:Nh,genLsCache:Mh,assertNoLevelCollisions:$h}=tn(),{asChindings:ys,asJson:Ch,buildFormatters:as,stringify:cs}=jt(),{version:Wh}=rn(),Bh=Nr(),Fh=class{},bs={constructor:Fh,child:Uh,bindings:Vh,setBindings:Gh,flush:Jh,isLevelEnabled:qh,version:Wh,get level(){return this[fs]()},set level(e){this[on](e)},get levelVal(){return this[gh]},set levelVal(e){throw Error("levelVal is read-only")},[bh]:Nh,[_h]:Hh,[hs]:Ch,[fs]:Dh,[on]:Ph};Object.setPrototypeOf(bs,yh.prototype);gs.exports=function(){return Object.create(bs)};var ds=e=>e;function Uh(e,t){if(!e)throw Error("missing bindings for child Pino");t=t||{};let r=this[Re],n=this[nn],i=Object.create(this);if(t.hasOwnProperty("serializers")===!0){i[Re]=Object.create(null);for(let a in r)i[Re][a]=r[a];let c=Object.getOwnPropertySymbols(r);for(var o=0;o<c.length;o++){let a=c[o];i[Re][a]=r[a]}for(let a in t.serializers)i[Re][a]=t.serializers[a];let u=Object.getOwnPropertySymbols(t.serializers);for(var s=0;s<u.length;s++){let a=u[s];i[Re][a]=t.serializers[a]}}else i[Re]=r;if(t.hasOwnProperty("formatters")){let{level:c,bindings:u,log:a}=t.formatters;i[nn]=as(c||n.level,u||ds,a||n.log)}else i[nn]=as(n.level,ds,n.log);if(t.hasOwnProperty("customLevels")===!0&&($h(this.levels,t.customLevels),i.levels=jh(t.customLevels,i[Th]),Mh(i)),typeof t.redact=="object"&&t.redact!==null||Array.isArray(t.redact)){i.redact=t.redact;let c=Bh(i.redact,cs),u={stringify:c[vh]};i[Lh]=cs,i[Ih]=c,i[kh]=u}typeof t.msgPrefix=="string"&&(i[us]=(this[us]||"")+t.msgPrefix),i[sn]=ys(i,e);let f=t.level||this.level;return i[on](f),this.onChild(i),i}function Vh(){let t=`{${this[sn].substr(1)}}`,r=JSON.parse(t);return delete r.pid,delete r.hostname,r}function Gh(e){let t=ys(this,e);this[sn]=t,delete this[wh]}function zh(e,t){return Object.assign(t,e)}function Hh(e,t,r){let n=this[Eh](),i=this[mh],o=this[Ah],s=this[xh],f=this[Sh]||zh,c;e==null?c={}:e instanceof Error?(c={[o]:e},t===void 0&&(t=e.message)):(c=e,t===void 0&&e[s]===void 0&&e[o]&&(t=e[o].message)),i&&(c=f(c,i(c,r,this)));let u=this[hs](c,t,r,n),a=this[ps];a[Oh]===!0&&(a.lastLevel=r,a.lastObj=c,a.lastMsg=t,a.lastTime=n.slice(this[Rh]),a.lastLogger=this),a.write(u)}function Kh(){}function Jh(e){if(e!=null&&typeof e!="function")throw Error("callback must be a function");let t=this[ps];typeof t.flush=="function"?t.flush(e||Kh):e&&e()}});var Rs=E((an,Es)=>{"use strict";var{hasOwnProperty:Mt}=Object.prototype,xe=un();xe.configure=un;xe.stringify=xe;xe.default=xe;an.stringify=xe;an.configure=un;Es.exports=xe;var Yh=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function pe(e){return e.length<5e3&&!Yh.test(e)?`"${e}"`:JSON.stringify(e)}function ln(e){if(e.length>200)return e.sort();for(let t=1;t<e.length;t++){let r=e[t],n=t;for(;n!==0&&e[n-1]>r;)e[n]=e[n-1],n--;e[n]=r}return e}var Xh=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function fn(e){return Xh.call(e)!==void 0&&e.length!==0}function ms(e,t,r){e.length<r&&(r=e.length);let n=t===","?"":" ",i=`"0":${n}${e[0]}`;for(let o=1;o<r;o++)i+=`${t}"${o}":${n}${e[o]}`;return i}function Qh(e){if(Mt.call(e,"circularValue")){let t=e.circularValue;if(typeof t=="string")return`"${t}"`;if(t==null)return t;if(t===Error||t===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function _s(e,t){let r;if(Mt.call(e,t)&&(r=e[t],typeof r!="boolean"))throw new TypeError(`The "${t}" argument must be of type boolean`);return r===void 0?!0:r}function Ss(e,t){let r;if(Mt.call(e,t)){if(r=e[t],typeof r!="number")throw new TypeError(`The "${t}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${t}" argument must be an integer`);if(r<1)throw new RangeError(`The "${t}" argument must be >= 1`)}return r===void 0?1/0:r}function Ae(e){return e===1?"1 item":`${e} items`}function Zh(e){let t=new Set;for(let r of e)(typeof r=="string"||typeof r=="number")&&t.add(String(r));return t}function ep(e){if(Mt.call(e,"strict")){let t=e.strict;if(typeof t!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(t)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function un(e){e={...e};let t=ep(e);t&&(e.bigint===void 0&&(e.bigint=!1),"circularValue"in e||(e.circularValue=Error));let r=Qh(e),n=_s(e,"bigint"),i=_s(e,"deterministic"),o=Ss(e,"maximumDepth"),s=Ss(e,"maximumBreadth");function f(p,l,h,y,g,m){let w=l[p];switch(typeof w=="object"&&w!==null&&typeof w.toJSON=="function"&&(w=w.toJSON(p)),w=y.call(l,p,w),typeof w){case"string":return pe(w);case"object":{if(w===null)return"null";if(h.indexOf(w)!==-1)return r;let S="",_=",",R=m;if(Array.isArray(w)){if(w.length===0)return"[]";if(o<h.length+1)return'"[Array]"';h.push(w),g!==""&&(m+=g,S+=`
${m}`,_=`,
${m}`);let N=Math.min(w.length,s),F=0;for(;F<N-1;F++){let Ne=f(String(F),w,h,y,g,m);S+=Ne!==void 0?Ne:"null",S+=_}let M=f(String(F),w,h,y,g,m);if(S+=M!==void 0?M:"null",w.length-1>s){let Ne=w.length-s-1;S+=`${_}"... ${Ae(Ne)} not stringified"`}return g!==""&&(S+=`
${R}`),h.pop(),`[${S}]`}let A=Object.keys(w),v=A.length;if(v===0)return"{}";if(o<h.length+1)return'"[Object]"';let x="",T="";g!==""&&(m+=g,_=`,
${m}`,x=" ");let I=Math.min(v,s);i&&!fn(w)&&(A=ln(A)),h.push(w);for(let N=0;N<I;N++){let F=A[N],M=f(F,w,h,y,g,m);M!==void 0&&(S+=`${T}${pe(F)}:${x}${M}`,T=_)}if(v>s){let N=v-s;S+=`${T}"...":${x}"${Ae(N)} not stringified"`,T=_}return g!==""&&T.length>1&&(S=`
${m}${S}
${R}`),h.pop(),`{${S}}`}case"number":return isFinite(w)?String(w):t?t(w):"null";case"boolean":return w===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(w);default:return t?t(w):void 0}}function c(p,l,h,y,g,m){switch(typeof l=="object"&&l!==null&&typeof l.toJSON=="function"&&(l=l.toJSON(p)),typeof l){case"string":return pe(l);case"object":{if(l===null)return"null";if(h.indexOf(l)!==-1)return r;let w=m,S="",_=",";if(Array.isArray(l)){if(l.length===0)return"[]";if(o<h.length+1)return'"[Array]"';h.push(l),g!==""&&(m+=g,S+=`
${m}`,_=`,
${m}`);let v=Math.min(l.length,s),x=0;for(;x<v-1;x++){let I=c(String(x),l[x],h,y,g,m);S+=I!==void 0?I:"null",S+=_}let T=c(String(x),l[x],h,y,g,m);if(S+=T!==void 0?T:"null",l.length-1>s){let I=l.length-s-1;S+=`${_}"... ${Ae(I)} not stringified"`}return g!==""&&(S+=`
${w}`),h.pop(),`[${S}]`}h.push(l);let R="";g!==""&&(m+=g,_=`,
${m}`,R=" ");let A="";for(let v of y){let x=c(v,l[v],h,y,g,m);x!==void 0&&(S+=`${A}${pe(v)}:${R}${x}`,A=_)}return g!==""&&A.length>1&&(S=`
${m}${S}
${w}`),h.pop(),`{${S}}`}case"number":return isFinite(l)?String(l):t?t(l):"null";case"boolean":return l===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(l);default:return t?t(l):void 0}}function u(p,l,h,y,g){switch(typeof l){case"string":return pe(l);case"object":{if(l===null)return"null";if(typeof l.toJSON=="function"){if(l=l.toJSON(p),typeof l!="object")return u(p,l,h,y,g);if(l===null)return"null"}if(h.indexOf(l)!==-1)return r;let m=g;if(Array.isArray(l)){if(l.length===0)return"[]";if(o<h.length+1)return'"[Array]"';h.push(l),g+=y;let x=`
${g}`,T=`,
${g}`,I=Math.min(l.length,s),N=0;for(;N<I-1;N++){let M=u(String(N),l[N],h,y,g);x+=M!==void 0?M:"null",x+=T}let F=u(String(N),l[N],h,y,g);if(x+=F!==void 0?F:"null",l.length-1>s){let M=l.length-s-1;x+=`${T}"... ${Ae(M)} not stringified"`}return x+=`
${m}`,h.pop(),`[${x}]`}let w=Object.keys(l),S=w.length;if(S===0)return"{}";if(o<h.length+1)return'"[Object]"';g+=y;let _=`,
${g}`,R="",A="",v=Math.min(S,s);fn(l)&&(R+=ms(l,_,s),w=w.slice(l.length),v-=l.length,A=_),i&&(w=ln(w)),h.push(l);for(let x=0;x<v;x++){let T=w[x],I=u(T,l[T],h,y,g);I!==void 0&&(R+=`${A}${pe(T)}: ${I}`,A=_)}if(S>s){let x=S-s;R+=`${A}"...": "${Ae(x)} not stringified"`,A=_}return A!==""&&(R=`
${g}${R}
${m}`),h.pop(),`{${R}}`}case"number":return isFinite(l)?String(l):t?t(l):"null";case"boolean":return l===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(l);default:return t?t(l):void 0}}function a(p,l,h){switch(typeof l){case"string":return pe(l);case"object":{if(l===null)return"null";if(typeof l.toJSON=="function"){if(l=l.toJSON(p),typeof l!="object")return a(p,l,h);if(l===null)return"null"}if(h.indexOf(l)!==-1)return r;let y="";if(Array.isArray(l)){if(l.length===0)return"[]";if(o<h.length+1)return'"[Array]"';h.push(l);let _=Math.min(l.length,s),R=0;for(;R<_-1;R++){let v=a(String(R),l[R],h);y+=v!==void 0?v:"null",y+=","}let A=a(String(R),l[R],h);if(y+=A!==void 0?A:"null",l.length-1>s){let v=l.length-s-1;y+=`,"... ${Ae(v)} not stringified"`}return h.pop(),`[${y}]`}let g=Object.keys(l),m=g.length;if(m===0)return"{}";if(o<h.length+1)return'"[Object]"';let w="",S=Math.min(m,s);fn(l)&&(y+=ms(l,",",s),g=g.slice(l.length),S-=l.length,w=","),i&&(g=ln(g)),h.push(l);for(let _=0;_<S;_++){let R=g[_],A=a(R,l[R],h);A!==void 0&&(y+=`${w}${pe(R)}:${A}`,w=",")}if(m>s){let _=m-s;y+=`${w}"...":"${Ae(_)} not stringified"`}return h.pop(),`{${y}}`}case"number":return isFinite(l)?String(l):t?t(l):"null";case"boolean":return l===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(l);default:return t?t(l):void 0}}function d(p,l,h){if(arguments.length>1){let y="";if(typeof h=="number"?y=" ".repeat(Math.min(h,10)):typeof h=="string"&&(y=h.slice(0,10)),l!=null){if(typeof l=="function")return f("",{"":p},[],l,y,"");if(Array.isArray(l))return c("",p,[],Zh(l),y,"")}if(y.length!==0)return u("",p,[],y,"")}return a("",p,[])}return d}});var Ts=E((rS,xs)=>{"use strict";var cn=Symbol.for("pino.metadata"),{DEFAULT_LEVELS:As}=Nt(),tp=As.info;function rp(e,t){let r=0;e=e||[],t=t||{dedupe:!1};let n=Object.create(As);n.silent=1/0,t.levels&&typeof t.levels=="object"&&Object.keys(t.levels).forEach(d=>{n[d]=t.levels[d]});let i={write:o,add:c,emit:s,flushSync:f,end:u,minLevel:0,streams:[],clone:a,[cn]:!0,streamLevels:n};return Array.isArray(e)?e.forEach(c,i):c.call(i,e),e=null,i;function o(d){let p,l=this.lastLevel,{streams:h}=this,y=0,g;for(let m=ip(h.length,t.dedupe);sp(m,h.length,t.dedupe);m=op(m,t.dedupe))if(p=h[m],p.level<=l){if(y!==0&&y!==p.level)break;if(g=p.stream,g[cn]){let{lastTime:w,lastMsg:S,lastObj:_,lastLogger:R}=this;g.lastLevel=l,g.lastTime=w,g.lastMsg=S,g.lastObj=_,g.lastLogger=R}g.write(d),t.dedupe&&(y=p.level)}else if(!t.dedupe)break}function s(...d){for(let{stream:p}of this.streams)typeof p.emit=="function"&&p.emit(...d)}function f(){for(let{stream:d}of this.streams)typeof d.flushSync=="function"&&d.flushSync()}function c(d){if(!d)return i;let p=typeof d.write=="function"||d.stream,l=d.write?d:d.stream;if(!p)throw Error("stream object needs to implement either StreamEntry or DestinationStream interface");let{streams:h,streamLevels:y}=this,g;typeof d.levelVal=="number"?g=d.levelVal:typeof d.level=="string"?g=y[d.level]:typeof d.level=="number"?g=d.level:g=tp;let m={stream:l,level:g,levelVal:void 0,id:r++};return h.unshift(m),h.sort(np),this.minLevel=h[0].level,i}function u(){for(let{stream:d}of this.streams)typeof d.flushSync=="function"&&d.flushSync(),d.end()}function a(d){let p=new Array(this.streams.length);for(let l=0;l<p.length;l++)p[l]={level:d,stream:this.streams[l].stream};return{write:o,add:c,minLevel:d,streams:p,clone:a,emit:s,flushSync:f,[cn]:!0}}}function np(e,t){return e.level-t.level}function ip(e,t){return t?e-1:0}function op(e,t){return t?e-1:e+1}function sp(e,t,r){return r?e>=0:e<t}xs.exports=rp});var Cs=E((nS,H)=>{function $t(e){try{return require("path").join(`${process.cwd()}${require("path").sep}build`.replace(/\\/g,"/"),e)}catch{return new Function("p","return new URL(p, import.meta.url).pathname")(e)}}globalThis.__bundlerPathsOverrides={...globalThis.__bundlerPathsOverrides||{},"thread-stream-worker":$t("./thread-stream-worker.js"),"pino-worker":$t("./pino-worker.js"),"pino/file":$t("./pino-file.js"),"pino-pretty":$t("./pino-pretty.js")};var lp=require("os"),qs=vr(),fp=Lr(),up=Nr(),js=wo(),ap=ws(),Ns=Me(),{configure:cp}=Rs(),{assertDefaultLevelFound:dp,mappings:Ms,genLsCache:hp,genLevelComparison:pp,assertLevelComparison:yp}=tn(),{DEFAULT_LEVELS:bp,SORTING_ORDER:gp}=Nt(),{createArgsNormalizer:wp,asChindings:mp,buildSafeSonicBoom:Os,buildFormatters:_p,stringify:dn,normalizeDestFileDescriptor:vs,noop:Sp}=jt(),{version:Ep}=rn(),{chindingsSym:Ls,redactFmtSym:Rp,serializersSym:ks,timeSym:Ap,timeSliceIndexSym:xp,streamSym:Tp,stringifySym:Is,stringifySafeSym:hn,stringifiersSym:Ds,setLevelSym:Op,endSym:vp,formatOptsSym:Lp,messageKeySym:kp,errorKeySym:Ip,nestedKeySym:Dp,mixinSym:Pp,levelCompSym:qp,useOnlyCustomLevelsSym:jp,formattersSym:Ps,hooksSym:Np,nestedKeyStrSym:Mp,mixinMergeStrategySym:$p,msgPrefixSym:Cp}=Ns,{epochTime:$s,nullTime:Wp}=js,{pid:Bp}=process,Fp=lp.hostname(),Up=qs.err,Vp={level:"info",levelComparison:gp.ASC,levels:bp,messageKey:"msg",errorKey:"err",nestedKey:null,enabled:!0,base:{pid:Bp,hostname:Fp},serializers:Object.assign(Object.create(null),{err:Up}),formatters:Object.assign(Object.create(null),{bindings(e){return e},level(e,t){return{level:t}}}),hooks:{logMethod:void 0},timestamp:$s,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1,depthLimit:5,edgeLimit:100},Gp=wp(Vp),zp=Object.assign(Object.create(null),qs);function pn(...e){let t={},{opts:r,stream:n}=Gp(t,fp(),...e),{redact:i,crlf:o,serializers:s,timestamp:f,messageKey:c,errorKey:u,nestedKey:a,base:d,name:p,level:l,customLevels:h,levelComparison:y,mixin:g,mixinMergeStrategy:m,useOnlyCustomLevels:w,formatters:S,hooks:_,depthLimit:R,edgeLimit:A,onChild:v,msgPrefix:x}=r,T=cp({maximumDepth:R,maximumBreadth:A}),I=_p(S.level,S.bindings,S.log),N=dn.bind({[hn]:T}),F=i?up(i,N):{},M=i?{stringify:F[Rp]}:{stringify:N},Ne="}"+(o?`\r
`:`
`),xi=mp.bind(null,{[Ls]:"",[ks]:s,[Ds]:F,[Is]:dn,[hn]:T,[Ps]:I}),wr="";d!==null&&(p===void 0?wr=xi(d):wr=xi(Object.assign({},d,{name:p})));let Ti=f instanceof Function?f:f?$s:Wp,ra=Ti().indexOf(":")+1;if(w&&!h)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(g&&typeof g!="function")throw Error(`Unknown mixin type "${typeof g}" - expected "function"`);if(x&&typeof x!="string")throw Error(`Unknown msgPrefix type "${typeof x}" - expected "string"`);dp(l,h,w);let Oi=Ms(h,w);typeof n.emit=="function"&&n.emit("message",{code:"PINO_CONFIG",config:{levels:Oi,messageKey:c,errorKey:u}}),yp(y);let na=pp(y);return Object.assign(t,{levels:Oi,[qp]:na,[jp]:w,[Tp]:n,[Ap]:Ti,[xp]:ra,[Is]:dn,[hn]:T,[Ds]:F,[vp]:Ne,[Lp]:M,[kp]:c,[Ip]:u,[Dp]:a,[Mp]:a?`,${JSON.stringify(a)}:{`:"",[ks]:s,[Pp]:g,[$p]:m,[Ls]:wr,[Ps]:I,[Np]:_,silent:Sp,onChild:v,[Cp]:x}),Object.setPrototypeOf(t,ap()),hp(t),t[Op](l),t}H.exports=pn;H.exports.destination=(e=process.stdout.fd)=>typeof e=="object"?(e.dest=vs(e.dest||process.stdout.fd),Os(e)):Os({dest:vs(e),minLength:0});H.exports.transport=Jr();H.exports.multistream=Ts();H.exports.levels=Ms();H.exports.stdSerializers=zp;H.exports.stdTimeFunctions=Object.assign({},js);H.exports.symbols=Ns;H.exports.version=Ep;H.exports.default=pn;H.exports.pino=pn});var Us=E((iS,Fs)=>{"use strict";var{Transform:Hp}=require("stream"),{StringDecoder:Kp}=require("string_decoder"),ye=Symbol("last"),Ct=Symbol("decoder");function Jp(e,t,r){let n;if(this.overflow){if(n=this[Ct].write(e).split(this.matcher),n.length===1)return r();n.shift(),this.overflow=!1}else this[ye]+=this[Ct].write(e),n=this[ye].split(this.matcher);this[ye]=n.pop();for(let i=0;i<n.length;i++)try{Bs(this,this.mapper(n[i]))}catch(o){return r(o)}if(this.overflow=this[ye].length>this.maxLength,this.overflow&&!this.skipOverflow){r(new Error("maximum buffer reached"));return}r()}function Yp(e){if(this[ye]+=this[Ct].end(),this[ye])try{Bs(this,this.mapper(this[ye]))}catch(t){return e(t)}e()}function Bs(e,t){t!==void 0&&e.push(t)}function Ws(e){return e}function Xp(e,t,r){switch(e=e||/\r?\n/,t=t||Ws,r=r||{},arguments.length){case 1:typeof e=="function"?(t=e,e=/\r?\n/):typeof e=="object"&&!(e instanceof RegExp)&&!e[Symbol.split]&&(r=e,e=/\r?\n/);break;case 2:typeof e=="function"?(r=t,t=e,e=/\r?\n/):typeof t=="object"&&(r=t,t=Ws)}r=Object.assign({},r),r.autoDestroy=!0,r.transform=Jp,r.flush=Yp,r.readableObjectMode=!0;let n=new Hp(r);return n[ye]="",n[Ct]=new Kp("utf8"),n.matcher=e,n.mapper=t,n.maxLength=r.maxLength,n.skipOverflow=r.skipOverflow||!1,n.overflow=!1,n._destroy=function(i,o){this._writableState.errorEmitted=!1,o(i)},n}Fs.exports=Xp});var q=E((oS,Vs)=>{"use strict";Vs.exports={ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,r){return e.slice(t,r)},Error,FunctionPrototypeCall(e,t,...r){return e.call(t,...r)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,r){return Object.defineProperty(e,t,r)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,r){return e.then(t,r)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,r){return e.slice(t,r)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,r){return e.set(t,r)},Boolean,Uint8Array}});var el=E((ot,it)=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});var Ys=new WeakMap,yn=new WeakMap;function D(e){let t=Ys.get(e);return console.assert(t!=null,"'this' is expected an Event object, but got",e),t}function Gs(e){if(e.passiveListener!=null){typeof console<"u"&&typeof console.error=="function"&&console.error("Unable to preventDefault inside passive event listener invocation.",e.passiveListener);return}e.event.cancelable&&(e.canceled=!0,typeof e.event.preventDefault=="function"&&e.event.preventDefault())}function We(e,t){Ys.set(this,{eventTarget:e,event:t,eventPhase:2,currentTarget:e,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:t.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let r=Object.keys(t);for(let n=0;n<r.length;++n){let i=r[n];i in this||Object.defineProperty(this,i,Xs(i))}}We.prototype={get type(){return D(this).event.type},get target(){return D(this).eventTarget},get currentTarget(){return D(this).currentTarget},composedPath(){let e=D(this).currentTarget;return e==null?[]:[e]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return D(this).eventPhase},stopPropagation(){let e=D(this);e.stopped=!0,typeof e.event.stopPropagation=="function"&&e.event.stopPropagation()},stopImmediatePropagation(){let e=D(this);e.stopped=!0,e.immediateStopped=!0,typeof e.event.stopImmediatePropagation=="function"&&e.event.stopImmediatePropagation()},get bubbles(){return!!D(this).event.bubbles},get cancelable(){return!!D(this).event.cancelable},preventDefault(){Gs(D(this))},get defaultPrevented(){return D(this).canceled},get composed(){return!!D(this).event.composed},get timeStamp(){return D(this).timeStamp},get srcElement(){return D(this).eventTarget},get cancelBubble(){return D(this).stopped},set cancelBubble(e){if(!e)return;let t=D(this);t.stopped=!0,typeof t.event.cancelBubble=="boolean"&&(t.event.cancelBubble=!0)},get returnValue(){return!D(this).canceled},set returnValue(e){e||Gs(D(this))},initEvent(){}};Object.defineProperty(We.prototype,"constructor",{value:We,configurable:!0,writable:!0});typeof window<"u"&&typeof window.Event<"u"&&(Object.setPrototypeOf(We.prototype,window.Event.prototype),yn.set(window.Event.prototype,We));function Xs(e){return{get(){return D(this).event[e]},set(t){D(this).event[e]=t},configurable:!0,enumerable:!0}}function Qp(e){return{value(){let t=D(this).event;return t[e].apply(t,arguments)},configurable:!0,enumerable:!0}}function Zp(e,t){let r=Object.keys(t);if(r.length===0)return e;function n(i,o){e.call(this,i,o)}n.prototype=Object.create(e.prototype,{constructor:{value:n,configurable:!0,writable:!0}});for(let i=0;i<r.length;++i){let o=r[i];if(!(o in e.prototype)){let f=typeof Object.getOwnPropertyDescriptor(t,o).value=="function";Object.defineProperty(n.prototype,o,f?Qp(o):Xs(o))}}return n}function Qs(e){if(e==null||e===Object.prototype)return We;let t=yn.get(e);return t==null&&(t=Zp(Qs(Object.getPrototypeOf(e)),e),yn.set(e,t)),t}function ey(e,t){let r=Qs(Object.getPrototypeOf(t));return new r(e,t)}function ty(e){return D(e).immediateStopped}function ry(e,t){D(e).eventPhase=t}function ny(e,t){D(e).currentTarget=t}function zs(e,t){D(e).passiveListener=t}var Zs=new WeakMap,Hs=1,Ks=2,Wt=3;function Bt(e){return e!==null&&typeof e=="object"}function nt(e){let t=Zs.get(e);if(t==null)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return t}function iy(e){return{get(){let r=nt(this).get(e);for(;r!=null;){if(r.listenerType===Wt)return r.listener;r=r.next}return null},set(t){typeof t!="function"&&!Bt(t)&&(t=null);let r=nt(this),n=null,i=r.get(e);for(;i!=null;)i.listenerType===Wt?n!==null?n.next=i.next:i.next!==null?r.set(e,i.next):r.delete(e):n=i,i=i.next;if(t!==null){let o={listener:t,listenerType:Wt,passive:!1,once:!1,next:null};n===null?r.set(e,o):n.next=o}},configurable:!0,enumerable:!0}}function bn(e,t){Object.defineProperty(e,`on${t}`,iy(t))}function Js(e){function t(){Q.call(this)}t.prototype=Object.create(Q.prototype,{constructor:{value:t,configurable:!0,writable:!0}});for(let r=0;r<e.length;++r)bn(t.prototype,e[r]);return t}function Q(){if(this instanceof Q){Zs.set(this,new Map);return}if(arguments.length===1&&Array.isArray(arguments[0]))return Js(arguments[0]);if(arguments.length>0){let e=new Array(arguments.length);for(let t=0;t<arguments.length;++t)e[t]=arguments[t];return Js(e)}throw new TypeError("Cannot call a class as a function")}Q.prototype={addEventListener(e,t,r){if(t==null)return;if(typeof t!="function"&&!Bt(t))throw new TypeError("'listener' should be a function or an object.");let n=nt(this),i=Bt(r),s=(i?!!r.capture:!!r)?Hs:Ks,f={listener:t,listenerType:s,passive:i&&!!r.passive,once:i&&!!r.once,next:null},c=n.get(e);if(c===void 0){n.set(e,f);return}let u=null;for(;c!=null;){if(c.listener===t&&c.listenerType===s)return;u=c,c=c.next}u.next=f},removeEventListener(e,t,r){if(t==null)return;let n=nt(this),o=(Bt(r)?!!r.capture:!!r)?Hs:Ks,s=null,f=n.get(e);for(;f!=null;){if(f.listener===t&&f.listenerType===o){s!==null?s.next=f.next:f.next!==null?n.set(e,f.next):n.delete(e);return}s=f,f=f.next}},dispatchEvent(e){if(e==null||typeof e.type!="string")throw new TypeError('"event.type" should be a string.');let t=nt(this),r=e.type,n=t.get(r);if(n==null)return!0;let i=ey(this,e),o=null;for(;n!=null;){if(n.once?o!==null?o.next=n.next:n.next!==null?t.set(r,n.next):t.delete(r):o=n,zs(i,n.passive?n.listener:null),typeof n.listener=="function")try{n.listener.call(this,i)}catch(s){typeof console<"u"&&typeof console.error=="function"&&console.error(s)}else n.listenerType!==Wt&&typeof n.listener.handleEvent=="function"&&n.listener.handleEvent(i);if(ty(i))break;n=n.next}return zs(i,null),ry(i,0),ny(i,null),!i.defaultPrevented}};Object.defineProperty(Q.prototype,"constructor",{value:Q,configurable:!0,writable:!0});typeof window<"u"&&typeof window.EventTarget<"u"&&Object.setPrototypeOf(Q.prototype,window.EventTarget.prototype);ot.defineEventAttribute=bn;ot.EventTarget=Q;ot.default=Q;it.exports=Q;it.exports.EventTarget=it.exports.default=Q;it.exports.defineEventAttribute=bn});var Be=E((lt,st)=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});var gn=el(),be=class extends gn.EventTarget{constructor(){throw super(),new TypeError("AbortSignal cannot be constructed directly")}get aborted(){let t=Ft.get(this);if(typeof t!="boolean")throw new TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return t}};gn.defineEventAttribute(be.prototype,"abort");function oy(){let e=Object.create(be.prototype);return gn.EventTarget.call(e),Ft.set(e,!1),e}function sy(e){Ft.get(e)===!1&&(Ft.set(e,!0),e.dispatchEvent({type:"abort"}))}var Ft=new WeakMap;Object.defineProperties(be.prototype,{aborted:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(be.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});var ge=class{constructor(){rl.set(this,oy())}get signal(){return tl(this)}abort(){sy(tl(this))}},rl=new WeakMap;function tl(e){let t=rl.get(e);if(t==null)throw new TypeError(`Expected 'this' to be an 'AbortController' object, but got ${e===null?"null":typeof e}`);return t}Object.defineProperties(ge.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(ge.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"});lt.AbortController=ge;lt.AbortSignal=be;lt.default=ge;st.exports=ge;st.exports.AbortController=st.exports.default=ge;st.exports.AbortSignal=be});var U=E((sS,mn)=>{"use strict";var ly=require("buffer"),{kResistStopPropagation:fy,SymbolDispose:uy}=q(),ay=globalThis.AbortSignal||Be().AbortSignal,cy=globalThis.AbortController||Be().AbortController,dy=Object.getPrototypeOf(async function(){}).constructor,nl=globalThis.Blob||ly.Blob,hy=typeof nl<"u"?function(t){return t instanceof nl}:function(t){return!1},il=(e,t)=>{if(e!==void 0&&(e===null||typeof e!="object"||!("aborted"in e)))throw new ERR_INVALID_ARG_TYPE(t,"AbortSignal",e)},py=(e,t)=>{if(typeof e!="function")throw new ERR_INVALID_ARG_TYPE(t,"Function",e)},wn=class extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError(`Expected input to be an Array, got ${typeof t}`);let r="";for(let n=0;n<t.length;n++)r+=`    ${t[n].stack}
`;super(r),this.name="AggregateError",this.errors=t}};mn.exports={AggregateError:wn,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...r){t||(t=!0,e.apply(this,r))}},createDeferredPromise:function(){let e,t;return{promise:new Promise((n,i)=>{e=n,t=i}),resolve:e,reject:t}},promisify(e){return new Promise((t,r)=>{e((n,...i)=>n?r(n):t(...i))})},debuglog(){return function(){}},format(e,...t){return e.replace(/%([sdifj])/g,function(...[r,n]){let i=t.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}},types:{isAsyncFunction(e){return e instanceof dy},isArrayBufferView(e){return ArrayBuffer.isView(e)}},isBlob:hy,deprecate(e,t){return e},addAbortListener:require("events").addAbortListener||function(t,r){if(t===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",t);il(t,"signal"),py(r,"listener");let n;return t.aborted?queueMicrotask(()=>r()):(t.addEventListener("abort",r,{__proto__:null,once:!0,[fy]:!0}),n=()=>{t.removeEventListener("abort",r)}),{__proto__:null,[uy](){var i;(i=n)===null||i===void 0||i()}}},AbortSignalAny:ay.any||function(t){if(t.length===1)return t[0];let r=new cy,n=()=>r.abort();return t.forEach(i=>{il(i,"signals"),i.addEventListener("abort",n,{once:!0})}),r.signal.addEventListener("abort",()=>{t.forEach(i=>i.removeEventListener("abort",n))},{once:!0}),r.signal}};mn.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var G=E((lS,ll)=>{"use strict";var{format:yy,inspect:Ut,AggregateError:by}=U(),gy=globalThis.AggregateError||by,wy=Symbol("kIsNodeError"),my=["string","function","number","object","Function","Object","boolean","bigint","symbol"],_y=/^([A-Z][a-z0-9]*)+$/,Sy="__node_internal_",Vt={};function Te(e,t){if(!e)throw new Vt.ERR_INTERNAL_ASSERTION(t)}function ol(e){let t="",r=e.length,n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function Ey(e,t,r){if(typeof t=="function")return Te(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);let n=(t.match(/%[dfijoOs]/g)||[]).length;return Te(n===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?t:yy(t,...r)}function B(e,t,r){r||(r=Error);class n extends r{constructor(...o){super(Ey(e,t,o))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=e,n.prototype[wy]=!0,Vt[e]=n}function sl(e){let t=Sy+e.name;return Object.defineProperty(e,"name",{value:t}),e}function Ry(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;let r=new gy([t,e],t.message);return r.code=t.code,r}return e||t}var _n=class extends Error{constructor(t="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new Vt.ERR_INVALID_ARG_TYPE("options","Object",r);super(t,r),this.code="ABORT_ERR",this.name="AbortError"}};B("ERR_ASSERTION","%s",Error);B("ERR_INVALID_ARG_TYPE",(e,t,r)=>{Te(typeof e=="string","'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";let i=[],o=[],s=[];for(let c of t)Te(typeof c=="string","All expected entries have to be of type string"),my.includes(c)?i.push(c.toLowerCase()):_y.test(c)?o.push(c):(Te(c!=="object",'The value "object" should be written as "Object"'),s.push(c));if(o.length>0){let c=i.indexOf("object");c!==-1&&(i.splice(i,c,1),o.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let c=i.pop();n+=`one of type ${i.join(", ")}, or ${c}`}}(o.length>0||s.length>0)&&(n+=" or ")}if(o.length>0){switch(o.length){case 1:n+=`an instance of ${o[0]}`;break;case 2:n+=`an instance of ${o[0]} or ${o[1]}`;break;default:{let c=o.pop();n+=`an instance of ${o.join(", ")}, or ${c}`}}s.length>0&&(n+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(n+="an "),n+=`${s[0]}`;break;case 2:n+=`one of ${s[0]} or ${s[1]}`;break;default:{let c=s.pop();n+=`one of ${s.join(", ")}, or ${c}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var f;if((f=r.constructor)!==null&&f!==void 0&&f.name)n+=`. Received an instance of ${r.constructor.name}`;else{let c=Ut(r,{depth:-1});n+=`. Received ${c}`}}else{let c=Ut(r,{colors:!1});c.length>25&&(c=`${c.slice(0,25)}...`),n+=`. Received type ${typeof r} (${c})`}return n},TypeError);B("ERR_INVALID_ARG_VALUE",(e,t,r="is invalid")=>{let n=Ut(t);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${n}`},TypeError);B("ERR_INVALID_RETURN_VALUE",(e,t,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${e} to be returned from the "${t}" function but got ${i}.`},TypeError);B("ERR_MISSING_ARGS",(...e)=>{Te(e.length>0,"At least one arg needs to be specified");let t,r=e.length;switch(e=(Array.isArray(e)?e:[e]).map(n=>`"${n}"`).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{let n=e.pop();t+=`The ${e.join(", ")}, and ${n} arguments`}break}return`${t} must be specified`},TypeError);B("ERR_OUT_OF_RANGE",(e,t,r)=>{Te(t,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=ol(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=ol(n)),n+="n"):n=Ut(r),`The value of "${e}" is out of range. It must be ${t}. Received ${n}`},RangeError);B("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);B("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);B("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);B("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);B("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);B("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);B("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);B("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);B("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);B("ERR_STREAM_WRITE_AFTER_END","write after end",Error);B("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);ll.exports={AbortError:_n,aggregateTwoErrors:sl(Ry),hideStackFrames:sl,codes:Vt}});var Ue=E((fS,gl)=>{"use strict";var{ArrayIsArray:En,ArrayPrototypeIncludes:cl,ArrayPrototypeJoin:dl,ArrayPrototypeMap:Ay,NumberIsInteger:Rn,NumberIsNaN:xy,NumberMAX_SAFE_INTEGER:Ty,NumberMIN_SAFE_INTEGER:Oy,NumberParseInt:vy,ObjectPrototypeHasOwnProperty:Ly,RegExpPrototypeExec:hl,String:ky,StringPrototypeToUpperCase:Iy,StringPrototypeTrim:Dy}=q(),{hideStackFrames:K,codes:{ERR_SOCKET_BAD_PORT:Py,ERR_INVALID_ARG_TYPE:V,ERR_INVALID_ARG_VALUE:Fe,ERR_OUT_OF_RANGE:Oe,ERR_UNKNOWN_SIGNAL:fl}}=G(),{normalizeEncoding:qy}=U(),{isAsyncFunction:jy,isArrayBufferView:Ny}=U().types,ul={};function My(e){return e===(e|0)}function $y(e){return e===e>>>0}var Cy=/^[0-7]+$/,Wy="must be a 32-bit unsigned integer or an octal string";function By(e,t,r){if(typeof e>"u"&&(e=r),typeof e=="string"){if(hl(Cy,e)===null)throw new Fe(t,e,Wy);e=vy(e,8)}return pl(e,t),e}var Fy=K((e,t,r=Oy,n=Ty)=>{if(typeof e!="number")throw new V(t,"number",e);if(!Rn(e))throw new Oe(t,"an integer",e);if(e<r||e>n)throw new Oe(t,`>= ${r} && <= ${n}`,e)}),Uy=K((e,t,r=-2147483648,n=2147483647)=>{if(typeof e!="number")throw new V(t,"number",e);if(!Rn(e))throw new Oe(t,"an integer",e);if(e<r||e>n)throw new Oe(t,`>= ${r} && <= ${n}`,e)}),pl=K((e,t,r=!1)=>{if(typeof e!="number")throw new V(t,"number",e);if(!Rn(e))throw new Oe(t,"an integer",e);let n=r?1:0,i=4294967295;if(e<n||e>i)throw new Oe(t,`>= ${n} && <= ${i}`,e)});function An(e,t){if(typeof e!="string")throw new V(t,"string",e)}function Vy(e,t,r=void 0,n){if(typeof e!="number")throw new V(t,"number",e);if(r!=null&&e<r||n!=null&&e>n||(r!=null||n!=null)&&xy(e))throw new Oe(t,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,e)}var Gy=K((e,t,r)=>{if(!cl(r,e)){let i="must be one of: "+dl(Ay(r,o=>typeof o=="string"?`'${o}'`:ky(o)),", ");throw new Fe(t,e,i)}});function yl(e,t){if(typeof e!="boolean")throw new V(t,"boolean",e)}function Sn(e,t,r){return e==null||!Ly(e,t)?r:e[t]}var zy=K((e,t,r=null)=>{let n=Sn(r,"allowArray",!1),i=Sn(r,"allowFunction",!1);if(!Sn(r,"nullable",!1)&&e===null||!n&&En(e)||typeof e!="object"&&(!i||typeof e!="function"))throw new V(t,"Object",e)}),Hy=K((e,t)=>{if(e!=null&&typeof e!="object"&&typeof e!="function")throw new V(t,"a dictionary",e)}),Gt=K((e,t,r=0)=>{if(!En(e))throw new V(t,"Array",e);if(e.length<r){let n=`must be longer than ${r}`;throw new Fe(t,e,n)}});function Ky(e,t){Gt(e,t);for(let r=0;r<e.length;r++)An(e[r],`${t}[${r}]`)}function Jy(e,t){Gt(e,t);for(let r=0;r<e.length;r++)yl(e[r],`${t}[${r}]`)}function Yy(e,t){Gt(e,t);for(let r=0;r<e.length;r++){let n=e[r],i=`${t}[${r}]`;if(n==null)throw new V(i,"AbortSignal",n);bl(n,i)}}function Xy(e,t="signal"){if(An(e,t),ul[e]===void 0)throw ul[Iy(e)]!==void 0?new fl(e+" (signals must use all capital letters)"):new fl(e)}var Qy=K((e,t="buffer")=>{if(!Ny(e))throw new V(t,["Buffer","TypedArray","DataView"],e)});function Zy(e,t){let r=qy(t),n=e.length;if(r==="hex"&&n%2!==0)throw new Fe("encoding",t,`is invalid for data of length ${n}`)}function eb(e,t="Port",r=!0){if(typeof e!="number"&&typeof e!="string"||typeof e=="string"&&Dy(e).length===0||+e!==+e>>>0||e>65535||e===0&&!r)throw new Py(t,e,r);return e|0}var bl=K((e,t)=>{if(e!==void 0&&(e===null||typeof e!="object"||!("aborted"in e)))throw new V(t,"AbortSignal",e)}),tb=K((e,t)=>{if(typeof e!="function")throw new V(t,"Function",e)}),rb=K((e,t)=>{if(typeof e!="function"||jy(e))throw new V(t,"Function",e)}),nb=K((e,t)=>{if(e!==void 0)throw new V(t,"undefined",e)});function ib(e,t,r){if(!cl(r,e))throw new V(t,`('${dl(r,"|")}')`,e)}var ob=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function al(e,t){if(typeof e>"u"||!hl(ob,e))throw new Fe(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function sb(e){if(typeof e=="string")return al(e,"hints"),e;if(En(e)){let t=e.length,r="";if(t===0)return r;for(let n=0;n<t;n++){let i=e[n];al(i,"hints"),r+=i,n!==t-1&&(r+=", ")}return r}throw new Fe("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}gl.exports={isInt32:My,isUint32:$y,parseFileMode:By,validateArray:Gt,validateStringArray:Ky,validateBooleanArray:Jy,validateAbortSignalArray:Yy,validateBoolean:yl,validateBuffer:Qy,validateDictionary:Hy,validateEncoding:Zy,validateFunction:tb,validateInt32:Uy,validateInteger:Fy,validateNumber:Vy,validateObject:zy,validateOneOf:Gy,validatePlainFunction:rb,validatePort:eb,validateSignalName:Xy,validateString:An,validateUint32:pl,validateUndefined:nb,validateUnion:ib,validateAbortSignal:bl,validateLinkHeaderValue:sb}});var we=E((uS,wl)=>{wl.exports=global.process});var oe=E((aS,Pl)=>{"use strict";var{SymbolAsyncIterator:ml,SymbolIterator:_l,SymbolFor:ve}=q(),Sl=ve("nodejs.stream.destroyed"),El=ve("nodejs.stream.errored"),xn=ve("nodejs.stream.readable"),Tn=ve("nodejs.stream.writable"),Rl=ve("nodejs.stream.disturbed"),lb=ve("nodejs.webstream.isClosedPromise"),fb=ve("nodejs.webstream.controllerErrorFunction");function zt(e,t=!1){var r;return!!(e&&typeof e.pipe=="function"&&typeof e.on=="function"&&(!t||typeof e.pause=="function"&&typeof e.resume=="function")&&(!e._writableState||((r=e._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!e._writableState||e._readableState))}function Ht(e){var t;return!!(e&&typeof e.write=="function"&&typeof e.on=="function"&&(!e._readableState||((t=e._writableState)===null||t===void 0?void 0:t.writable)!==!1))}function ub(e){return!!(e&&typeof e.pipe=="function"&&e._readableState&&typeof e.on=="function"&&typeof e.write=="function")}function ie(e){return e&&(e._readableState||e._writableState||typeof e.write=="function"&&typeof e.on=="function"||typeof e.pipe=="function"&&typeof e.on=="function")}function Al(e){return!!(e&&!ie(e)&&typeof e.pipeThrough=="function"&&typeof e.getReader=="function"&&typeof e.cancel=="function")}function xl(e){return!!(e&&!ie(e)&&typeof e.getWriter=="function"&&typeof e.abort=="function")}function Tl(e){return!!(e&&!ie(e)&&typeof e.readable=="object"&&typeof e.writable=="object")}function ab(e){return Al(e)||xl(e)||Tl(e)}function cb(e,t){return e==null?!1:t===!0?typeof e[ml]=="function":t===!1?typeof e[_l]=="function":typeof e[ml]=="function"||typeof e[_l]=="function"}function Kt(e){if(!ie(e))return null;let t=e._writableState,r=e._readableState,n=t||r;return!!(e.destroyed||e[Sl]||n!=null&&n.destroyed)}function Ol(e){if(!Ht(e))return null;if(e.writableEnded===!0)return!0;let t=e._writableState;return t!=null&&t.errored?!1:typeof t?.ended!="boolean"?null:t.ended}function db(e,t){if(!Ht(e))return null;if(e.writableFinished===!0)return!0;let r=e._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||t===!1&&r.ended===!0&&r.length===0)}function hb(e){if(!zt(e))return null;if(e.readableEnded===!0)return!0;let t=e._readableState;return!t||t.errored?!1:typeof t?.ended!="boolean"?null:t.ended}function vl(e,t){if(!zt(e))return null;let r=e._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||t===!1&&r.ended===!0&&r.length===0)}function Ll(e){return e&&e[xn]!=null?e[xn]:typeof e?.readable!="boolean"?null:Kt(e)?!1:zt(e)&&e.readable&&!vl(e)}function kl(e){return e&&e[Tn]!=null?e[Tn]:typeof e?.writable!="boolean"?null:Kt(e)?!1:Ht(e)&&e.writable&&!Ol(e)}function pb(e,t){return ie(e)?Kt(e)?!0:!(t?.readable!==!1&&Ll(e)||t?.writable!==!1&&kl(e)):null}function yb(e){var t,r;return ie(e)?e.writableErrored?e.writableErrored:(t=(r=e._writableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function bb(e){var t,r;return ie(e)?e.readableErrored?e.readableErrored:(t=(r=e._readableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function gb(e){if(!ie(e))return null;if(typeof e.closed=="boolean")return e.closed;let t=e._writableState,r=e._readableState;return typeof t?.closed=="boolean"||typeof r?.closed=="boolean"?t?.closed||r?.closed:typeof e._closed=="boolean"&&Il(e)?e._closed:null}function Il(e){return typeof e._closed=="boolean"&&typeof e._defaultKeepAlive=="boolean"&&typeof e._removedConnection=="boolean"&&typeof e._removedContLen=="boolean"}function Dl(e){return typeof e._sent100=="boolean"&&Il(e)}function wb(e){var t;return typeof e._consuming=="boolean"&&typeof e._dumped=="boolean"&&((t=e.req)===null||t===void 0?void 0:t.upgradeOrConnect)===void 0}function mb(e){if(!ie(e))return null;let t=e._writableState,r=e._readableState,n=t||r;return!n&&Dl(e)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function _b(e){var t;return!!(e&&((t=e[Rl])!==null&&t!==void 0?t:e.readableDidRead||e.readableAborted))}function Sb(e){var t,r,n,i,o,s,f,c,u,a;return!!(e&&((t=(r=(n=(i=(o=(s=e[El])!==null&&s!==void 0?s:e.readableErrored)!==null&&o!==void 0?o:e.writableErrored)!==null&&i!==void 0?i:(f=e._readableState)===null||f===void 0?void 0:f.errorEmitted)!==null&&n!==void 0?n:(c=e._writableState)===null||c===void 0?void 0:c.errorEmitted)!==null&&r!==void 0?r:(u=e._readableState)===null||u===void 0?void 0:u.errored)!==null&&t!==void 0?t:!((a=e._writableState)===null||a===void 0)&&a.errored))}Pl.exports={isDestroyed:Kt,kIsDestroyed:Sl,isDisturbed:_b,kIsDisturbed:Rl,isErrored:Sb,kIsErrored:El,isReadable:Ll,kIsReadable:xn,kIsClosedPromise:lb,kControllerErrorFunction:fb,kIsWritable:Tn,isClosed:gb,isDuplexNodeStream:ub,isFinished:pb,isIterable:cb,isReadableNodeStream:zt,isReadableStream:Al,isReadableEnded:hb,isReadableFinished:vl,isReadableErrored:bb,isNodeStream:ie,isWebStream:ab,isWritable:kl,isWritableNodeStream:Ht,isWritableStream:xl,isWritableEnded:Ol,isWritableFinished:db,isWritableErrored:yb,isServerRequest:wb,isServerResponse:Dl,willEmitClose:mb,isTransformStream:Tl}});var ae=E((cS,In)=>{var me=we(),{AbortError:Fl,codes:Eb}=G(),{ERR_INVALID_ARG_TYPE:Rb,ERR_STREAM_PREMATURE_CLOSE:ql}=Eb,{kEmptyObject:vn,once:Ln}=U(),{validateAbortSignal:Ab,validateFunction:xb,validateObject:Tb,validateBoolean:Ob}=Ue(),{Promise:vb,PromisePrototypeThen:Lb,SymbolDispose:Ul}=q(),{isClosed:kb,isReadable:jl,isReadableNodeStream:On,isReadableStream:Ib,isReadableFinished:Nl,isReadableErrored:Ml,isWritable:$l,isWritableNodeStream:Cl,isWritableStream:Db,isWritableFinished:Wl,isWritableErrored:Bl,isNodeStream:Pb,willEmitClose:qb,kIsClosedPromise:jb}=oe(),Ve;function Nb(e){return e.setHeader&&typeof e.abort=="function"}var kn=()=>{};function Vl(e,t,r){var n,i;if(arguments.length===2?(r=t,t=vn):t==null?t=vn:Tb(t,"options"),xb(r,"callback"),Ab(t.signal,"options.signal"),r=Ln(r),Ib(e)||Db(e))return Mb(e,t,r);if(!Pb(e))throw new Rb("stream",["ReadableStream","WritableStream","Stream"],e);let o=(n=t.readable)!==null&&n!==void 0?n:On(e),s=(i=t.writable)!==null&&i!==void 0?i:Cl(e),f=e._writableState,c=e._readableState,u=()=>{e.writable||p()},a=qb(e)&&On(e)===o&&Cl(e)===s,d=Wl(e,!1),p=()=>{d=!0,e.destroyed&&(a=!1),!(a&&(!e.readable||o))&&(!o||l)&&r.call(e)},l=Nl(e,!1),h=()=>{l=!0,e.destroyed&&(a=!1),!(a&&(!e.writable||s))&&(!s||d)&&r.call(e)},y=R=>{r.call(e,R)},g=kb(e),m=()=>{g=!0;let R=Bl(e)||Ml(e);if(R&&typeof R!="boolean")return r.call(e,R);if(o&&!l&&On(e,!0)&&!Nl(e,!1))return r.call(e,new ql);if(s&&!d&&!Wl(e,!1))return r.call(e,new ql);r.call(e)},w=()=>{g=!0;let R=Bl(e)||Ml(e);if(R&&typeof R!="boolean")return r.call(e,R);r.call(e)},S=()=>{e.req.on("finish",p)};Nb(e)?(e.on("complete",p),a||e.on("abort",m),e.req?S():e.on("request",S)):s&&!f&&(e.on("end",u),e.on("close",u)),!a&&typeof e.aborted=="boolean"&&e.on("aborted",m),e.on("end",h),e.on("finish",p),t.error!==!1&&e.on("error",y),e.on("close",m),g?me.nextTick(m):f!=null&&f.errorEmitted||c!=null&&c.errorEmitted?a||me.nextTick(w):(!o&&(!a||jl(e))&&(d||$l(e)===!1)||!s&&(!a||$l(e))&&(l||jl(e)===!1)||c&&e.req&&e.aborted)&&me.nextTick(w);let _=()=>{r=kn,e.removeListener("aborted",m),e.removeListener("complete",p),e.removeListener("abort",m),e.removeListener("request",S),e.req&&e.req.removeListener("finish",p),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",p),e.removeListener("end",h),e.removeListener("error",y),e.removeListener("close",m)};if(t.signal&&!g){let R=()=>{let A=r;_(),A.call(e,new Fl(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)me.nextTick(R);else{Ve=Ve||U().addAbortListener;let A=Ve(t.signal,R),v=r;r=Ln((...x)=>{A[Ul](),v.apply(e,x)})}}return _}function Mb(e,t,r){let n=!1,i=kn;if(t.signal)if(i=()=>{n=!0,r.call(e,new Fl(void 0,{cause:t.signal.reason}))},t.signal.aborted)me.nextTick(i);else{Ve=Ve||U().addAbortListener;let s=Ve(t.signal,i),f=r;r=Ln((...c)=>{s[Ul](),f.apply(e,c)})}let o=(...s)=>{n||me.nextTick(()=>r.apply(e,s))};return Lb(e[jb].promise,o,o),kn}function $b(e,t){var r;let n=!1;return t===null&&(t=vn),(r=t)!==null&&r!==void 0&&r.cleanup&&(Ob(t.cleanup,"cleanup"),n=t.cleanup),new vb((i,o)=>{let s=Vl(e,t,f=>{n&&s(),f?o(f):i()})})}In.exports=Vl;In.exports.finished=$b});var Le=E((dS,Ql)=>{"use strict";var se=we(),{aggregateTwoErrors:Cb,codes:{ERR_MULTIPLE_CALLBACK:Wb},AbortError:Bb}=G(),{Symbol:Hl}=q(),{kIsDestroyed:Fb,isDestroyed:Ub,isFinished:Vb,isServerRequest:Gb}=oe(),Kl=Hl("kDestroy"),Dn=Hl("kConstruct");function Jl(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function zb(e,t){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof t=="function"&&t(),this):(Jl(e,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?Gl(this,e,t):this.once(Kl,function(o){Gl(this,Cb(o,e),t)}),this)}function Gl(e,t,r){let n=!1;function i(o){if(n)return;n=!0;let s=e._readableState,f=e._writableState;Jl(o,f,s),f&&(f.closed=!0),s&&(s.closed=!0),typeof r=="function"&&r(o),o?se.nextTick(Hb,e,o):se.nextTick(Yl,e)}try{e._destroy(t||null,i)}catch(o){i(o)}}function Hb(e,t){Pn(e,t),Yl(e)}function Yl(e){let t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(r!=null&&r.emitClose||t!=null&&t.emitClose)&&e.emit("close")}function Pn(e,t){let r=e._readableState,n=e._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function Kb(){let e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=e.readable===!1,e.endEmitted=e.readable===!1),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=t.writable===!1,t.ending=t.writable===!1,t.finished=t.writable===!1)}function qn(e,t,r){let n=e._readableState,i=e._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?e.destroy(t):t&&(t.stack,i&&!i.errored&&(i.errored=t),n&&!n.errored&&(n.errored=t),r?se.nextTick(Pn,e,t):Pn(e,t))}function Jb(e,t){if(typeof e._construct!="function")return;let r=e._readableState,n=e._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),e.once(Dn,t),!(e.listenerCount(Dn)>1)&&se.nextTick(Yb,e)}function Yb(e){let t=!1;function r(n){if(t){qn(e,n??new Wb);return}t=!0;let i=e._readableState,o=e._writableState,s=o||i;i&&(i.constructed=!0),o&&(o.constructed=!0),s.destroyed?e.emit(Kl,n):n?qn(e,n,!0):se.nextTick(Xb,e)}try{e._construct(n=>{se.nextTick(r,n)})}catch(n){se.nextTick(r,n)}}function Xb(e){e.emit(Dn)}function zl(e){return e?.setHeader&&typeof e.abort=="function"}function Xl(e){e.emit("close")}function Qb(e,t){e.emit("error",t),se.nextTick(Xl,e)}function Zb(e,t){!e||Ub(e)||(!t&&!Vb(e)&&(t=new Bb),Gb(e)?(e.socket=null,e.destroy(t)):zl(e)?e.abort():zl(e.req)?e.req.abort():typeof e.destroy=="function"?e.destroy(t):typeof e.close=="function"?e.close():t?se.nextTick(Qb,e,t):se.nextTick(Xl,e),e.destroyed||(e[Fb]=!0))}Ql.exports={construct:Jb,destroyer:Zb,destroy:zb,undestroy:Kb,errorOrDestroy:qn}});var Xt=E((hS,ef)=>{"use strict";var{ArrayIsArray:eg,ObjectSetPrototypeOf:Zl}=q(),{EventEmitter:Jt}=require("events");function Yt(e){Jt.call(this,e)}Zl(Yt.prototype,Jt.prototype);Zl(Yt,Jt);Yt.prototype.pipe=function(e,t){let r=this;function n(a){e.writable&&e.write(a)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}e.on("drain",i),!e._isStdio&&(!t||t.end!==!1)&&(r.on("end",s),r.on("close",f));let o=!1;function s(){o||(o=!0,e.end())}function f(){o||(o=!0,typeof e.destroy=="function"&&e.destroy())}function c(a){u(),Jt.listenerCount(this,"error")===0&&this.emit("error",a)}jn(r,"error",c),jn(e,"error",c);function u(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",f),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",u),r.removeListener("close",u),e.removeListener("close",u)}return r.on("end",u),r.on("close",u),e.on("close",u),e.emit("pipe",r),e};function jn(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):eg(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}ef.exports={Stream:Yt,prependListener:jn}});var ft=E((pS,Qt)=>{"use strict";var{SymbolDispose:tg}=q(),{AbortError:tf,codes:rg}=G(),{isNodeStream:rf,isWebStream:ng,kControllerErrorFunction:ig}=oe(),og=ae(),{ERR_INVALID_ARG_TYPE:nf}=rg,Nn,sg=(e,t)=>{if(typeof e!="object"||!("aborted"in e))throw new nf(t,"AbortSignal",e)};Qt.exports.addAbortSignal=function(t,r){if(sg(t,"signal"),!rf(r)&&!ng(r))throw new nf("stream",["ReadableStream","WritableStream","Stream"],r);return Qt.exports.addAbortSignalNoValidate(t,r)};Qt.exports.addAbortSignalNoValidate=function(e,t){if(typeof e!="object"||!("aborted"in e))return t;let r=rf(t)?()=>{t.destroy(new tf(void 0,{cause:e.reason}))}:()=>{t[ig](new tf(void 0,{cause:e.reason}))};if(e.aborted)r();else{Nn=Nn||U().addAbortListener;let n=Nn(e,r);og(t,n[tg])}return t}});var lf=E((bS,sf)=>{"use strict";var{StringPrototypeSlice:of,SymbolIterator:lg,TypedArrayPrototypeSet:Zt,Uint8Array:fg}=q(),{Buffer:Mn}=require("buffer"),{inspect:ug}=U();sf.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){let r={data:t,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(t){let r={data:t,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=t+r.data;return n}concat(t){if(this.length===0)return Mn.alloc(0);let r=Mn.allocUnsafe(t>>>0),n=this.head,i=0;for(;n;)Zt(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(t,r){let n=this.head.data;if(t<n.length){let i=n.slice(0,t);return this.head.data=n.slice(t),i}return t===n.length?this.shift():r?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[lg](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let r="",n=this.head,i=0;do{let o=n.data;if(t>o.length)r+=o,t-=o.length;else{t===o.length?(r+=o,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=of(o,0,t),this.head=n,n.data=of(o,t));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(t){let r=Mn.allocUnsafe(t),n=t,i=this.head,o=0;do{let s=i.data;if(t>s.length)Zt(r,s,n-t),t-=s.length;else{t===s.length?(Zt(r,s,n-t),++o,i.next?this.head=i.next:this.head=this.tail=null):(Zt(r,new fg(s.buffer,s.byteOffset,t),n-t),this.head=i,i.data=s.slice(t));break}++o}while((i=i.next)!==null);return this.length-=o,r}[Symbol.for("nodejs.util.inspect.custom")](t,r){return ug(this,{...r,depth:0,customInspect:!1})}}});var ut=E((gS,cf)=>{"use strict";var{MathFloor:ag,NumberIsInteger:cg}=q(),{validateInteger:dg}=Ue(),{ERR_INVALID_ARG_VALUE:hg}=G().codes,ff=16*1024,uf=16;function pg(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function af(e){return e?uf:ff}function yg(e,t){dg(t,"value",0),e?uf=t:ff=t}function bg(e,t,r,n){let i=pg(t,n,r);if(i!=null){if(!cg(i)||i<0){let o=n?`options.${r}`:"options.highWaterMark";throw new hg(o,i)}return ag(i)}return af(e.objectMode)}cf.exports={getHighWaterMark:bg,getDefaultHighWaterMark:af,setDefaultHighWaterMark:yg}});var $n=E((wS,yf)=>{"use strict";var df=we(),{PromisePrototypeThen:gg,SymbolAsyncIterator:hf,SymbolIterator:pf}=q(),{Buffer:wg}=require("buffer"),{ERR_INVALID_ARG_TYPE:mg,ERR_STREAM_NULL_VALUES:_g}=G().codes;function Sg(e,t,r){let n;if(typeof t=="string"||t instanceof wg)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});let i;if(t&&t[hf])i=!0,n=t[hf]();else if(t&&t[pf])i=!1,n=t[pf]();else throw new mg("iterable",["Iterable"],t);let o=new e({objectMode:!0,highWaterMark:1,...r}),s=!1;o._read=function(){s||(s=!0,c())},o._destroy=function(u,a){gg(f(u),()=>df.nextTick(a,u),d=>df.nextTick(a,d||u))};async function f(u){let a=u!=null,d=typeof n.throw=="function";if(a&&d){let{value:p,done:l}=await n.throw(u);if(await p,l)return}if(typeof n.return=="function"){let{value:p}=await n.return();await p}}async function c(){for(;;){try{let{value:u,done:a}=i?await n.next():n.next();if(a)o.push(null);else{let d=u&&typeof u.then=="function"?await u:u;if(d===null)throw s=!1,new _g;if(o.push(d))continue;s=!1}}catch(u){o.destroy(u)}break}}return o}yf.exports=Sg});var ct=E((mS,Pf)=>{var Z=we(),{ArrayPrototypeIndexOf:Eg,NumberIsInteger:Rg,NumberIsNaN:Ag,NumberParseInt:xg,ObjectDefineProperties:zn,ObjectKeys:Tg,ObjectSetPrototypeOf:wf,Promise:mf,SafeSet:Og,SymbolAsyncDispose:vg,SymbolAsyncIterator:Lg,Symbol:kg}=q();Pf.exports=O;O.ReadableState=nr;var{EventEmitter:Ig}=require("events"),{Stream:_e,prependListener:Dg}=Xt(),{Buffer:Cn}=require("buffer"),{addAbortSignal:Pg}=ft(),_f=ae(),k=U().debuglog("stream",e=>{k=e}),qg=lf(),He=Le(),{getHighWaterMark:jg,getDefaultHighWaterMark:Ng}=ut(),{aggregateTwoErrors:bf,codes:{ERR_INVALID_ARG_TYPE:Mg,ERR_METHOD_NOT_IMPLEMENTED:$g,ERR_OUT_OF_RANGE:Cg,ERR_STREAM_PUSH_AFTER_EOF:Wg,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Bg},AbortError:Fg}=G(),{validateObject:Ug}=Ue(),ke=kg("kPaused"),{StringDecoder:Sf}=require("string_decoder"),Vg=$n();wf(O.prototype,_e.prototype);wf(O,_e);var Wn=()=>{},{errorOrDestroy:Ge}=He,ze=1<<0,Gg=1<<1,Ef=1<<2,at=1<<3,Rf=1<<4,er=1<<5,tr=1<<6,Af=1<<7,zg=1<<8,Hg=1<<9,Kg=1<<10,Vn=1<<11,Gn=1<<12,Jg=1<<13,Yg=1<<14,Xg=1<<15,xf=1<<16,Qg=1<<17,Zg=1<<18;function C(e){return{enumerable:!1,get(){return(this.state&e)!==0},set(t){t?this.state|=e:this.state&=~e}}}zn(nr.prototype,{objectMode:C(ze),ended:C(Gg),endEmitted:C(Ef),reading:C(at),constructed:C(Rf),sync:C(er),needReadable:C(tr),emittedReadable:C(Af),readableListening:C(zg),resumeScheduled:C(Hg),errorEmitted:C(Kg),emitClose:C(Vn),autoDestroy:C(Gn),destroyed:C(Jg),closed:C(Yg),closeEmitted:C(Xg),multiAwaitDrain:C(xf),readingMore:C(Qg),dataEmitted:C(Zg)});function nr(e,t,r){typeof r!="boolean"&&(r=t instanceof le()),this.state=Vn|Gn|Rf|er,e&&e.objectMode&&(this.state|=ze),r&&e&&e.readableObjectMode&&(this.state|=ze),this.highWaterMark=e?jg(this,e,"readableHighWaterMark",r):Ng(!1),this.buffer=new qg,this.length=0,this.pipes=[],this.flowing=null,this[ke]=null,e&&e.emitClose===!1&&(this.state&=~Vn),e&&e.autoDestroy===!1&&(this.state&=~Gn),this.errored=null,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new Sf(e.encoding),this.encoding=e.encoding)}function O(e){if(!(this instanceof O))return new O(e);let t=this instanceof le();this._readableState=new nr(e,this,t),e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.construct=="function"&&(this._construct=e.construct),e.signal&&!t&&Pg(e.signal,this)),_e.call(this,e),He.construct(this,()=>{this._readableState.needReadable&&rr(this,this._readableState)})}O.prototype.destroy=He.destroy;O.prototype._undestroy=He.undestroy;O.prototype._destroy=function(e,t){t(e)};O.prototype[Ig.captureRejectionSymbol]=function(e){this.destroy(e)};O.prototype[vg]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new Fg,this.destroy(e)),new mf((t,r)=>_f(this,n=>n&&n!==e?r(n):t(null)))};O.prototype.push=function(e,t){return Tf(this,e,t,!1)};O.prototype.unshift=function(e,t){return Tf(this,e,t,!0)};function Tf(e,t,r,n){k("readableAddChunk",t);let i=e._readableState,o;if(i.state&ze||(typeof t=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?t=Cn.from(t,r).toString(i.encoding):(t=Cn.from(t,r),r=""))):t instanceof Cn?r="":_e._isUint8Array(t)?(t=_e._uint8ArrayToBuffer(t),r=""):t!=null&&(o=new Mg("chunk",["string","Buffer","Uint8Array"],t))),o)Ge(e,o);else if(t===null)i.state&=~at,rw(e,i);else if(i.state&ze||t&&t.length>0)if(n)if(i.state&Ef)Ge(e,new Bg);else{if(i.destroyed||i.errored)return!1;Bn(e,i,t,!0)}else if(i.ended)Ge(e,new Wg);else{if(i.destroyed||i.errored)return!1;i.state&=~at,i.decoder&&!r?(t=i.decoder.write(t),i.objectMode||t.length!==0?Bn(e,i,t,!1):rr(e,i)):Bn(e,i,t,!1)}else n||(i.state&=~at,rr(e,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function Bn(e,t,r,n){t.flowing&&t.length===0&&!t.sync&&e.listenerCount("data")>0?(t.state&xf?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.state&tr&&ir(e)),rr(e,t)}O.prototype.isPaused=function(){let e=this._readableState;return e[ke]===!0||e.flowing===!1};O.prototype.setEncoding=function(e){let t=new Sf(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=t.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var ew=1073741824;function tw(e){if(e>ew)throw new Cg("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++,e}function gf(e,t){return e<=0||t.length===0&&t.ended?0:t.state&ze?1:Ag(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}O.prototype.read=function(e){k("read",e),e===void 0?e=NaN:Rg(e)||(e=xg(e,10));let t=this._readableState,r=e;if(e>t.highWaterMark&&(t.highWaterMark=tw(e)),e!==0&&(t.state&=~Af),e===0&&t.needReadable&&((t.highWaterMark!==0?t.length>=t.highWaterMark:t.length>0)||t.ended))return k("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?Fn(this):ir(this),null;if(e=gf(e,t),e===0&&t.ended)return t.length===0&&Fn(this),null;let n=(t.state&tr)!==0;if(k("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,k("length less than watermark",n)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)n=!1,k("reading, ended or constructing",n);else if(n){k("do read"),t.state|=at|er,t.length===0&&(t.state|=tr);try{this._read(t.highWaterMark)}catch(o){Ge(this,o)}t.state&=~er,t.reading||(e=gf(r,t))}let i;return e>0?i=If(e,t):i=null,i===null?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&Fn(this)),i!==null&&!t.errorEmitted&&!t.closeEmitted&&(t.dataEmitted=!0,this.emit("data",i)),i};function rw(e,t){if(k("onEofChunk"),!t.ended){if(t.decoder){let r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?ir(e):(t.needReadable=!1,t.emittedReadable=!0,Of(e))}}function ir(e){let t=e._readableState;k("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(k("emitReadable",t.flowing),t.emittedReadable=!0,Z.nextTick(Of,e))}function Of(e){let t=e._readableState;k("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&!t.errored&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,Lf(e)}function rr(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,Z.nextTick(nw,e,t))}function nw(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0);){let r=t.length;if(k("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}O.prototype._read=function(e){throw new $g("_read()")};O.prototype.pipe=function(e,t){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new Og(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(e),k("pipe count=%d opts=%j",n.pipes.length,t);let o=(!t||t.end!==!1)&&e!==Z.stdout&&e!==Z.stderr?f:g;n.endEmitted?Z.nextTick(o):r.once("end",o),e.on("unpipe",s);function s(m,w){k("onunpipe"),m===r&&w&&w.hasUnpiped===!1&&(w.hasUnpiped=!0,a())}function f(){k("onend"),e.end()}let c,u=!1;function a(){k("cleanup"),e.removeListener("close",h),e.removeListener("finish",y),c&&e.removeListener("drain",c),e.removeListener("error",l),e.removeListener("unpipe",s),r.removeListener("end",f),r.removeListener("end",g),r.removeListener("data",p),u=!0,c&&n.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&c()}function d(){u||(n.pipes.length===1&&n.pipes[0]===e?(k("false write response, pause",0),n.awaitDrainWriters=e,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(e)&&(k("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(e)),r.pause()),c||(c=iw(r,e),e.on("drain",c))}r.on("data",p);function p(m){k("ondata");let w=e.write(m);k("dest.write",w),w===!1&&d()}function l(m){if(k("onerror",m),g(),e.removeListener("error",l),e.listenerCount("error")===0){let w=e._writableState||e._readableState;w&&!w.errorEmitted?Ge(e,m):e.emit("error",m)}}Dg(e,"error",l);function h(){e.removeListener("finish",y),g()}e.once("close",h);function y(){k("onfinish"),e.removeListener("close",h),g()}e.once("finish",y);function g(){k("unpipe"),r.unpipe(e)}return e.emit("pipe",r),e.writableNeedDrain===!0?d():n.flowing||(k("pipe resume"),r.resume()),e};function iw(e,t){return function(){let n=e._readableState;n.awaitDrainWriters===t?(k("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(k("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(t)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&e.listenerCount("data")&&e.resume()}}O.prototype.unpipe=function(e){let t=this._readableState,r={hasUnpiped:!1};if(t.pipes.length===0)return this;if(!e){let i=t.pipes;t.pipes=[],this.pause();for(let o=0;o<i.length;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}let n=Eg(t.pipes,e);return n===-1?this:(t.pipes.splice(n,1),t.pipes.length===0&&this.pause(),e.emit("unpipe",this,r),this)};O.prototype.on=function(e,t){let r=_e.prototype.on.call(this,e,t),n=this._readableState;return e==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):e==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,k("on readable",n.length,n.reading),n.length?ir(this):n.reading||Z.nextTick(ow,this)),r};O.prototype.addListener=O.prototype.on;O.prototype.removeListener=function(e,t){let r=_e.prototype.removeListener.call(this,e,t);return e==="readable"&&Z.nextTick(vf,this),r};O.prototype.off=O.prototype.removeListener;O.prototype.removeAllListeners=function(e){let t=_e.prototype.removeAllListeners.apply(this,arguments);return(e==="readable"||e===void 0)&&Z.nextTick(vf,this),t};function vf(e){let t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&t[ke]===!1?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function ow(e){k("readable nexttick read 0"),e.read(0)}O.prototype.resume=function(){let e=this._readableState;return e.flowing||(k("resume"),e.flowing=!e.readableListening,sw(this,e)),e[ke]=!1,this};function sw(e,t){t.resumeScheduled||(t.resumeScheduled=!0,Z.nextTick(lw,e,t))}function lw(e,t){k("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),Lf(e),t.flowing&&!t.reading&&e.read(0)}O.prototype.pause=function(){return k("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(k("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ke]=!0,this};function Lf(e){let t=e._readableState;for(k("flow",t.flowing);t.flowing&&e.read()!==null;);}O.prototype.wrap=function(e){let t=!1;e.on("data",n=>{!this.push(n)&&e.pause&&(t=!0,e.pause())}),e.on("end",()=>{this.push(null)}),e.on("error",n=>{Ge(this,n)}),e.on("close",()=>{this.destroy()}),e.on("destroy",()=>{this.destroy()}),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};let r=Tg(e);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof e[i]=="function"&&(this[i]=e[i].bind(e))}return this};O.prototype[Lg]=function(){return kf(this)};O.prototype.iterator=function(e){return e!==void 0&&Ug(e,"options"),kf(this,e)};function kf(e,t){typeof e.read!="function"&&(e=O.wrap(e,{objectMode:!0}));let r=fw(e,t);return r.stream=e,r}async function*fw(e,t){let r=Wn;function n(s){this===e?(r(),r=Wn):r=s}e.on("readable",n);let i,o=_f(e,{writable:!1},s=>{i=s?bf(i,s):null,r(),r=Wn});try{for(;;){let s=e.destroyed?null:e.read();if(s!==null)yield s;else{if(i)throw i;if(i===null)return;await new mf(n)}}}catch(s){throw i=bf(i,s),i}finally{(i||t?.destroyOnReturn!==!1)&&(i===void 0||e._readableState.autoDestroy)?He.destroyer(e,null):(e.off("readable",n),o())}}zn(O.prototype,{readable:{__proto__:null,get(){let e=this._readableState;return!!e&&e.readable!==!1&&!e.destroyed&&!e.errorEmitted&&!e.endEmitted},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});zn(nr.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ke]!==!1},set(e){this[ke]=!!e}}});O._fromList=If;function If(e,t){if(t.length===0)return null;let r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.first():r=t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function Fn(e){let t=e._readableState;k("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,Z.nextTick(uw,t,e))}function uw(e,t){if(k("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&e.length===0){if(e.endEmitted=!0,t.emit("end"),t.writable&&t.allowHalfOpen===!1)Z.nextTick(aw,t);else if(e.autoDestroy){let r=t._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&t.destroy()}}}function aw(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}O.from=function(e,t){return Vg(O,e,t)};var Un;function Df(){return Un===void 0&&(Un={}),Un}O.fromWeb=function(e,t){return Df().newStreamReadableFromReadableStream(e,t)};O.toWeb=function(e,t){return Df().newReadableStreamFromStreamReadable(e,t)};O.wrap=function(e,t){var r,n;return new O({objectMode:(r=(n=e.readableObjectMode)!==null&&n!==void 0?n:e.objectMode)!==null&&r!==void 0?r:!0,...t,destroy(i,o){He.destroyer(e,i),o(i)}}).wrap(e)}});var ur=E((_S,Gf)=>{var Ie=we(),{ArrayPrototypeSlice:Nf,Error:cw,FunctionPrototypeSymbolHasInstance:Mf,ObjectDefineProperty:$f,ObjectDefineProperties:dw,ObjectSetPrototypeOf:Cf,StringPrototypeToLowerCase:hw,Symbol:pw,SymbolHasInstance:yw}=q();Gf.exports=j;j.WritableState=pt;var{EventEmitter:bw}=require("events"),dt=Xt().Stream,{Buffer:or}=require("buffer"),fr=Le(),{addAbortSignal:gw}=ft(),{getHighWaterMark:ww,getDefaultHighWaterMark:mw}=ut(),{ERR_INVALID_ARG_TYPE:_w,ERR_METHOD_NOT_IMPLEMENTED:Sw,ERR_MULTIPLE_CALLBACK:Wf,ERR_STREAM_CANNOT_PIPE:Ew,ERR_STREAM_DESTROYED:ht,ERR_STREAM_ALREADY_FINISHED:Rw,ERR_STREAM_NULL_VALUES:Aw,ERR_STREAM_WRITE_AFTER_END:xw,ERR_UNKNOWN_ENCODING:Bf}=G().codes,{errorOrDestroy:Ke}=fr;Cf(j.prototype,dt.prototype);Cf(j,dt);function Jn(){}var Je=pw("kOnFinished");function pt(e,t,r){typeof r!="boolean"&&(r=t instanceof le()),this.objectMode=!!(e&&e.objectMode),r&&(this.objectMode=this.objectMode||!!(e&&e.writableObjectMode)),this.highWaterMark=e?ww(this,e,"writableHighWaterMark",r):mw(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(e&&e.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=Ow.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,lr(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||e.emitClose!==!1,this.autoDestroy=!e||e.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Je]=[]}function lr(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}pt.prototype.getBuffer=function(){return Nf(this.buffered,this.bufferedIndex)};$f(pt.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function j(e){let t=this instanceof le();if(!t&&!Mf(j,this))return new j(e);this._writableState=new pt(e,this,t),e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final),typeof e.construct=="function"&&(this._construct=e.construct),e.signal&&gw(e.signal,this)),dt.call(this,e),fr.construct(this,()=>{let r=this._writableState;r.writing||Xn(this,r),Qn(this,r)})}$f(j,yw,{__proto__:null,value:function(e){return Mf(this,e)?!0:this!==j?!1:e&&e._writableState instanceof pt}});j.prototype.pipe=function(){Ke(this,new Ew)};function Ff(e,t,r,n){let i=e._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!or.isEncoding(r))throw new Bf(r);typeof n!="function"&&(n=Jn)}if(t===null)throw new Aw;if(!i.objectMode)if(typeof t=="string")i.decodeStrings!==!1&&(t=or.from(t,r),r="buffer");else if(t instanceof or)r="buffer";else if(dt._isUint8Array(t))t=dt._uint8ArrayToBuffer(t),r="buffer";else throw new _w("chunk",["string","Buffer","Uint8Array"],t);let o;return i.ending?o=new xw:i.destroyed&&(o=new ht("write")),o?(Ie.nextTick(n,o),Ke(e,o,!0),o):(i.pendingcb++,Tw(e,i,t,r,n))}j.prototype.write=function(e,t,r){return Ff(this,e,t,r)===!0};j.prototype.cork=function(){this._writableState.corked++};j.prototype.uncork=function(){let e=this._writableState;e.corked&&(e.corked--,e.writing||Xn(this,e))};j.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=hw(t)),!or.isEncoding(t))throw new Bf(t);return this._writableState.defaultEncoding=t,this};function Tw(e,t,r,n,i){let o=t.objectMode?1:r.length;t.length+=o;let s=t.length<t.highWaterMark;return s||(t.needDrain=!0),t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:r,encoding:n,callback:i}),t.allBuffers&&n!=="buffer"&&(t.allBuffers=!1),t.allNoop&&i!==Jn&&(t.allNoop=!1)):(t.writelen=o,t.writecb=i,t.writing=!0,t.sync=!0,e._write(r,n,t.onwrite),t.sync=!1),s&&!t.errored&&!t.destroyed}function qf(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new ht("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function jf(e,t,r,n){--t.pendingcb,n(r),Yn(t),Ke(e,r)}function Ow(e,t){let r=e._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){Ke(e,new Wf);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t?(t.stack,r.errored||(r.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),n?Ie.nextTick(jf,e,r,t,i):jf(e,r,t,i)):(r.buffered.length>r.bufferedIndex&&Xn(e,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:e,state:r},Ie.nextTick(vw,r.afterWriteTickInfo)):Uf(e,r,1,i))}function vw({stream:e,state:t,count:r,cb:n}){return t.afterWriteTickInfo=null,Uf(e,t,r,n)}function Uf(e,t,r,n){for(!t.ending&&!e.destroyed&&t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));r-- >0;)t.pendingcb--,n();t.destroyed&&Yn(t),Qn(e,t)}function Yn(e){if(e.writing)return;for(let i=e.bufferedIndex;i<e.buffered.length;++i){var t;let{chunk:o,callback:s}=e.buffered[i],f=e.objectMode?1:o.length;e.length-=f,s((t=e.errored)!==null&&t!==void 0?t:new ht("write"))}let r=e[Je].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=e.errored)!==null&&n!==void 0?n:new ht("end"))}lr(e)}function Xn(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=t,o=r.length-n;if(!o)return;let s=n;if(t.bufferProcessing=!0,o>1&&e._writev){t.pendingcb-=o-1;let f=t.allNoop?Jn:u=>{for(let a=s;a<r.length;++a)r[a].callback(u)},c=t.allNoop&&s===0?r:Nf(r,s);c.allBuffers=t.allBuffers,qf(e,t,!0,t.length,c,"",f),lr(t)}else{do{let{chunk:f,encoding:c,callback:u}=r[s];r[s++]=null;let a=i?1:f.length;qf(e,t,!1,a,f,c,u)}while(s<r.length&&!t.writing);s===r.length?lr(t):s>256?(r.splice(0,s),t.bufferedIndex=0):t.bufferedIndex=s}t.bufferProcessing=!1}j.prototype._write=function(e,t,r){if(this._writev)this._writev([{chunk:e,encoding:t}],r);else throw new Sw("_write()")};j.prototype._writev=null;j.prototype.end=function(e,t,r){let n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null);let i;if(e!=null){let o=Ff(this,e,t);o instanceof cw&&(i=o)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,Qn(this,n,!0),n.ended=!0):n.finished?i=new Rw("end"):n.destroyed&&(i=new ht("end"))),typeof r=="function"&&(i||n.finished?Ie.nextTick(r,i):n[Je].push(r)),this};function sr(e){return e.ending&&!e.destroyed&&e.constructed&&e.length===0&&!e.errored&&e.buffered.length===0&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function Lw(e,t){let r=!1;function n(i){if(r){Ke(e,i??Wf());return}if(r=!0,t.pendingcb--,i){let o=t[Je].splice(0);for(let s=0;s<o.length;s++)o[s](i);Ke(e,i,t.sync)}else sr(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,Ie.nextTick(Kn,e,t))}t.sync=!0,t.pendingcb++;try{e._final(n)}catch(i){n(i)}t.sync=!1}function kw(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"&&!t.destroyed?(t.finalCalled=!0,Lw(e,t)):(t.prefinished=!0,e.emit("prefinish")))}function Qn(e,t,r){sr(t)&&(kw(e,t),t.pendingcb===0&&(r?(t.pendingcb++,Ie.nextTick((n,i)=>{sr(i)?Kn(n,i):i.pendingcb--},e,t)):sr(t)&&(t.pendingcb++,Kn(e,t))))}function Kn(e,t){t.pendingcb--,t.finished=!0;let r=t[Je].splice(0);for(let n=0;n<r.length;n++)r[n]();if(e.emit("finish"),t.autoDestroy){let n=e._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&e.destroy()}}dw(j.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){let e=this._writableState;return!!e&&e.writable!==!1&&!e.destroyed&&!e.errored&&!e.ending&&!e.ended},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let e=this._writableState;return e?!e.destroyed&&!e.ending&&e.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var Iw=fr.destroy;j.prototype.destroy=function(e,t){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[Je].length)&&Ie.nextTick(Yn,r),Iw.call(this,e,t),this};j.prototype._undestroy=fr.undestroy;j.prototype._destroy=function(e,t){t(e)};j.prototype[bw.captureRejectionSymbol]=function(e){this.destroy(e)};var Hn;function Vf(){return Hn===void 0&&(Hn={}),Hn}j.fromWeb=function(e,t){return Vf().newStreamWritableFromWritableStream(e,t)};j.toWeb=function(e){return Vf().newWritableStreamFromStreamWritable(e)}});var su=E((SS,ou)=>{var Zn=we(),Dw=require("buffer"),{isReadable:Pw,isWritable:qw,isIterable:zf,isNodeStream:jw,isReadableNodeStream:Hf,isWritableNodeStream:Kf,isDuplexNodeStream:Nw,isReadableStream:Jf,isWritableStream:Yf}=oe(),Xf=ae(),{AbortError:nu,codes:{ERR_INVALID_ARG_TYPE:Mw,ERR_INVALID_RETURN_VALUE:Qf}}=G(),{destroyer:Xe}=Le(),$w=le(),iu=ct(),Cw=ur(),{createDeferredPromise:Zf}=U(),eu=$n(),tu=globalThis.Blob||Dw.Blob,Ww=typeof tu<"u"?function(t){return t instanceof tu}:function(t){return!1},Bw=globalThis.AbortController||Be().AbortController,{FunctionPrototypeCall:ru}=q(),Se=class extends $w{constructor(t){super(t),t?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};ou.exports=function e(t,r){if(Nw(t))return t;if(Hf(t))return Ye({readable:t});if(Kf(t))return Ye({writable:t});if(jw(t))return Ye({writable:!1,readable:!1});if(Jf(t))return Ye({readable:iu.fromWeb(t)});if(Yf(t))return Ye({writable:Cw.fromWeb(t)});if(typeof t=="function"){let{value:i,write:o,final:s,destroy:f}=Fw(t);if(zf(i))return eu(Se,i,{objectMode:!0,write:o,final:s,destroy:f});let c=i?.then;if(typeof c=="function"){let u,a=ru(c,i,d=>{if(d!=null)throw new Qf("nully","body",d)},d=>{Xe(u,d)});return u=new Se({objectMode:!0,readable:!1,write:o,final(d){s(async()=>{try{await a,Zn.nextTick(d,null)}catch(p){Zn.nextTick(d,p)}})},destroy:f})}throw new Qf("Iterable, AsyncIterable or AsyncFunction",r,i)}if(Ww(t))return e(t.arrayBuffer());if(zf(t))return eu(Se,t,{objectMode:!0,writable:!1});if(Jf(t?.readable)&&Yf(t?.writable))return Se.fromWeb(t);if(typeof t?.writable=="object"||typeof t?.readable=="object"){let i=t!=null&&t.readable?Hf(t?.readable)?t?.readable:e(t.readable):void 0,o=t!=null&&t.writable?Kf(t?.writable)?t?.writable:e(t.writable):void 0;return Ye({readable:i,writable:o})}let n=t?.then;if(typeof n=="function"){let i;return ru(n,t,o=>{o!=null&&i.push(o),i.push(null)},o=>{Xe(i,o)}),i=new Se({objectMode:!0,writable:!1,read(){}})}throw new Mw(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)};function Fw(e){let{promise:t,resolve:r}=Zf(),n=new Bw,i=n.signal;return{value:e(async function*(){for(;;){let s=t;t=null;let{chunk:f,done:c,cb:u}=await s;if(Zn.nextTick(u),c)return;if(i.aborted)throw new nu(void 0,{cause:i.reason});({promise:t,resolve:r}=Zf()),yield f}}(),{signal:i}),write(s,f,c){let u=r;r=null,u({chunk:s,done:!1,cb:c})},final(s){let f=r;r=null,f({done:!0,cb:s})},destroy(s,f){n.abort(),f(s)}}}function Ye(e){let t=e.readable&&typeof e.readable.read!="function"?iu.wrap(e.readable):e.readable,r=e.writable,n=!!Pw(t),i=!!qw(r),o,s,f,c,u;function a(d){let p=c;c=null,p?p(d):d&&u.destroy(d)}return u=new Se({readableObjectMode:!!(t!=null&&t.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(Xf(r,d=>{i=!1,d&&Xe(t,d),a(d)}),u._write=function(d,p,l){r.write(d,p)?l():o=l},u._final=function(d){r.end(),s=d},r.on("drain",function(){if(o){let d=o;o=null,d()}}),r.on("finish",function(){if(s){let d=s;s=null,d()}})),n&&(Xf(t,d=>{n=!1,d&&Xe(t,d),a(d)}),t.on("readable",function(){if(f){let d=f;f=null,d()}}),t.on("end",function(){u.push(null)}),u._read=function(){for(;;){let d=t.read();if(d===null){f=u._read;return}if(!u.push(d))return}}),u._destroy=function(d,p){!d&&c!==null&&(d=new nu),f=null,o=null,s=null,c===null?p(d):(c=p,Xe(r,d),Xe(t,d))},u}});var le=E((ES,uu)=>{"use strict";var{ObjectDefineProperties:Uw,ObjectGetOwnPropertyDescriptor:ce,ObjectKeys:Vw,ObjectSetPrototypeOf:lu}=q();uu.exports=ee;var ri=ct(),J=ur();lu(ee.prototype,ri.prototype);lu(ee,ri);{let e=Vw(J.prototype);for(let t=0;t<e.length;t++){let r=e[t];ee.prototype[r]||(ee.prototype[r]=J.prototype[r])}}function ee(e){if(!(this instanceof ee))return new ee(e);ri.call(this,e),J.call(this,e),e?(this.allowHalfOpen=e.allowHalfOpen!==!1,e.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}Uw(ee.prototype,{writable:{__proto__:null,...ce(J.prototype,"writable")},writableHighWaterMark:{__proto__:null,...ce(J.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...ce(J.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...ce(J.prototype,"writableBuffer")},writableLength:{__proto__:null,...ce(J.prototype,"writableLength")},writableFinished:{__proto__:null,...ce(J.prototype,"writableFinished")},writableCorked:{__proto__:null,...ce(J.prototype,"writableCorked")},writableEnded:{__proto__:null,...ce(J.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...ce(J.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}});var ei;function fu(){return ei===void 0&&(ei={}),ei}ee.fromWeb=function(e,t){return fu().newStreamDuplexFromReadableWritablePair(e,t)};ee.toWeb=function(e){return fu().newReadableWritablePairFromDuplex(e)};var ti;ee.from=function(e){return ti||(ti=su()),ti(e,"body")}});var oi=E((RS,cu)=>{"use strict";var{ObjectSetPrototypeOf:au,Symbol:Gw}=q();cu.exports=de;var{ERR_METHOD_NOT_IMPLEMENTED:zw}=G().codes,ii=le(),{getHighWaterMark:Hw}=ut();au(de.prototype,ii.prototype);au(de,ii);var yt=Gw("kCallback");function de(e){if(!(this instanceof de))return new de(e);let t=e?Hw(this,e,"readableHighWaterMark",!0):null;t===0&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),ii.call(this,e),this._readableState.sync=!1,this[yt]=null,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",Kw)}function ni(e){typeof this._flush=="function"&&!this.destroyed?this._flush((t,r)=>{if(t){e?e(t):this.destroy(t);return}r!=null&&this.push(r),this.push(null),e&&e()}):(this.push(null),e&&e())}function Kw(){this._final!==ni&&ni.call(this)}de.prototype._final=ni;de.prototype._transform=function(e,t,r){throw new zw("_transform()")};de.prototype._write=function(e,t,r){let n=this._readableState,i=this._writableState,o=n.length;this._transform(e,t,(s,f)=>{if(s){r(s);return}f!=null&&this.push(f),i.ended||o===n.length||n.length<n.highWaterMark?r():this[yt]=r})};de.prototype._read=function(){if(this[yt]){let e=this[yt];this[yt]=null,e()}}});var li=E((AS,hu)=>{"use strict";var{ObjectSetPrototypeOf:du}=q();hu.exports=Qe;var si=oi();du(Qe.prototype,si.prototype);du(Qe,si);function Qe(e){if(!(this instanceof Qe))return new Qe(e);si.call(this,e)}Qe.prototype._transform=function(e,t,r){r(null,e)}});var hr=E((xS,wu)=>{var bt=we(),{ArrayIsArray:Jw,Promise:Yw,SymbolAsyncIterator:Xw,SymbolDispose:Qw}=q(),dr=ae(),{once:Zw}=U(),em=Le(),pu=le(),{aggregateTwoErrors:tm,codes:{ERR_INVALID_ARG_TYPE:bi,ERR_INVALID_RETURN_VALUE:fi,ERR_MISSING_ARGS:rm,ERR_STREAM_DESTROYED:nm,ERR_STREAM_PREMATURE_CLOSE:im},AbortError:om}=G(),{validateFunction:sm,validateAbortSignal:lm}=Ue(),{isIterable:De,isReadable:ui,isReadableNodeStream:cr,isNodeStream:yu,isTransformStream:Ze,isWebStream:fm,isReadableStream:ai,isReadableFinished:um}=oe(),am=globalThis.AbortController||Be().AbortController,ci,di,hi;function bu(e,t,r){let n=!1;e.on("close",()=>{n=!0});let i=dr(e,{readable:t,writable:r},o=>{n=!o});return{destroy:o=>{n||(n=!0,em.destroyer(e,o||new nm("pipe")))},cleanup:i}}function cm(e){return sm(e[e.length-1],"streams[stream.length - 1]"),e.pop()}function pi(e){if(De(e))return e;if(cr(e))return dm(e);throw new bi("val",["Readable","Iterable","AsyncIterable"],e)}async function*dm(e){di||(di=ct()),yield*di.prototype[Xw].call(e)}async function ar(e,t,r,{end:n}){let i,o=null,s=u=>{if(u&&(i=u),o){let a=o;o=null,a()}},f=()=>new Yw((u,a)=>{i?a(i):o=()=>{i?a(i):u()}});t.on("drain",s);let c=dr(t,{readable:!1},s);try{t.writableNeedDrain&&await f();for await(let u of e)t.write(u)||await f();n&&(t.end(),await f()),r()}catch(u){r(i!==u?tm(i,u):u)}finally{c(),t.off("drain",s)}}async function yi(e,t,r,{end:n}){Ze(t)&&(t=t.writable);let i=t.getWriter();try{for await(let o of e)await i.ready,i.write(o).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(o){try{await i.abort(o),r(o)}catch(s){r(s)}}}function hm(...e){return gu(e,Zw(cm(e)))}function gu(e,t,r){if(e.length===1&&Jw(e[0])&&(e=e[0]),e.length<2)throw new rm("streams");let n=new am,i=n.signal,o=r?.signal,s=[];lm(o,"options.signal");function f(){h(new om)}hi=hi||U().addAbortListener;let c;o&&(c=hi(o,f));let u,a,d=[],p=0;function l(S){h(S,--p===0)}function h(S,_){var R;if(S&&(!u||u.code==="ERR_STREAM_PREMATURE_CLOSE")&&(u=S),!(!u&&!_)){for(;d.length;)d.shift()(u);(R=c)===null||R===void 0||R[Qw](),n.abort(),_&&(u||s.forEach(A=>A()),bt.nextTick(t,u,a))}}let y;for(let S=0;S<e.length;S++){let _=e[S],R=S<e.length-1,A=S>0,v=R||r?.end!==!1,x=S===e.length-1;if(yu(_)){let T=function(I){I&&I.name!=="AbortError"&&I.code!=="ERR_STREAM_PREMATURE_CLOSE"&&l(I)};var w=T;if(v){let{destroy:I,cleanup:N}=bu(_,R,A);d.push(I),ui(_)&&x&&s.push(N)}_.on("error",T),ui(_)&&x&&s.push(()=>{_.removeListener("error",T)})}if(S===0)if(typeof _=="function"){if(y=_({signal:i}),!De(y))throw new fi("Iterable, AsyncIterable or Stream","source",y)}else De(_)||cr(_)||Ze(_)?y=_:y=pu.from(_);else if(typeof _=="function"){if(Ze(y)){var g;y=pi((g=y)===null||g===void 0?void 0:g.readable)}else y=pi(y);if(y=_(y,{signal:i}),R){if(!De(y,!0))throw new fi("AsyncIterable",`transform[${S-1}]`,y)}else{var m;ci||(ci=li());let T=new ci({objectMode:!0}),I=(m=y)===null||m===void 0?void 0:m.then;if(typeof I=="function")p++,I.call(y,M=>{a=M,M!=null&&T.write(M),v&&T.end(),bt.nextTick(l)},M=>{T.destroy(M),bt.nextTick(l,M)});else if(De(y,!0))p++,ar(y,T,l,{end:v});else if(ai(y)||Ze(y)){let M=y.readable||y;p++,ar(M,T,l,{end:v})}else throw new fi("AsyncIterable or Promise","destination",y);y=T;let{destroy:N,cleanup:F}=bu(y,!1,!0);d.push(N),x&&s.push(F)}}else if(yu(_)){if(cr(y)){p+=2;let T=pm(y,_,l,{end:v});ui(_)&&x&&s.push(T)}else if(Ze(y)||ai(y)){let T=y.readable||y;p++,ar(T,_,l,{end:v})}else if(De(y))p++,ar(y,_,l,{end:v});else throw new bi("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],y);y=_}else if(fm(_)){if(cr(y))p++,yi(pi(y),_,l,{end:v});else if(ai(y)||De(y))p++,yi(y,_,l,{end:v});else if(Ze(y))p++,yi(y.readable,_,l,{end:v});else throw new bi("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],y);y=_}else y=pu.from(_)}return(i!=null&&i.aborted||o!=null&&o.aborted)&&bt.nextTick(f),y}function pm(e,t,r,{end:n}){let i=!1;if(t.on("close",()=>{i||r(new im)}),e.pipe(t,{end:!1}),n){let s=function(){i=!0,t.end()};var o=s;um(e)?bt.nextTick(s):e.once("end",s)}else r();return dr(e,{readable:!0,writable:!1},s=>{let f=e._readableState;s&&s.code==="ERR_STREAM_PREMATURE_CLOSE"&&f&&f.ended&&!f.errored&&!f.errorEmitted?e.once("end",r).once("error",r):r(s)}),dr(t,{readable:!1,writable:!0},r)}wu.exports={pipelineImpl:gu,pipeline:hm}});var wi=E((TS,Au)=>{"use strict";var{pipeline:ym}=hr(),pr=le(),{destroyer:bm}=Le(),{isNodeStream:yr,isReadable:mu,isWritable:_u,isWebStream:gi,isTransformStream:Pe,isWritableStream:Su,isReadableStream:Eu}=oe(),{AbortError:gm,codes:{ERR_INVALID_ARG_VALUE:Ru,ERR_MISSING_ARGS:wm}}=G(),mm=ae();Au.exports=function(...t){if(t.length===0)throw new wm("streams");if(t.length===1)return pr.from(t[0]);let r=[...t];if(typeof t[0]=="function"&&(t[0]=pr.from(t[0])),typeof t[t.length-1]=="function"){let l=t.length-1;t[l]=pr.from(t[l])}for(let l=0;l<t.length;++l)if(!(!yr(t[l])&&!gi(t[l]))){if(l<t.length-1&&!(mu(t[l])||Eu(t[l])||Pe(t[l])))throw new Ru(`streams[${l}]`,r[l],"must be readable");if(l>0&&!(_u(t[l])||Su(t[l])||Pe(t[l])))throw new Ru(`streams[${l}]`,r[l],"must be writable")}let n,i,o,s,f;function c(l){let h=s;s=null,h?h(l):l?f.destroy(l):!p&&!d&&f.destroy()}let u=t[0],a=ym(t,c),d=!!(_u(u)||Su(u)||Pe(u)),p=!!(mu(a)||Eu(a)||Pe(a));if(f=new pr({writableObjectMode:!!(u!=null&&u.writableObjectMode),readableObjectMode:!!(a!=null&&a.readableObjectMode),writable:d,readable:p}),d){if(yr(u))f._write=function(h,y,g){u.write(h,y)?g():n=g},f._final=function(h){u.end(),i=h},u.on("drain",function(){if(n){let h=n;n=null,h()}});else if(gi(u)){let y=(Pe(u)?u.writable:u).getWriter();f._write=async function(g,m,w){try{await y.ready,y.write(g).catch(()=>{}),w()}catch(S){w(S)}},f._final=async function(g){try{await y.ready,y.close().catch(()=>{}),i=g}catch(m){g(m)}}}let l=Pe(a)?a.readable:a;mm(l,()=>{if(i){let h=i;i=null,h()}})}if(p){if(yr(a))a.on("readable",function(){if(o){let l=o;o=null,l()}}),a.on("end",function(){f.push(null)}),f._read=function(){for(;;){let l=a.read();if(l===null){o=f._read;return}if(!f.push(l))return}};else if(gi(a)){let h=(Pe(a)?a.readable:a).getReader();f._read=async function(){for(;;)try{let{value:y,done:g}=await h.read();if(!f.push(y))return;if(g){f.push(null);return}}catch{return}}}}return f._destroy=function(l,h){!l&&s!==null&&(l=new gm),o=null,n=null,i=null,s===null?h(l):(s=h,yr(a)&&bm(a,l))},f}});var qu=E((OS,Si)=>{"use strict";var _m=globalThis.AbortController||Be().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Sm,ERR_INVALID_ARG_TYPE:gt,ERR_MISSING_ARGS:Em,ERR_OUT_OF_RANGE:Rm},AbortError:fe}=G(),{validateAbortSignal:qe,validateInteger:xu,validateObject:je}=Ue(),Am=q().Symbol("kWeak"),xm=q().Symbol("kResistStopPropagation"),{finished:Tm}=ae(),Om=wi(),{addAbortSignalNoValidate:vm}=ft(),{isWritable:Lm,isNodeStream:km}=oe(),{deprecate:Im}=U(),{ArrayPrototypePush:Dm,Boolean:Pm,MathFloor:Tu,Number:qm,NumberIsNaN:jm,Promise:Ou,PromiseReject:vu,PromiseResolve:Nm,PromisePrototypeThen:Lu,Symbol:Iu}=q(),br=Iu("kEmpty"),ku=Iu("kEof");function Mm(e,t){if(t!=null&&je(t,"options"),t?.signal!=null&&qe(t.signal,"options.signal"),km(e)&&!Lm(e))throw new Sm("stream",e,"must be writable");let r=Om(this,e);return t!=null&&t.signal&&vm(t.signal,r),r}function gr(e,t){if(typeof e!="function")throw new gt("fn",["Function","AsyncFunction"],e);t!=null&&je(t,"options"),t?.signal!=null&&qe(t.signal,"options.signal");let r=1;t?.concurrency!=null&&(r=Tu(t.concurrency));let n=r-1;return t?.highWaterMark!=null&&(n=Tu(t.highWaterMark)),xu(r,"options.concurrency",1),xu(n,"options.highWaterMark",0),n+=r,async function*(){let o=U().AbortSignalAny([t?.signal].filter(Pm)),s=this,f=[],c={signal:o},u,a,d=!1,p=0;function l(){d=!0,h()}function h(){p-=1,y()}function y(){a&&!d&&p<r&&f.length<n&&(a(),a=null)}async function g(){try{for await(let m of s){if(d)return;if(o.aborted)throw new fe;try{if(m=e(m,c),m===br)continue;m=Nm(m)}catch(w){m=vu(w)}p+=1,Lu(m,h,l),f.push(m),u&&(u(),u=null),!d&&(f.length>=n||p>=r)&&await new Ou(w=>{a=w})}f.push(ku)}catch(m){let w=vu(m);Lu(w,h,l),f.push(w)}finally{d=!0,u&&(u(),u=null)}}g();try{for(;;){for(;f.length>0;){let m=await f[0];if(m===ku)return;if(o.aborted)throw new fe;m!==br&&(yield m),f.shift(),y()}await new Ou(m=>{u=m})}}finally{d=!0,a&&(a(),a=null)}}.call(this)}function $m(e=void 0){return e!=null&&je(e,"options"),e?.signal!=null&&qe(e.signal,"options.signal"),async function*(){let r=0;for await(let i of this){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new fe({cause:e.signal.reason});yield[r++,i]}}.call(this)}async function Du(e,t=void 0){for await(let r of _i.call(this,e,t))return!0;return!1}async function Cm(e,t=void 0){if(typeof e!="function")throw new gt("fn",["Function","AsyncFunction"],e);return!await Du.call(this,async(...r)=>!await e(...r),t)}async function Wm(e,t){for await(let r of _i.call(this,e,t))return r}async function Bm(e,t){if(typeof e!="function")throw new gt("fn",["Function","AsyncFunction"],e);async function r(n,i){return await e(n,i),br}for await(let n of gr.call(this,r,t));}function _i(e,t){if(typeof e!="function")throw new gt("fn",["Function","AsyncFunction"],e);async function r(n,i){return await e(n,i)?n:br}return gr.call(this,r,t)}var mi=class extends Em{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function Fm(e,t,r){var n;if(typeof e!="function")throw new gt("reducer",["Function","AsyncFunction"],e);r!=null&&je(r,"options"),r?.signal!=null&&qe(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let u=new fe(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await Tm(this.destroy(u)),u}let o=new _m,s=o.signal;if(r!=null&&r.signal){let u={once:!0,[Am]:this,[xm]:!0};r.signal.addEventListener("abort",()=>o.abort(),u)}let f=!1;try{for await(let u of this){var c;if(f=!0,r!=null&&(c=r.signal)!==null&&c!==void 0&&c.aborted)throw new fe;i?t=await e(t,u,{signal:s}):(t=u,i=!0)}if(!f&&!i)throw new mi}finally{o.abort()}return t}async function Um(e){e!=null&&je(e,"options"),e?.signal!=null&&qe(e.signal,"options.signal");let t=[];for await(let n of this){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new fe(void 0,{cause:e.signal.reason});Dm(t,n)}return t}function Vm(e,t){let r=gr.call(this,e,t);return async function*(){for await(let i of r)yield*i}.call(this)}function Pu(e){if(e=qm(e),jm(e))return 0;if(e<0)throw new Rm("number",">= 0",e);return e}function Gm(e,t=void 0){return t!=null&&je(t,"options"),t?.signal!=null&&qe(t.signal,"options.signal"),e=Pu(e),async function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new fe;for await(let o of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new fe;e--<=0&&(yield o)}}.call(this)}function zm(e,t=void 0){return t!=null&&je(t,"options"),t?.signal!=null&&qe(t.signal,"options.signal"),e=Pu(e),async function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new fe;for await(let o of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new fe;if(e-- >0&&(yield o),e<=0)return}}.call(this)}Si.exports.streamReturningOperators={asIndexedPairs:Im($m,"readable.asIndexedPairs will be removed in a future version."),drop:Gm,filter:_i,flatMap:Vm,map:gr,take:zm,compose:Mm};Si.exports.promiseReturningOperators={every:Cm,forEach:Bm,reduce:Fm,toArray:Um,some:Du,find:Wm}});var Ei=E((vS,ju)=>{"use strict";var{ArrayPrototypePop:Hm,Promise:Km}=q(),{isIterable:Jm,isNodeStream:Ym,isWebStream:Xm}=oe(),{pipelineImpl:Qm}=hr(),{finished:Zm}=ae();Ri();function e_(...e){return new Km((t,r)=>{let n,i,o=e[e.length-1];if(o&&typeof o=="object"&&!Ym(o)&&!Jm(o)&&!Xm(o)){let s=Hm(e);n=s.signal,i=s.end}Qm(e,(s,f)=>{s?r(s):t(f)},{signal:n,end:i})})}ju.exports={finished:Zm,pipeline:e_}});var Ri=E((LS,Vu)=>{var{Buffer:t_}=require("buffer"),{ObjectDefineProperty:he,ObjectKeys:$u,ReflectApply:Cu}=q(),{promisify:{custom:Wu}}=U(),{streamReturningOperators:Nu,promiseReturningOperators:Mu}=qu(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:Bu}}=G(),r_=wi(),{setDefaultHighWaterMark:n_,getDefaultHighWaterMark:i_}=ut(),{pipeline:Fu}=hr(),{destroyer:o_}=Le(),Uu=ae(),Ai=Ei(),wt=oe(),P=Vu.exports=Xt().Stream;P.isDestroyed=wt.isDestroyed;P.isDisturbed=wt.isDisturbed;P.isErrored=wt.isErrored;P.isReadable=wt.isReadable;P.isWritable=wt.isWritable;P.Readable=ct();for(let e of $u(Nu)){let r=function(...n){if(new.target)throw Bu();return P.Readable.from(Cu(t,this,n))};l_=r;let t=Nu[e];he(r,"name",{__proto__:null,value:t.name}),he(r,"length",{__proto__:null,value:t.length}),he(P.Readable.prototype,e,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var l_;for(let e of $u(Mu)){let r=function(...i){if(new.target)throw Bu();return Cu(t,this,i)};l_=r;let t=Mu[e];he(r,"name",{__proto__:null,value:t.name}),he(r,"length",{__proto__:null,value:t.length}),he(P.Readable.prototype,e,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var l_;P.Writable=ur();P.Duplex=le();P.Transform=oi();P.PassThrough=li();P.pipeline=Fu;var{addAbortSignal:s_}=ft();P.addAbortSignal=s_;P.finished=Uu;P.destroy=o_;P.compose=r_;P.setDefaultHighWaterMark=n_;P.getDefaultHighWaterMark=i_;he(P,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return Ai}});he(Fu,Wu,{__proto__:null,enumerable:!0,get(){return Ai.pipeline}});he(Uu,Wu,{__proto__:null,enumerable:!0,get(){return Ai.finished}});P.Stream=P;P._isUint8Array=function(t){return t instanceof Uint8Array};P._uint8ArrayToBuffer=function(t){return t_.from(t.buffer,t.byteOffset,t.byteLength)}});var Gu=E((kS,L)=>{"use strict";var W=require("stream");if(W&&process.env.READABLE_STREAM==="disable"){let e=W.promises;L.exports._uint8ArrayToBuffer=W._uint8ArrayToBuffer,L.exports._isUint8Array=W._isUint8Array,L.exports.isDisturbed=W.isDisturbed,L.exports.isErrored=W.isErrored,L.exports.isReadable=W.isReadable,L.exports.Readable=W.Readable,L.exports.Writable=W.Writable,L.exports.Duplex=W.Duplex,L.exports.Transform=W.Transform,L.exports.PassThrough=W.PassThrough,L.exports.addAbortSignal=W.addAbortSignal,L.exports.finished=W.finished,L.exports.destroy=W.destroy,L.exports.pipeline=W.pipeline,L.exports.compose=W.compose,Object.defineProperty(W,"promises",{configurable:!0,enumerable:!0,get(){return e}}),L.exports.Stream=W.Stream}else{let e=Ri(),t=Ei(),r=e.Readable.destroy;L.exports=e.Readable,L.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,L.exports._isUint8Array=e._isUint8Array,L.exports.isDisturbed=e.isDisturbed,L.exports.isErrored=e.isErrored,L.exports.isReadable=e.isReadable,L.exports.Readable=e.Readable,L.exports.Writable=e.Writable,L.exports.Duplex=e.Duplex,L.exports.Transform=e.Transform,L.exports.PassThrough=e.PassThrough,L.exports.addAbortSignal=e.addAbortSignal,L.exports.finished=e.finished,L.exports.destroy=e.destroy,L.exports.destroy=r,L.exports.pipeline=e.pipeline,L.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return t}}),L.exports.Stream=e.Stream}L.exports.default=L.exports});var Yu=E((IS,Ju)=>{"use strict";var zu=Symbol.for("pino.metadata"),f_=Us(),{Duplex:u_}=Gu(),{parentPort:Hu,workerData:Ku}=require("worker_threads");function a_(){let e,t,r=new Promise((n,i)=>{e=n,t=i});return r.resolve=e,r.reject=t,r}Ju.exports=function(t,r={}){let n=r.expectPinoConfig===!0&&Ku?.workerData?.pinoWillSendConfig===!0,i=r.parse==="lines",o=typeof r.parseLine=="function"?r.parseLine:JSON.parse,s=r.close||c_,f=f_(function(u){let a;try{a=o(u)}catch(d){this.emit("unknown",u,d);return}if(a===null){this.emit("unknown",u,"Null value ignored");return}return typeof a!="object"&&(a={data:a,time:Date.now()}),f[zu]&&(f.lastTime=a.time,f.lastLevel=a.level,f.lastObj=a),i?u:a},{autoDestroy:!0});if(f._destroy=function(u,a){let d=s(u,a);d&&typeof d.then=="function"&&d.then(a,a)},r.expectPinoConfig===!0&&Ku?.workerData?.pinoWillSendConfig!==!0&&setImmediate(()=>{f.emit("error",new Error("This transport is not compatible with the current version of pino. Please upgrade pino to the latest version."))}),r.metadata!==!1&&(f[zu]=!0,f.lastTime=0,f.lastLevel=0,f.lastObj=null),n){let u={},a=a_();return Hu.on("message",function d(p){p.code==="PINO_CONFIG"&&(u=p.config,a.resolve(),Hu.off("message",d))}),Object.defineProperties(f,{levels:{get(){return u.levels}},messageKey:{get(){return u.messageKey}},errorKey:{get(){return u.errorKey}}}),a.then(c)}return c();function c(){let u=t(f);if(u&&typeof u.catch=="function")u.catch(a=>{f.destroy(a)}),u=null;else if(r.enablePipelining&&u)return u_.from({writable:f,readable:u});return f}};function c_(e,t){process.nextTick(t,e)}});var Qu=E((DS,Xu)=>{var d_=new Function("modulePath","return import(modulePath)");function h_(e){return typeof __non_webpack__require__=="function"?__non_webpack__require__(e):require(e)}Xu.exports={realImport:d_,realRequire:h_}});var ea=E((PS,Zu)=>{"use strict";var{realImport:p_,realRequire:mt}=Qu();Zu.exports=y_;async function y_(e){let t;try{let r=e.startsWith("file://")?e:"file://"+e;r.endsWith(".ts")||r.endsWith(".cts")?(process[Symbol.for("ts-node.register.instance")]?mt("ts-node/register"):process.env&&process.env.TS_NODE_DEV&&mt("ts-node-dev"),t=mt(decodeURIComponent(e))):t=await p_(r)}catch(r){if(r.code==="ENOTDIR"||r.code==="ERR_MODULE_NOT_FOUND")t=mt(e);else if(r.code===void 0||r.code==="ERR_VM_DYNAMIC_IMPORT_CALLBACK_MISSING")t=mt(decodeURIComponent(e));else throw r}if(typeof t=="object"&&(t=t.default),typeof t=="object"&&(t=t.default),typeof t!="function")throw Error("exported worker is not a function");return t}});var b_=require("events"),{pipeline:g_,PassThrough:w_}=require("stream"),m_=Cs(),__=Yu(),ta=ea();module.exports=async function({targets:e,pipelines:t,levels:r,dedupe:n}){let i=[];if(e&&e.length&&(e=await Promise.all(e.map(async f=>{let u=await(await ta(f.target))(f.options);return{level:f.level,stream:u}})),i.push(...e)),t&&t.length&&(t=await Promise.all(t.map(async f=>{let c,u=await Promise.all(f.map(async a=>(c=a.level,await(await ta(a.target))(a.options))));return{level:c,stream:s(u)}})),i.push(...t)),i.length===1)return i[0].stream;return __(o,{parse:"lines",metadata:!0,close(f,c){let u=0;for(let d of i)u++,d.stream.on("close",a),d.stream.end();function a(){--u===0&&c(f)}}});function o(f){let c=m_.multistream(i,{levels:r,dedupe:n});f.on("data",function(u){let{lastTime:a,lastMsg:d,lastObj:p,lastLevel:l}=this;c.lastLevel=l,c.lastTime=a,c.lastMsg=d,c.lastObj=p,c.write(u+`
`)})}function s(f){let c=new b_,u=new w_({autoDestroy:!0,destroy(a,d){c.on("error",d),c.on("closed",d)}});return g_(u,...f,function(a){if(a&&a.code!=="ERR_STREAM_PREMATURE_CLOSE"){c.emit("error",a);return}c.emit("closed")}),u}};
//# sourceMappingURL=pino-worker.js.map
